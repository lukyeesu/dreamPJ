import{r as n,j as e,a as Lt,c as kr}from"./vendor-react-DmI7wK4h.js";import{H as Sr,C as ys,a as Cr,L as Nl,S as yl,F as cl,b as Je,c as Ge,T as _t,d as Ia,e as kl,f as Ds,P as Ve,U as Ke,g as xl,B as pt,h as ks,X as ts,i as it,M as $s,j as Ft,k as ut,l as He,m as Is,n as Me,o as Dr,I as Ca,p as Qt,q as _s,r as It,s as Pa,t as Ss,u as _e,v as De,E as Sl,W as Cl,G as _a,w as ft,x as Ps,y as $r,z as Ir,A as Cs,D as ml,J as Da,K as Xt,N as Pr,O as _r,Q as hl,R as Ns,V as Fr,Y as Tr,Z as Lr,_ as pl,$ as Mr,a0 as Er,a1 as Dl,a2 as $l,a3 as Il,a4 as Pl,a5 as Ar,a6 as Kt,a7 as Fa,a8 as _l,a9 as ul,aa as Or,ab as zr,ac as Ur,ad as Rr,ae as qr,af as Hr,ag as Wr,ah as Yr,ai as Br,aj as gl,ak as $a,al as fl,am as Vr,an as Jr,ao as Gr}from"./icons-BDp9ZJYb.js";import"./vendor-7OC5HNn7.js";(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))N(S);new MutationObserver(S=>{for(const p of S)if(p.type==="childList")for(const I of p.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&N(I)}).observe(document,{childList:!0,subtree:!0});function h(S){const p={};return S.integrity&&(p.integrity=S.integrity),S.referrerPolicy&&(p.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?p.credentials="include":S.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function N(S){if(S.ep)return;S.ep=!0;const p=h(S);fetch(S.href,p)}})();const ke="https://script.google.com/macros/s/AKfycbw2WJ4tt7l__0U6XYtgHbyl0W1iGjm6oHXa9-2twBKfa1xP2-SBj2hMwaHUYp7ew_Ih/exec",ka=(s,x)=>{var h=parseInt(s.slice(1),16),N=x<0?0:255,S=x<0?x*-1:x,p=h>>16,I=h>>8&255,P=h&255;return"#"+(16777216+(Math.round((N-p)*S)+p)*65536+(Math.round((N-I)*S)+I)*256+(Math.round((N-P)*S)+P)).toString(16).slice(1)},Qr=s=>{var x=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);return x?`${parseInt(x[1],16)}, ${parseInt(x[2],16)}, ${parseInt(x[3],16)}`:"0, 0, 0"},Sa={indigo:{label:"Indigo",main:"#4f46e5",hover:"#4338ca",light:"#eef2ff",textLight:"#6366f1",gradientFrom:"#4f46e5",gradientTo:"#7c3aed",shadow:"rgba(79, 70, 229, 0.4)"},blue:{label:"Blue",main:"#2563eb",hover:"#1d4ed8",light:"#eff6ff",textLight:"#3b82f6",gradientFrom:"#2563eb",gradientTo:"#06b6d4",shadow:"rgba(37, 99, 235, 0.4)"},emerald:{label:"Emerald",main:"#059669",hover:"#047857",light:"#ecfdf5",textLight:"#10b981",gradientFrom:"#059669",gradientTo:"#14b8a6",shadow:"rgba(5, 150, 105, 0.4)"},rose:{label:"Rose",main:"#e11d48",hover:"#be123c",light:"#fff1f2",textLight:"#f43f5e",gradientFrom:"#e11d48",gradientTo:"#db2777",shadow:"rgba(225, 29, 72, 0.4)"},amber:{label:"Amber",main:"#d97706",hover:"#b45309",light:"#fffbeb",textLight:"#f59e0b",gradientFrom:"#d97706",gradientTo:"#ea580c",shadow:"rgba(217, 119, 6, 0.4)"},slate:{label:"Slate",main:"#475569",hover:"#334155",light:"#f8fafc",textLight:"#64748b",gradientFrom:"#475569",gradientTo:"#0f172a",shadow:"rgba(71, 85, 105, 0.4)"},rainbow:{label:"Rainbow",main:"#8b5cf6",hover:"#7c3aed",light:"#faf5ff",textLight:"#8b5cf6",gradientFrom:"#ec4899",gradientTo:"#3b82f6",shadow:"rgba(139, 92, 246, 0.4)",isRainbow:!0}},nt=[{name:"Overview",icon:Sr,label:"ภาพรวมแผนงาน"},{name:"Calendar",icon:ys,label:"ปฏิทินงาน"},{name:"Analytics",icon:Cr,label:"วิเคราะห์ประสิทธิภาพ"},{name:"Plans",icon:Nl,label:"รายการแผนงาน"},{name:"Settings",icon:yl,label:"ตั้งค่า"}],gt=[{name:"Slate",value:"bg-slate-50 text-slate-500 border-slate-200",dot:"bg-slate-400"},{name:"Blue",value:"bg-blue-50 text-blue-700 border-blue-100",dot:"bg-blue-500"},{name:"Indigo",value:"bg-indigo-50 text-indigo-700 border-indigo-100",dot:"bg-indigo-500"},{name:"Violet",value:"bg-violet-50 text-violet-700 border-violet-100",dot:"bg-violet-500"},{name:"Amber",value:"bg-amber-50 text-amber-700 border-amber-100",dot:"bg-amber-500"},{name:"Emerald",value:"bg-emerald-50 text-emerald-700 border-emerald-100",dot:"bg-emerald-500"},{name:"Rose",value:"bg-rose-50 text-rose-700 border-rose-100",dot:"bg-rose-500"},{name:"Orange",value:"bg-orange-50 text-orange-700 border-orange-100",dot:"bg-orange-500"}],es=[{value:"completed",label:"งานเสร็จสิ้น",color:"text-emerald-600 bg-emerald-50"},{value:"active",label:"กำลังดำเนินการ",color:"text-blue-600 bg-blue-50"},{value:"pending",label:"รอดำเนินการ",color:"text-amber-600 bg-amber-50"},{value:"cancelled",label:"ยกเลิก/มีปัญหา",color:"text-rose-600 bg-rose-50"},{value:"declined",label:"ลูกค้าไม่อนุมัติ",color:"text-gray-600 bg-gray-50"}],ge=s=>{if(!s)return null;if(s.startsWith("data:"))return s;if(s.includes("drive.google.com")){let x=null;if(s.includes("id=")){const h=s.match(/id=([a-zA-Z0-9_-]+)/);h&&(x=h[1])}else if(s.includes("/d/")){const h=s.match(/\/d\/([a-zA-Z0-9_-]+)/);h&&(x=h[1])}else if(s.includes("uc?")){const h=s.match(/id=([a-zA-Z0-9_-]+)/);h&&(x=h[1])}if(x)return`https://lh3.googleusercontent.com/d/${x}`}return s},bl=s=>{if(!s)return null;const x=s.match(/id=([a-zA-Z0-9_-]+)/)||s.match(/\/d\/([a-zA-Z0-9_-]+)/);return x?x[1]:null},Fl=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),e.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),e.jsx("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),e.jsx("path",{d:"M2 7h20"}),e.jsx("path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7"})]}),Tl=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",className:s,children:[e.jsx("path",{d:"M64 27.487c0-14.32-14.355-25.97-32-25.97S0 13.168 0 27.487c0 12.837 11.384 23.588 26.762 25.62 1.042.225 2.46.688 2.82 1.578.322.81.21 2.076.103 2.894l-.457 2.74c-.14.81-.643 3.164 2.772 1.725s18.428-10.852 25.143-18.58h-.001C61.78 38.38 64 33.218 64 27.487",fill:"currentColor"}),e.jsxs("g",{fill:"#fff",children:[e.jsx("path",{d:"M25.498 20.568h-2.245c-.344 0-.623.28-.623.623v13.943a.62.62 0 0 0 .623.62h2.245a.62.62 0 0 0 .623-.62V21.2c0-.343-.28-.623-.623-.623m15.45-.01h-2.244c-.345 0-.624.28-.624.623v8.284l-6.4-8.63c-.014-.022-.03-.043-.048-.063l-.004-.004a.4.4 0 0 0-.038-.038l-.044-.04c-.006-.004-.01-.008-.016-.012l-.032-.022-.02-.012-.033-.02c-.006-.002-.014-.006-.02-.01-.012-.006-.023-.012-.036-.016s-.014-.006-.02-.006c-.012-.006-.025-.008-.037-.012l-.022-.006c-.012-.002-.023-.006-.035-.008l-.026-.004c-.008-.002-.022-.004-.033-.004l-.032-.002c-.008 0-.014-.001-.022-.001h-2.244c-.344 0-.623.28-.623.623V35.13a.62.62 0 0 0 .623.62h2.244c.344 0 .624-.278.624-.62v-8.28l6.397 8.64a.63.63 0 0 0 .158.154c.018.014.032.022.045.03.006.004.012.008.018.01s.02.01.03.014.02.008.03.014l.06.022a.62.62 0 0 0 .168.022h2.244a.62.62 0 0 0 .623-.62V21.2c0-.343-.28-.623-.623-.623"}),e.jsx("path",{d:"M20.087 32.264h-6.1V21.2c0-.344-.28-.623-.623-.623H11.12c-.344 0-.623.28-.623.623v13.942a.62.62 0 0 0 .174.431c.012.012.014.016.016.018.113.107.264.174.43.174h8.968c.344 0 .623-.28.623-.623v-2.245c0-.344-.278-.623-.623-.623m33.258-8.214c.344 0 .623-.28.623-.623V21.2c0-.344-.278-.623-.623-.623h-8.968c-.168 0-.32.067-.432.176-.012.01-.016.014-.018.018-.107.1-.173.262-.173.43v13.943a.62.62 0 0 0 .174.431l.016.016a.62.62 0 0 0 .431.174h8.968c.344 0 .623-.28.623-.623v-2.246c0-.344-.278-.623-.623-.623h-6.098v-2.357h6.098a.62.62 0 0 0 .623-.623V27.04c0-.344-.278-.624-.623-.624h-6.098V24.06h6.098z"})]})]}),Ll=({className:s})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:s,children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),Ml=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 300",fill:"currentColor",className:s,children:[e.jsx("path",{d:"M200.803 111.88c-24.213 1.265-45.268 8.605-62.362 25.188-17.271 16.754-25.155 37.284-23 62.734-9.464-1.172-18.084-2.462-26.753-3.192-2.994-.252-6.547.106-9.083 1.537-8.418 4.75-16.488 10.113-26.053 16.092 1.755-7.938 2.891-14.889 4.902-21.575 1.479-4.914.794-7.649-3.733-10.849-29.066-20.521-41.318-51.232-32.149-82.85 8.483-29.25 29.315-46.989 57.621-56.236 38.635-12.62 82.054.253 105.547 30.927 8.485 11.08 13.688 23.516 15.063 38.224zm-111.437-9.852c.223-5.783-4.788-10.993-10.74-11.167-6.094-.179-11.106 4.478-11.284 10.483-.18 6.086 4.475 10.963 10.613 11.119 6.085.154 11.186-4.509 11.411-10.435zm58.141-11.171c-5.974.11-11.022 5.198-10.916 11.004.109 6.018 5.061 10.726 11.204 10.652 6.159-.074 10.83-4.832 10.772-10.977-.051-6.032-4.981-10.79-11.06-10.679z"}),e.jsx("path",{d:"M255.201 262.83c-7.667-3.414-14.7-8.536-22.188-9.318-7.459-.779-15.3 3.524-23.104 4.322-23.771 2.432-45.067-4.193-62.627-20.432-33.397-30.89-28.625-78.254 10.014-103.568 34.341-22.498 84.704-14.998 108.916 16.219 21.129 27.24 18.646 63.4-7.148 86.284-7.464 6.623-10.15 12.073-5.361 20.804.884 1.612.985 3.653 1.498 5.689zm-87.274-84.499c4.881.005 8.9-3.815 9.085-8.636.195-5.104-3.91-9.385-9.021-9.406-5.06-.023-9.299 4.318-9.123 9.346.166 4.804 4.213 8.69 9.059 8.696zm56.261-18.022c-4.736-.033-8.76 3.844-8.953 8.629-.205 5.117 3.772 9.319 8.836 9.332 4.898.016 8.768-3.688 8.946-8.562.19-5.129-3.789-9.364-8.829-9.399z"})]}),El=({className:s})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:s,children:e.jsx("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"})}),Zt=(s,x)=>{if(!s||!x)return s;const h=new Date(x);if(isNaN(h.getTime()))return s;const N=String(h.getDate()).padStart(2,"0"),S=String(h.getMonth()+1).padStart(2,"0"),p=h.getFullYear()+543,I=String(h.getHours()).padStart(2,"0"),P=String(h.getMinutes()).padStart(2,"0");return`${s}${N}${S}${p}${I}${P}`},$e=s=>{if(!s)return"";const x=new Date(s);if(isNaN(x.getTime()))return"";const h=String(x.getDate()).padStart(2,"0"),N=String(x.getMonth()+1).padStart(2,"0"),S=x.getFullYear()+543,p=String(x.getHours()).padStart(2,"0"),I=String(x.getMinutes()).padStart(2,"0");return`${h}/${N}/${S} ${p}:${I}`},Tt=s=>{const x=$e(s.rawDeliveryStart),h=$e(s.rawDeliveryEnd||s.rawDeliveryDateTime);return s.rawDeliveryStart&&(s.rawDeliveryEnd||s.rawDeliveryDateTime)?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:x}),e.jsx("span",{children:h})]}):e.jsx("span",{children:h||s.deliveryDate||"-"})},Ta=({src:s,onClose:x})=>{const[h,N]=n.useState(1),[S,p]=n.useState({x:0,y:0}),[I,P]=n.useState(!1),[c,D]=n.useState({x:0,y:0}),[_,m]=n.useState(0),w=n.useRef(null);return n.useEffect(()=>{const v=te=>{te.preventDefault();const W=Math.max(1,Math.min(h+te.deltaY*-.01,5));N(W)},R=w.current;return R&&R.addEventListener("wheel",v,{passive:!1}),()=>{R&&R.removeEventListener("wheel",v)}},[h]),n.useEffect(()=>{h===1&&p({x:0,y:0})},[h]),Lt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 flex flex-col animate-in fade-in duration-300",children:e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-white/50 text-xs font-medium pointer-events-none bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm",children:h===1?"Pinch or Scroll to Zoom":`${Math.round(h*100)}%`})}),document.body)},Kr=s=>{if(!s)return"";const x=s.replace(/[^\d]/g,""),h=x.length;return h<4?x:h<7?`${x.slice(0,3)}-${x.slice(3)}`:`${x.slice(0,3)}-${x.slice(3,6)}-${x.slice(6,10)}`},Al=({shopInfo:s,maxWidthClass:x="max-w-7xl"})=>s?e.jsx("footer",{className:"bg-white border-t border-slate-200 mt-auto pb-safe w-full",children:e.jsxs("div",{className:`${x} mx-auto px-4 w-full h-auto md:h-[100px] flex flex-col md:flex-row items-center justify-between gap-4 py-4 md:py-0`,children:[e.jsxs("div",{className:"flex items-start gap-3 w-full md:w-auto justify-center md:justify-start",children:[e.jsxs("div",{className:"shrink-0 w-12 h-12 rounded-lg overflow-hidden flex items-center justify-center relative self-start mt-0.5",children:[s.logo?e.jsx("img",{src:ge(s.logo),alt:"Shop Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:h=>{h.target.style.display="none",h.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-full h-full bg-slate-100 text-slate-400 flex items-center justify-center ${s.logo?"hidden":"flex"}`,children:e.jsx(Fl,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-sm font-bold text-slate-800 leading-tight",children:s.shopName||"ร้านค้า"}),s.address&&e.jsx("p",{className:"text-xs font-medium text-slate-500 leading-snug mt-1 max-w-[280px] md:max-w-[400px] whitespace-pre-wrap",children:s.address})]})]}),e.jsxs("div",{className:"flex flex-col-reverse md:flex-col items-center md:items-end gap-3 md:gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.line&&e.jsx("a",{href:s.line,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-[#06C755] transition-all hover:scale-110",children:e.jsx(Tl,{className:"w-5 h-5"})}),s.facebook&&e.jsx("a",{href:s.facebook,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-[#1877F2] transition-all hover:scale-110",children:e.jsx(Dl,{className:"w-5 h-5 fill-current"})}),s.instagram&&e.jsx("a",{href:s.instagram,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-[#C13584] transition-all hover:scale-110",children:e.jsx($l,{className:"w-5 h-5"})}),s.tiktok&&e.jsx("a",{href:s.tiktok,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-black transition-all hover:scale-110",children:e.jsx(Il,{className:"w-5 h-5"})}),s.twitter&&e.jsx("a",{href:s.twitter,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-black transition-all hover:scale-110",children:e.jsx(Ll,{className:"w-4 h-4"})}),s.wechat&&e.jsx("a",{href:s.wechat,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-[#07C160] transition-all hover:scale-110",children:e.jsx(Ml,{className:"w-5 h-5"})}),s.telegram&&e.jsx("a",{href:s.telegram,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-[#0088cc] transition-all hover:scale-110",children:e.jsx(El,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-x-4 gap-y-1 text-xs font-medium text-slate-500 w-full md:w-auto",children:[s.phone&&e.jsxs("a",{href:`tel:${s.phone}`,className:"flex items-center gap-1.5 hover:text-indigo-600 transition-colors whitespace-nowrap",children:[e.jsx(it,{className:"w-3.5 h-3.5"}),Kr(s.phone)]}),s.email&&e.jsxs("a",{href:`mailto:${s.email}`,className:"flex items-center gap-1.5 hover:text-indigo-600 transition-colors break-all",children:[e.jsx($s,{className:"w-3.5 h-3.5 shrink-0"}),s.email]})]})]})]})}):null,Xr=({activities:s,onEventClick:x,onDayClick:h,dealStatuses:N=[],transportStatuses:S=[]})=>{const[p,I]=n.useState(new Date),[P,c]=n.useState("month"),[D,_]=n.useState(null),[m,w]=n.useState(!1),v=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],R=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],te=["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],W=["อา","จ","อ","พ","พฤ","ศ","ส"],C=(u,y)=>{const g=y.find(b=>b.value===u);if(g)return{label:g.label,color:g.color,type:g.type};const L=es.find(b=>b.value===u);return L?{label:L.label,color:L.color,type:L.value}:{label:u||"-",color:"bg-slate-100 text-slate-500 border-slate-200"}},Q=u=>{const y=new Date(p);P==="month"?y.setMonth(y.getMonth()+u):P==="week"||P==="list"?y.setDate(y.getDate()+u*7):P==="day"&&y.setDate(y.getDate()+u),I(y)},xe=u=>{const y=new Date;return u.getDate()===y.getDate()&&u.getMonth()===y.getMonth()&&u.getFullYear()===y.getFullYear()},V=n.useMemo(()=>{const u={};return s.forEach(y=>{const g=y.rawDeliveryStart||y.rawDeliveryDateTime||y.rawDateTime;if(!g)return;const L=new Date(g);if(isNaN(L.getTime()))return;const b=`${L.getFullYear()}-${L.getMonth()}-${L.getDate()}`;u[b]||(u[b]=[]),u[b].push(y)}),Object.keys(u).forEach(y=>{u[y].sort((g,L)=>{const b=new Date(g.rawDeliveryStart||g.rawDateTime),O=new Date(L.rawDeliveryStart||L.rawDateTime);return b-O})}),u},[s]),le=u=>{const y=`${u.getFullYear()}-${u.getMonth()}-${u.getDate()}`;return V[y]||[]},z=(u,y)=>{const g=u.rawDeliveryStart?new Date(u.rawDeliveryStart).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):u.rawDateTime?new Date(u.rawDateTime).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):"",L=`${g?g+" ":""}${u.name} (${u.artist||"-"})`;let O=C(u.dealStatus,N).color||"bg-slate-50 border-slate-200 text-slate-600",T="bg-slate-400";const he=gt.find(Ee=>Ee.value===O);return he?T=he.dot:O.includes("emerald")||O.includes("green")?T="bg-emerald-500":O.includes("blue")||O.includes("indigo")||O.includes("sky")?T="bg-blue-500":O.includes("amber")||O.includes("yellow")||O.includes("orange")?T="bg-amber-500":O.includes("rose")||O.includes("red")||O.includes("pink")?T="bg-rose-500":(O.includes("purple")||O.includes("violet"))&&(T="bg-violet-500"),e.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),x(u)},className:`text-[8px] sm:text-xs text-left px-0.5 py-0.5 sm:px-2 sm:py-1 rounded-[3px] sm:rounded-md border truncate transition-all w-full mb-0.5 sm:mb-1 flex items-center gap-0.5 sm:gap-1 shrink-0 h-auto min-h-[16px] sm:min-h-[26px] ${O} leading-none`,title:`${g} ${u.name} (${u.artist})`,children:[e.jsx("div",{className:`w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full shrink-0 ${T} hidden sm:block`}),e.jsx("span",{className:"truncate font-medium tracking-tighter",children:L})]},y)},we=()=>{const u=new Date(p.getFullYear(),p.getMonth()+1,0).getDate(),y=new Date(p.getFullYear(),p.getMonth(),1).getDay();return e.jsx("div",{className:"flex-1 bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full relative",children:e.jsx("div",{className:"overflow-x-auto flex-1 flex flex-col custom-scrollbar",children:e.jsxs("div",{className:"w-full flex flex-col flex-1 h-full",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-slate-100 bg-slate-50/50 shrink-0",children:W.map((g,L)=>e.jsx("div",{className:`py-2 sm:py-3 text-center text-[10px] sm:text-sm font-bold ${L===0||L===6?"text-rose-500":"text-slate-500"}`,children:g},g))}),e.jsxs("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr bg-slate-50/10 overflow-y-auto",children:[Array.from({length:y}).map((g,L)=>e.jsx("div",{className:"border-b border-r border-slate-100 bg-slate-50/20 min-h-[50px] sm:min-h-[140px]"},`empty-${L}`)),Array.from({length:u}).map((g,L)=>{const b=L+1,O=new Date(p.getFullYear(),p.getMonth(),b),T=le(O),he=xe(O);return e.jsxs("div",{onClick:()=>_({date:O,events:T}),className:`border-b border-r border-slate-100 p-0.5 sm:p-2 flex flex-col gap-0.5 sm:gap-1 transition-colors hover:bg-indigo-50/30 group min-h-[50px] sm:min-h-[140px] relative cursor-pointer ${he?"bg-indigo-50/20":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start p-0.5 sm:p-1",children:[e.jsx("span",{className:`text-[10px] sm:text-sm font-bold w-4 h-4 sm:w-7 sm:h-7 flex items-center justify-center rounded-full ${he?"bg-indigo-600 text-white shadow-md":"text-slate-700"}`,children:b}),T.length>0&&e.jsxs("span",{className:"text-[8px] sm:text-[10px] font-bold text-slate-400 bg-slate-100 px-1 sm:px-1.5 rounded-full border border-slate-200",children:["+",T.length]})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-0.5 overflow-y-auto custom-scrollbar mt-0.5 sm:mt-1 px-0 max-h-[80px] sm:max-h-[140px]",children:T.map((Ee,ze)=>z(Ee,ze))})]},b)}),Array.from({length:(7-(y+u)%7)%7}).map((g,L)=>e.jsx("div",{className:"border-b border-r border-slate-100 bg-slate-50/20"},`end-empty-${L}`))]})]})})})},Ie=()=>{const u=new Date(p);u.setDate(p.getDate()-p.getDay());const y=Array.from({length:7},(g,L)=>{const b=new Date(u);return b.setDate(u.getDate()+L),b});return e.jsxs("div",{className:"flex-1 bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full relative",children:[e.jsx("div",{className:"overflow-x-auto flex-1 flex flex-col custom-scrollbar",children:e.jsxs("div",{className:"min-w-[1000px] md:min-w-0 flex flex-col flex-1 h-full",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-slate-100 bg-slate-50/50 shrink-0",children:y.map((g,L)=>{const b=xe(g);return e.jsxs("div",{className:`py-3 text-center border-r border-slate-100 last:border-0 ${L===0||L===6?"text-rose-500":"text-slate-600"}`,children:[e.jsx("div",{className:"text-xs font-bold opacity-70",children:W[L]}),e.jsx("div",{className:`text-lg font-black ${b?"text-indigo-600":""}`,children:g.getDate()})]},L)})}),e.jsx("div",{className:"grid grid-cols-7 flex-1 overflow-y-auto bg-white divide-x divide-slate-100",children:y.map((g,L)=>{const b=le(g),O=xe(g);return e.jsx("div",{onClick:()=>_({date:g,events:b}),className:`p-2 flex flex-col gap-1 min-h-[300px] hover:bg-slate-50 cursor-pointer overflow-y-auto custom-scrollbar ${O?"bg-indigo-50/10":""}`,children:b.map((T,he)=>z(T,he))},L)})})]})}),e.jsx("div",{className:"md:hidden absolute bottom-2 right-4 bg-black/20 text-white text-[10px] px-2 py-1 rounded-full pointer-events-none backdrop-blur-sm animate-pulse",children:"เลื่อนซ้าย-ขวา เพื่อดูเพิ่มเติม"})]})},A=()=>{const u=le(p),y=xe(p);return e.jsxs("div",{className:"flex-1 bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxs("div",{className:`w-12 h-12 rounded-2xl flex flex-col items-center justify-center border shadow-sm ${y?"bg-indigo-600 text-white border-indigo-600":"bg-indigo-100 text-indigo-600 border-indigo-200"}`,children:[e.jsx("span",{className:"text-[10px] font-bold uppercase",children:W[p.getDay()]}),e.jsx("span",{className:"text-xl font-black leading-none",children:p.getDate()})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:[te[p.getDay()],"ที่ ",p.getDate()," ",v[p.getMonth()]," ",p.getFullYear()+543]}),e.jsxs("p",{className:"text-slate-500 text-sm font-medium",children:[u.length," รายการ"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-2",children:u.length>0?u.map((g,L)=>{const b=C(g.dealStatus,N);return e.jsxs("div",{onClick:()=>x(g),className:"flex items-center gap-4 p-4 rounded-xl border border-slate-100 hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer bg-white group",children:[e.jsxs("div",{className:"w-20 text-center shrink-0 flex flex-col items-center gap-1",children:[e.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-lg text-xs w-fit whitespace-nowrap",children:g.id}),e.jsx("span",{className:"text-sm font-black text-slate-700 block",children:g.rawDeliveryStart?new Date(g.rawDeliveryStart).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):"-"})]}),e.jsx("div",{className:"w-1 h-10 bg-slate-200 rounded-full group-hover:bg-indigo-500 transition-colors"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h4",{className:"font-bold text-slate-800 truncate",children:g.name}),e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full border ${b.color}`,children:b.label})]}),e.jsxs("p",{className:"text-sm text-slate-500 truncate flex items-center gap-1",children:[e.jsx(Ke,{className:"w-3 h-3"})," ",g.artist,e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx(pt,{className:"w-3 h-3"})," ",g.customer]})]})]},L)}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-slate-400",children:[e.jsx(ys,{className:"w-10 h-10 mb-2 opacity-20"}),e.jsx("p",{children:"ไม่มีรายการในวันนี้"})]})})]})},K=()=>{const u=new Date(p);u.setDate(p.getDate()-p.getDay());const y=Array.from({length:7},(g,L)=>{const b=new Date(u);return b.setDate(u.getDate()+L),b});return e.jsxs("div",{className:"flex-1 bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col p-4 sm:p-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 px-2 flex items-center gap-2",children:[e.jsx(Nl,{className:"w-5 h-5 text-indigo-600"}),"รายการประจำสัปดาห์"]}),e.jsx("div",{className:"space-y-6",children:y.map((g,L)=>{const b=le(g),O=xe(g);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`sticky top-0 z-10 px-3 py-2 rounded-lg flex items-center gap-2 border-l-4 ${O?"bg-indigo-50 border-indigo-500 text-indigo-700":"bg-slate-50 border-slate-300 text-slate-600"}`,children:[e.jsx("span",{className:"font-black w-6 text-right",children:g.getDate()}),e.jsx("span",{className:"font-bold text-sm uppercase",children:te[g.getDay()]}),e.jsx("div",{className:"h-px bg-current opacity-10 flex-1 ml-2"})]}),e.jsx("div",{className:"pl-4 space-y-2",children:b.length>0?b.map((T,he)=>e.jsxs("div",{onClick:()=>x(T),className:"bg-white border border-slate-100 p-3 rounded-xl hover:shadow-md hover:border-indigo-200 transition-all cursor-pointer flex gap-3",children:[e.jsxs("div",{className:"text-xs font-bold text-slate-500 pt-1 w-20 shrink-0 flex flex-col items-center gap-1",children:[e.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-lg text-xs w-fit whitespace-nowrap",children:T.id}),e.jsx("span",{children:T.rawDeliveryStart?new Date(T.rawDeliveryStart).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):"-"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm truncate",children:T.name}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 whitespace-nowrap",children:T.category})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-0.5 truncate",children:[e.jsx("span",{className:"font-medium text-indigo-600",children:T.artist})," • ",T.customer]})]})]},he)):e.jsx("div",{className:"text-xs text-slate-300 pl-2 italic",children:"ไม่มีรายการ"})})]},L)})})]})},me=()=>{w(!0),setTimeout(()=>{_(null),w(!1)},300)},ne=()=>{if(!D)return null;const{date:u,events:y}=D;return Lt.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[55] flex items-center justify-center p-4",children:[e.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm ${m?"backdrop-animate-out":"animate-in fade-in duration-300"}`,onClick:me}),e.jsxs("div",{className:`bg-white w-full max-w-5xl rounded-[2rem] shadow-2xl relative z-10 overflow-hidden flex flex-col max-h-[90vh] ${m?"modal-animate-out":"modal-animate-in"}`,children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex justify-between items-center bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-2xl flex flex-col items-center justify-center border border-indigo-100",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase",children:W[u.getDay()]}),e.jsx("span",{className:"text-xl font-black leading-none",children:u.getDate()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-slate-900",children:"รายการประจำวัน"}),e.jsxs("p",{className:"text-slate-500 text-sm font-medium",children:[te[u.getDay()],"ที่ ",u.getDate()," ",v[u.getMonth()]," ",u.getFullYear()+543]})]})]}),e.jsx("button",{onClick:me,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition",children:e.jsx(ts,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar bg-slate-50/50",children:y.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100 text-slate-500 text-xs uppercase tracking-wide",children:[e.jsx("th",{className:"p-4 font-bold w-[10%]",children:"เวลา"}),e.jsx("th",{className:"p-4 font-bold w-[20%]",children:"โปรเจค"}),e.jsx("th",{className:"p-4 font-bold w-[20%]",children:"ศิลปิน/ลูกค้า"}),e.jsx("th",{className:"p-4 font-bold w-[20%]",children:"ผู้รับ"}),e.jsx("th",{className:"p-4 font-bold w-[15%]",children:"สถานะ"}),e.jsx("th",{className:"p-4 font-bold w-[15%] text-right",children:"ยอดเงิน"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:y.map((g,L)=>{const b=g.rawDeliveryStart?new Date(g.rawDeliveryStart).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):"-",O=C(g.dealStatus,N),T=C(g.transportStatus,S);return e.jsxs("tr",{onClick:()=>x(g),className:"hover:bg-indigo-50/30 cursor-pointer transition-colors group",children:[e.jsx("td",{className:"p-4 font-bold text-slate-700 whitespace-nowrap align-top",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-lg text-xs w-fit whitespace-nowrap",children:g.id}),e.jsx("span",{className:"mt-1",children:b})]})}),e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("div",{className:"font-bold text-slate-900",children:g.name}),e.jsx("div",{className:"text-xs text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded w-fit mt-1",children:g.category})]}),e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("div",{className:"text-sm font-bold text-indigo-600",children:g.artist}),e.jsx("div",{className:"text-xs text-slate-500",children:g.customer})]}),e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700",children:g.recipient||"-"}),g.recipientPhone&&e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-0.5",children:[e.jsx(it,{className:"w-3 h-3"})," ",g.recipientPhone]})]}),e.jsx("td",{className:"p-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1.5 items-start",children:[e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-md border inline-flex items-center gap-1 ${O.color}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${O.type==="confirmed"||O.type==="completed"?"bg-emerald-500":"bg-slate-400"}`}),O.label]}),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-md border inline-flex items-center gap-1 ${T.color}`,children:[e.jsx(De,{className:"w-3 h-3"}),T.label]})]})}),e.jsx("td",{className:"p-4 align-top text-right font-bold text-slate-800",children:parseFloat(g.wage||0).toLocaleString()})]},L)})})]})})}),e.jsx("div",{className:"md:hidden space-y-3",children:y.map((g,L)=>{const b=g.rawDeliveryStart?new Date(g.rawDeliveryStart).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):"-",O=C(g.dealStatus,N),T=C(g.transportStatus,S);return e.jsxs("div",{onClick:()=>x(g),className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm flex flex-col gap-3 active:scale-95 transition-transform",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-lg text-xs w-fit whitespace-nowrap",children:g.id}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3 text-slate-400"}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[b," น."]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-md border inline-flex items-center gap-1 ${O.color}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${O.type==="confirmed"||O.type==="completed"?"bg-emerald-500":"bg-slate-400"}`}),O.label]}),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-md border inline-flex items-center gap-1 ${T.color}`,children:[e.jsx(De,{className:"w-3 h-3"}),T.label]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 text-sm line-clamp-2",children:g.name}),e.jsx("div",{className:"text-xs text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded w-fit mt-1",children:g.category})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-600 bg-slate-50 p-2 rounded-xl border border-slate-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-400",children:"ศิลปิน"}),e.jsx("p",{className:"font-bold text-indigo-600 truncate",children:g.artist})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-400",children:"ลูกค้า"}),e.jsx("p",{className:"truncate",children:g.customer})]}),e.jsxs("div",{className:"col-span-2 pt-1 border-t border-slate-200 mt-1",children:[e.jsx("p",{className:"text-[10px] text-slate-400",children:"ผู้รับ"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"truncate font-medium",children:g.recipient||"-"}),g.recipientPhone&&e.jsxs("span",{className:"text-slate-400 text-[10px]",children:["(",g.recipientPhone,")"]})]})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-100 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"ยอดเงิน"}),e.jsxs("span",{className:"text-sm font-black text-slate-800",children:["฿",parseFloat(g.wage||0).toLocaleString()]})]})]},L)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400",children:[e.jsx("div",{className:"p-4 bg-white rounded-full shadow-sm mb-3",children:e.jsx(ys,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{className:"font-bold",children:"ไม่มีรายการงานในวันนี้"})]})}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-white flex justify-end",children:e.jsx("button",{onClick:me,className:"px-6 py-2 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition",children:"ปิด"})})]})]}),document.body)},ve=()=>{if(P==="month")return`${v[p.getMonth()]} ${p.getFullYear()+543}`;if(P==="day")return`${p.getDate()} ${v[p.getMonth()]} ${p.getFullYear()+543}`;if(P==="week"||P==="list"){const u=new Date(p);u.setDate(u.getDate()-u.getDay());const y=new Date(u);return y.setDate(y.getDate()+6),u.getMonth()===y.getMonth()?`${u.getDate()} - ${y.getDate()} ${v[u.getMonth()]} ${u.getFullYear()+543}`:`${u.getDate()} ${R[u.getMonth()]} - ${y.getDate()} ${R[y.getMonth()]} ${y.getFullYear()+543}`}};return e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500 px-4 sm:px-8 lg:px-10 pt-6 pb-24 md:pb-6 h-full flex flex-col",children:[ne(),e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-2",children:[e.jsxs("div",{className:"w-full xl:w-auto",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-slate-900 tracking-tight",children:"ปฏิทินงาน"}),e.jsx("p",{className:"text-slate-500 mt-1 text-sm font-medium",children:P==="list"?`รายการสัปดาห์ของ ${v[p.getMonth()]} ${p.getFullYear()+543}`:`ภาพรวม ${v[p.getMonth()]} ${p.getFullYear()+543}`})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full xl:w-auto xl:flex-row xl:items-center",children:[e.jsx("div",{className:"grid grid-cols-4 gap-1 bg-slate-100 p-1 rounded-xl w-full xl:w-auto xl:flex",children:[{id:"month",label:"เดือน",icon:ys},{id:"week",label:"สัปดาห์",icon:Wr},{id:"day",label:"วัน",icon:Fa},{id:"list",label:"รายการ",icon:Yr}].map(u=>e.jsxs("button",{onClick:()=>c(u.id),className:`px-2 py-2 sm:px-3 sm:py-1.5 rounded-lg text-xs font-bold flex items-center justify-center gap-1.5 transition-all ${P===u.id?"bg-white text-indigo-600 shadow-sm ring-1 ring-black/5":"text-slate-500 hover:text-slate-700 hover:bg-white/50"}`,children:[e.jsx(u.icon,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:u.label})]},u.id))}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-1 rounded-xl border border-slate-200 shadow-sm w-full xl:w-auto",children:[e.jsx("button",{onClick:()=>Q(-1),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 transition",children:e.jsx(kl,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 min-w-[120px] text-center select-none truncate px-2 flex-1",children:ve()}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>Q(1),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 transition",children:e.jsx(Ia,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-px h-6 bg-slate-100 mx-1"}),e.jsx("button",{onClick:()=>I(new Date),className:"ml-1 mr-1 px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-bold rounded-lg hover:bg-indigo-100 transition whitespace-nowrap",children:"วันนี้"})]})]})]})]}),P==="month"&&we(),P==="week"&&Ie(),P==="day"&&A(),P==="list"&&K()]})},Zr=({data:s,shopInfo:x,dealStatuses:h=[]})=>{const[N,S]=n.useState(null);if(n.useEffect(()=>{const m=x?.shopName?`ใบเสนอราคา - ${x.shopName}`:"ใบเสนอราคา";document.title=m},[x]),!s)return null;const p=(m,w)=>{const v=w.find(te=>te.value===m);if(v)return{type:v.type,label:v.label,color:v.color};const R=es.find(te=>te.value===m);return R?{type:R.value,label:R.label,color:R.color}:{type:"pending",label:m||"-",color:"text-slate-500 bg-slate-50"}},I=s.customerSupport?s.customerSupport.reduce((m,w)=>m+(parseFloat(w.price)||0),0):0,P=s.quotationItems&&s.quotationItems.length>0,c=P?s.quotationItems.reduce((m,w)=>m+(parseFloat(w.price)||0),0):parseFloat(s.wage)||0,D=I+c,_=p(s.dealStatus,h);return e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-safe font-sans flex flex-col",children:[N&&e.jsx(Ta,{src:ge(N),onClose:()=>S(null)}),e.jsxs("div",{className:"bg-indigo-600 text-white pt-8 pb-10 px-4 rounded-b-[2rem] shadow-md shadow-indigo-200 relative overflow-hidden z-0 md:pt-16 md:pb-28 md:rounded-b-[3rem]",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:e.jsx(Ft,{className:"w-24 h-24 transform -rotate-12 md:w-64 md:h-64 md:opacity-20"})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-2",children:[e.jsx("h1",{className:"text-5xl font-black tracking-tight leading-none drop-shadow-sm md:text-7xl",children:x?.shopName||"รายละเอียดใบเสนอราคา"}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-white/20 px-3 py-1 rounded-full backdrop-blur-md border border-white/10 shadow-sm md:px-6 md:py-2 md:mt-2",children:[e.jsx(Da,{className:"w-3.5 h-3.5 text-indigo-50 md:w-5 md:h-5"}),e.jsx("p",{className:"text-indigo-50 text-[10px] font-bold tracking-wide opacity-90 md:text-sm",children:"ใบเสนอราคา (Quotation View)"})]})]})]}),e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 relative z-10 space-y-3 -mt-6 md:-mt-20 md:space-y-0 md:grid md:grid-cols-12 md:gap-8 mb-3 md:mb-0",children:[e.jsxs("div",{className:"md:col-span-7 space-y-3 md:space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-4 flex flex-col gap-4 relative overflow-hidden md:p-8 md:rounded-[2rem] md:shadow-md",children:e.jsxs("div",{className:"flex justify-between items-start gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 min-w-0 flex-1",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 leading-tight line-clamp-2 md:text-2xl md:mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-black text-indigo-600 bg-indigo-50 px-2.5 py-0.5 rounded-md text-xs border border-indigo-100 whitespace-nowrap md:text-sm md:px-3 md:py-1",children:s.id}),e.jsxs("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold border flex items-center gap-1 truncate ${_.color} md:text-xs md:px-3 md:py-1`,children:[s.dealStatus==="cancelled"?e.jsx(_s,{className:"w-3 h-3 md:w-4 md:h-4"}):e.jsx(Xt,{className:"w-3 h-3 md:w-4 md:h-4"}),_.label]})]})]}),s.image&&e.jsxs("div",{className:"w-16 h-16 shrink-0 rounded-xl overflow-hidden border border-slate-100 bg-slate-50 relative group cursor-pointer shadow-sm md:w-32 md:h-32 md:rounded-2xl",onClick:()=>S(s.image),children:[e.jsx("img",{src:ge(s.image),alt:"Preview",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:m=>{m.target.style.display="none",m.target.parentElement&&(m.target.parentElement.style.display="none")}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:e.jsx(Is,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 drop-shadow-sm md:w-8 md:h-8"})})]})]})}),e.jsxs("div",{className:"bg-white p-3 rounded-2xl border border-slate-200 shadow-sm grid grid-cols-2 gap-3 md:p-8 md:rounded-[2rem] md:shadow-md md:gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2 border-r border-slate-100 pr-2 md:gap-4 md:pr-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-indigo-500 mb-1 md:mb-2",children:[e.jsx(Ke,{className:"w-3.5 h-3.5 md:w-5 md:h-5"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 md:text-sm",children:"ข้อมูลทั่วไป"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"วันที่"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:$e(s.rawDateTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"ศิลปิน"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:s.artist})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"ลูกค้า"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:s.customer})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 pl-1 md:gap-4 md:pl-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-rose-500 mb-1 md:mb-2",children:[e.jsx(De,{className:"w-3.5 h-3.5 md:w-5 md:h-5"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 md:text-sm",children:"จัดส่ง"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"กำหนดส่ง"}),e.jsx("div",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:Tt(s)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"สถานที่"}),s.mapLink&&e.jsx("a",{href:s.mapLink,target:"_blank",rel:"noreferrer",className:"text-[9px] text-blue-600 font-bold hover:underline md:text-xs",children:"Map"})]}),e.jsx("p",{className:"text-xs font-bold text-slate-700 line-clamp-2 leading-tight md:text-base",children:s.location||"-"})]}),(s.recipient||s.recipientPhone)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"ผู้รับ"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:s.recipient||"-"}),s.recipientPhone&&e.jsx("a",{href:`tel:${s.recipientPhone}`,className:"text-[10px] text-indigo-600 font-bold block md:text-sm",children:s.recipientPhone})]})]})]})]}),e.jsx("div",{className:"md:col-span-5 space-y-3 md:space-y-6",children:e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm space-y-5 md:p-8 md:rounded-[2rem] md:shadow-lg md:sticky md:top-6",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 text-center uppercase tracking-wide md:text-xl md:mb-6",children:"สรุปยอดเรียกเก็บเงิน"}),s.customerSupport&&s.customerSupport.some(m=>parseFloat(m.price)>0)&&e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-indigo-100 pb-1 mb-2 md:pb-2",children:[e.jsxs("h4",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2 md:text-base",children:[e.jsx(_a,{className:"w-4 h-4 md:w-5 md:h-5"}),"เงินสนับสนุนศิลปิน"]}),e.jsxs("span",{className:"text-sm font-bold text-indigo-700 md:text-lg",children:["฿",I.toLocaleString()]})]}),e.jsx("ul",{className:"space-y-2 pl-2 md:space-y-3",children:s.customerSupport.filter(m=>parseFloat(m.price)>0).map((m,w)=>e.jsxs("li",{className:"flex justify-between items-center text-xs text-slate-600 border-b border-slate-100 last:border-0 pb-1 last:pb-0 md:text-sm md:pb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-300 rounded-full md:w-2 md:h-2"}),m.denomination>=20?"แบงค์":"เหรียญ"," ",m.denomination," x ",m.quantity," ",m.denomination>=20?"ใบ":"เหรียญ"]}),e.jsx("span",{className:"font-medium text-slate-800 tabular-nums",children:parseFloat(m.price).toLocaleString()})]},w))})]}),e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-emerald-100 pb-1 mb-2 md:pb-2",children:[e.jsxs("h4",{className:"text-sm font-bold text-emerald-600 flex items-center gap-2 md:text-base",children:[e.jsx(Ft,{className:"w-4 h-4 md:w-5 md:h-5"}),"รายการเสนอราคา"]}),e.jsxs("span",{className:"text-sm font-bold text-emerald-700 md:text-lg",children:["฿",c.toLocaleString()]})]}),e.jsx("ul",{className:"space-y-2 pl-2 md:space-y-3",children:P?s.quotationItems.map((m,w)=>e.jsxs("li",{className:"flex justify-between items-start text-xs text-slate-600 border-b border-slate-100 last:border-0 pb-1 last:pb-0 md:text-sm md:pb-2",children:[e.jsxs("div",{className:"flex items-start gap-2 pr-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-300 rounded-full mt-1.5 shrink-0 md:w-2 md:h-2 md:mt-2"}),e.jsxs("span",{className:"font-medium text-slate-600 break-words",children:[m.category&&e.jsx("span",{className:"font-bold text-slate-700 mr-1",children:m.category}),m.detail||"-"]})]}),e.jsx("span",{className:"font-medium text-slate-800 tabular-nums whitespace-nowrap",children:parseFloat(m.price).toLocaleString()})]},w)):e.jsxs("li",{className:"flex justify-between items-center text-xs text-slate-600 border-b border-slate-100 last:border-0 pb-1 last:pb-0 md:text-sm md:pb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-300 rounded-full md:w-2 md:h-2"}),"ค่าบริการรวม"]}),e.jsx("span",{className:"font-medium text-slate-800 tabular-nums",children:c.toLocaleString()})]})})]}),e.jsxs("div",{className:"flex flex-col -mx-5 -mb-5 rounded-b-2xl overflow-hidden md:-mx-8 md:-mb-8 md:rounded-b-[2rem] mt-2",children:[s.note&&e.jsxs("div",{className:"bg-amber-50/50 p-5 md:p-6 border-t-2 border-amber-100/50 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(Pa,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"หมายเหตุ"})]}),e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed whitespace-pre-wrap font-medium md:text-sm",children:s.note})]}),e.jsxs("div",{className:`flex flex-col items-end bg-slate-100/50 p-5 md:p-6 ${s.note?"border-t border-slate-200":"border-t-2 border-slate-200"}`,children:[e.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"ยอดเรียกเก็บสุทธิ"}),e.jsxs("span",{className:"text-3xl font-black text-indigo-600 leading-none tabular-nums",children:["฿",D.toLocaleString()]})]})]})]})})]}),e.jsx(Al,{shopInfo:x,maxWidthClass:"max-w-5xl"})]})},en=({data:s,shopInfo:x,dealStatuses:h=[],transportStatuses:N=[]})=>{const[S,p]=n.useState(null);if(n.useEffect(()=>{const m=x?.shopName?`ติดตามสถานะงาน - ${x.shopName}`:"ติดตามสถานะงาน";document.title=m},[x]),!s)return null;const I=(m,w)=>{const v=w.find(te=>te.value===m);if(v)return{type:v.type,label:v.label,color:v.color};const R=es.find(te=>te.value===m);return R?{type:R.value,label:R.label,color:R.color}:{type:"pending",label:m||"-",color:"text-slate-500 bg-slate-50"}},P=I(s.dealStatus,h),c=I(s.transportStatus,N),D=m=>{const w=P.type||"pending",v=c.type||"pending";if(w==="cancelled"||(v==="cancelled"||v==="issue"))return{status:"error",text:"ปิดงานมีปัญหา",colorClass:"bg-rose-500 text-white border-rose-500 shadow-md shadow-rose-200",icon:$a};if(m===1)return w==="declined"?{status:"declined",text:"ปฏิเสธ",colorClass:"bg-white text-slate-400 border-2 border-slate-200",icon:$a}:w==="pending"?{status:"pending",text:"รอดำเนินการ",colorClass:"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 ring-4 ring-indigo-50",icon:Ds}:w==="active"||w==="completed"?{status:"completed",text:"รับเรื่อง",colorClass:"bg-emerald-500 text-white border-emerald-500 shadow-sm shadow-emerald-200",icon:Je}:{status:"wait",text:"รอ",colorClass:"bg-white text-slate-300 border-2 border-slate-200",icon:Ds};if(m===2)return w==="declined"||w==="pending"?{status:"wait",text:"-",colorClass:"bg-white text-slate-200 border-2 border-slate-100",icon:Xt}:w==="active"?{status:"current",text:"ดำเนินการ",colorClass:"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 ring-4 ring-indigo-50",icon:_e}:w==="completed"?{status:"completed",text:"งานเสร็จสิ้น",colorClass:"bg-emerald-500 text-white border-emerald-500 shadow-sm shadow-emerald-200",icon:Je}:{status:"wait",text:"รอ",colorClass:"bg-white text-slate-300 border-2 border-slate-200",icon:Xt};if(m===3)return w==="pending"||w==="declined"?{status:"wait",text:"-",colorClass:"bg-white text-slate-200 border-2 border-slate-100",icon:De}:v==="pending"?{status:"pending",text:"รอจัดส่ง",colorClass:"bg-white text-slate-400 border-2 border-slate-300",icon:De}:v==="active"?{status:"current",text:"กำลังจัดส่ง",colorClass:"bg-emerald-500 text-white border-emerald-500 shadow-lg shadow-emerald-200 ring-4 ring-emerald-50",icon:De}:v==="completed"?{status:"completed",text:"จัดส่งแล้ว",colorClass:"bg-emerald-500 text-white border-emerald-500 shadow-sm shadow-emerald-200",icon:Je}:{status:"wait",text:"-",colorClass:"bg-white text-slate-300 border-2 border-slate-200",icon:De};if(m===4)return v==="pending"||w==="pending"||w==="declined"?{status:"wait",text:"-",colorClass:"bg-white text-slate-200 border-2 border-slate-100",icon:Je}:v==="active"?{status:"pending",text:"ใกล้ถึงที่หมาย",colorClass:"bg-orange-500 text-white border-orange-500 shadow-lg shadow-orange-200 ring-4 ring-orange-50",icon:ut}:v==="completed"?{status:"completed",text:"เสร็จสิ้น",colorClass:"bg-emerald-500 text-white border-emerald-500 shadow-sm shadow-emerald-200",icon:Je}:{status:"wait",text:"-",colorClass:"bg-white text-slate-300 border-2 border-slate-200",icon:Je}},_=[1,2,3,4];return e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-safe font-sans flex flex-col",children:[S&&e.jsx(Ta,{src:ge(S),onClose:()=>p(null)}),e.jsxs("div",{className:"bg-indigo-600 text-white pt-8 pb-10 px-4 rounded-b-[2rem] shadow-md shadow-indigo-200 relative overflow-hidden z-0 md:pt-16 md:pb-28 md:rounded-b-[3rem]",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:e.jsx(Or,{className:"w-24 h-24 transform rotate-12 md:w-64 md:h-64 md:opacity-20"})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-2",children:[e.jsx("h1",{className:"text-5xl font-black tracking-tight leading-none drop-shadow-sm md:text-7xl",children:x?.shopName||"ติดตามสถานะงาน"}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-white/20 px-3 py-1 rounded-full backdrop-blur-md border border-white/10 shadow-sm md:px-6 md:py-2 md:mt-2",children:[e.jsx(Cs,{className:"w-3.5 h-3.5 text-indigo-50 md:w-5 md:h-5"}),e.jsx("p",{className:"text-indigo-50 text-[10px] font-bold tracking-wide opacity-90 md:text-sm",children:"ระบบติดตามสถานะ (Tracking Status)"})]})]})]}),e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 relative z-10 space-y-3 -mt-6 md:-mt-20 md:space-y-6 mb-3 md:mb-0",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5 flex flex-col gap-6 relative md:p-8 md:rounded-[2rem] md:shadow-md",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:gap-8",children:[e.jsxs("div",{className:"flex justify-between items-start gap-3 md:flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-2 min-w-0 flex-1",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 leading-tight line-clamp-2 md:text-2xl md:mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap gap-y-2 content-start",children:[e.jsx("span",{className:"font-black text-indigo-600 bg-indigo-50 px-2.5 py-1 rounded-md text-xs border border-indigo-100 whitespace-nowrap md:text-sm md:px-3 md:py-1",children:s.id}),e.jsxs("span",{className:`px-2 py-1 rounded-md text-[10px] font-bold border flex items-center gap-1 truncate ${P.color} md:text-xs md:px-3 md:py-1`,children:[P.type==="cancelled"?e.jsx(_s,{className:"w-3 h-3 md:w-4 md:h-4"}):e.jsx(Xt,{className:"w-3 h-3 md:w-4 md:h-4"}),P.label]})]})]}),s.image&&e.jsxs("div",{className:"w-16 h-16 shrink-0 rounded-xl overflow-hidden border border-slate-100 bg-slate-50 relative group cursor-pointer shadow-sm md:w-28 md:h-28 md:rounded-2xl",onClick:()=>p(s.image),children:[e.jsx("img",{src:ge(s.image),alt:"Preview",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:m=>{m.target.style.display="none",m.target.parentElement&&(m.target.parentElement.style.display="none")}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:e.jsx(Is,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 drop-shadow-sm md:w-8 md:h-8"})})]})]}),e.jsx("div",{className:"hidden md:block w-px bg-slate-100 self-stretch mx-4"}),e.jsx("div",{className:"h-px bg-slate-100 w-full md:hidden my-2"}),e.jsx("div",{className:"px-0 md:flex-1 md:flex md:flex-col md:justify-center md:pt-4 w-full",children:e.jsxs("div",{className:"relative w-full pt-2 pb-1",children:[e.jsx("div",{className:"absolute left-[12.5%] right-[12.5%] top-[18px] h-0.5 bg-slate-100 -z-10 rounded-full md:top-[24px] md:h-1"}),e.jsx("div",{className:"grid grid-cols-4 w-full",children:_.map((m,w)=>{const v=D(m),R=v.icon;return e.jsxs("div",{className:"flex flex-col items-center gap-3 relative group cursor-default",children:[w<_.length-1&&e.jsx("div",{className:"absolute top-[18px] -right-0 md:top-[24px] transform -translate-y-1/2 translate-x-1/2 z-0",children:e.jsx(Ia,{className:"w-4 h-4 text-slate-300 md:w-5 md:h-5"})}),e.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center transition-all duration-500 z-10 ${v.colorClass} md:w-12 md:h-12`,children:e.jsx(R,{className:`w-4 h-4 md:w-6 md:h-6 ${v.status==="current"?"animate-pulse":""}`,strokeWidth:v.status==="current"?2.5:2})}),e.jsx("span",{className:`text-[10px] font-bold text-center leading-tight transition-colors duration-300 ${v.status==="current"?"text-indigo-600 scale-105":"text-slate-400"} md:text-xs px-0.5`,children:v.text})]},m)})})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-3 md:gap-6",children:[e.jsxs("div",{className:"bg-white p-3 rounded-2xl border border-slate-200 shadow-sm grid grid-cols-2 gap-3 md:p-8 md:rounded-[2rem] md:shadow-md md:gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2 border-r border-slate-100 pr-2 md:gap-4 md:pr-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-indigo-500 mb-1 md:mb-2",children:[e.jsx(Ke,{className:"w-3.5 h-3.5 md:w-5 md:h-5"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 md:text-sm",children:"ข้อมูลทั่วไป"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"วันที่"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:$e(s.rawDateTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"ศิลปิน"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:s.artist})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"ลูกค้า"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:s.customer})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 pl-1 md:gap-4 md:pl-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-rose-500 mb-1 md:mb-2",children:[e.jsx(De,{className:"w-3.5 h-3.5 md:w-5 md:h-5"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 md:text-sm",children:"จัดส่ง"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"กำหนดส่ง"}),e.jsx("div",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:Tt(s)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"สถานที่"}),s.mapLink&&e.jsx("a",{href:s.mapLink,target:"_blank",rel:"noreferrer",className:"text-[9px] text-blue-600 font-bold hover:underline md:text-xs",children:"Map"})]}),e.jsx("p",{className:"text-xs font-bold text-slate-700 line-clamp-2 leading-tight md:text-base",children:s.location||"-"})]}),(s.recipient||s.recipientPhone)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-400 md:text-xs md:mb-1",children:"ผู้รับ"}),e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate md:text-base",children:s.recipient||"-"}),s.recipientPhone&&e.jsx("a",{href:`tel:${s.recipientPhone}`,className:"text-[10px] text-indigo-600 font-bold block md:text-sm",children:s.recipientPhone})]})]})]}),s.note&&e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm md:p-8 md:rounded-[2rem] md:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 md:mb-4",children:[e.jsx(Pa,{className:"w-4 h-4 text-amber-500 md:w-5 md:h-5"}),e.jsx("h3",{className:"text-sm font-bold text-slate-800 uppercase tracking-wide md:text-lg",children:"หมายเหตุ"})]}),e.jsx("div",{className:"p-3 bg-amber-50/50 rounded-xl border border-amber-100 text-xs text-slate-600 leading-relaxed md:text-sm md:p-4 whitespace-pre-wrap",children:s.note})]})]}),e.jsx("div",{className:"md:col-span-5 space-y-3 md:space-y-6"})]}),e.jsx(Al,{shopInfo:x,maxWidthClass:"max-w-5xl"})]})},tn=({data:s,onClose:x,shopInfo:h})=>{const[N,S]=n.useState(!1),[p,I]=n.useState(!1),[P,c]=n.useState(!1),D=s.customerSupport?s.customerSupport.reduce((C,Q)=>C+(parseFloat(Q.price)||0),0):0,_=s.quotationItems&&s.quotationItems.length>0,m=_?s.quotationItems.reduce((C,Q)=>C+(parseFloat(Q.price)||0),0):parseFloat(s.wage)||0,w=D+m,v=()=>{let C="";s.customerSupport&&s.customerSupport.some(z=>parseFloat(z.price)>0)&&(C+=`
💵 *เงินสนับสนุนศิลปิน (Money Order)*
`,s.customerSupport.filter(z=>parseFloat(z.price)>0).forEach(z=>{const we=z.denomination>=20?"แบงค์":"เหรียญ",Ie=z.denomination>=20?"ใบ":"เหรียญ";C+=`- ${we} ${z.denomination} (${z.quantity} ${Ie}): ${parseFloat(z.price).toLocaleString()} บ.
`}));let Q="";_?(Q+=`
📄 *รายการเสนอราคา (Quotation)*
`,s.quotationItems.forEach(z=>{Q+=`- ${z.category?`[${z.category}] `:""}${z.detail||"-"}: ${parseFloat(z.price).toLocaleString()} บ.
`})):parseFloat(s.wage)>0&&(Q+=`
📄 *ค่าบริการรวม:* ${parseFloat(s.wage).toLocaleString()} บ.
`);const xe=Tt(s);let V="-";try{if(xe?.props?.children){const z=xe.props.children;Array.isArray(z)?V=z.map(we=>we?.props?.children).filter(Boolean).join(" - "):V=z}}catch{V=s.deliveryDate||"-"}const le=`
📋 *รายละเอียดงาน (Job Summary)*
🆔 ${s.id}
📌 โครงการ: ${s.name}
📅 วันที่: ${$e(s.rawDateTime)}
🎭 ศิลปิน: ${s.artist}
👤 ลูกค้า: ${s.customer}

🚚 *การจัดส่ง & สถานที่*
⏰ กำหนดส่ง: ${V}
📍 สถานที่: ${s.location||"-"}
🗺️ แผนที่: ${s.mapLink||"-"}
📞 ผู้รับ: ${s.recipient||"-"} (${s.recipientPhone||"-"})
${C}${Q}
💰 *ยอดเรียกเก็บสุทธิ: ฿${w.toLocaleString()}*
    `.trim();try{const z=document.createElement("textarea");z.value=le,z.style.position="fixed",z.style.left="-9999px",z.style.top="0",document.body.appendChild(z),z.focus(),z.select();const we=document.execCommand("copy");document.body.removeChild(z),we&&(S(!0),setTimeout(()=>S(!1),2e3))}catch(z){console.error("Fallback: Oops, unable to copy",z)}},R=()=>{try{const C=new URL(window.location.href),Q=Zt(s.id,s.rawDateTime);C.searchParams.set("tracking",Q);const xe=C.toString(),V=document.createElement("textarea");V.value=xe,V.style.position="fixed",V.style.left="-9999px",V.style.top="0",document.body.appendChild(V),V.focus(),V.select();const le=document.execCommand("copy");document.body.removeChild(V),le&&(I(!0),setTimeout(()=>I(!1),2e3))}catch(C){console.error("Unable to copy link",C)}},te=()=>{try{const C=new URL(window.location.href),Q=Zt(s.id,s.rawDateTime);C.searchParams.delete("tracking"),C.searchParams.set("quotation",Q);const xe=C.toString(),V=document.createElement("textarea");V.value=xe,V.style.position="fixed",V.style.left="-9999px",V.style.top="0",document.body.appendChild(V),V.focus(),V.select();const le=document.execCommand("copy");document.body.removeChild(V),le&&(c(!0),setTimeout(()=>c(!1),2e3))}catch(C){console.error("Unable to copy quotation link",C)}},W=()=>{const C=h?.shopName||"ไม่ระบุชื่อร้านค้า",Q=h?.address||"-",xe=h?.phone||"-",V=h?.email||"-",le=h?.taxId||"-",z=h?.logo?ge(h.logo):null,we=s.customer||"ลูกค้าทั่วไป",Ie=s.customerInfo?.address||"-",A=s.customerInfo?.taxId||"-",K=s.customerInfo?.phone||"-",me=s.customerInfo?.email||"-",ne=s.recipient||"-",ve=s.recipientPhone||"-",u=s.location||"-";let y=s.deliveryDate;if(!y||y==="-")if(s.rawDeliveryStart||s.rawDeliveryEnd||s.rawDeliveryDateTime){const Z=$e(s.rawDeliveryStart),oe=$e(s.rawDeliveryEnd||s.rawDeliveryDateTime);s.rawDeliveryStart&&(s.rawDeliveryEnd||s.rawDeliveryDateTime)?y=`${Z} - ${oe}`:y=oe||Z}else y="-";const g=[];s.quotationItems&&s.quotationItems.forEach(Z=>{g.push({...Z,type:"quotation"})}),g.length===0&&parseFloat(s.wage)>0&&g.push({category:"",detail:"ค่าบริการรวม",price:s.wage,type:"quotation"}),s.customerSupport&&s.customerSupport.forEach(Z=>{parseFloat(Z.price)>0&&g.push({...Z,type:"support"})});const L=s.customerSupport?s.customerSupport.reduce((Z,oe)=>Z+(parseFloat(oe.price)||0),0):0,b=s.quotationItems?s.quotationItems.reduce((Z,oe)=>Z+(parseFloat(oe.price)||0),0):parseFloat(s.wage)||0,O=L+b,T=b,he=T/1.07,Ee=T-he,ze=L,M=(Z=>{if(Z=parseFloat(Z),Z===0)return"ศูนย์บาทถ้วน";const oe=["ศูนย์","หนึ่ง","สอง","สาม","สี่","ห้า","หก","เจ็ด","แปด","เก้า"],Pe=["","สิบ","ร้อย","พัน","หมื่น","แสน","ล้าน"];let Ze=Z.toFixed(2).toString(),[ie,Ue]=Ze.split("."),ae="";if(parseInt(ie)===0)ae="ศูนย์";else{let We=ie.length;for(let J=0;J<We;J++){let fe=parseInt(ie.charAt(J)),be=We-J-1,xt=be%6;fe!==0&&(xt===0&&fe===1&&J>0&&parseInt(ie.charAt(J-1))!==0?ae+="เอ็ด":xt===1&&fe===2?ae+="ยี่":xt===1&&fe===1||(ae+=oe[fe]),ae+=Pe[xt]),be>0&&be%6===0&&(ae+="ล้าน")}}if(ae+="บาท",parseInt(Ue)===0)ae+="ถ้วน";else if(parseInt(Ue)>0){let We=Ue.length;for(let J=0;J<We;J++){let fe=parseInt(Ue.charAt(J)),be=We-J-1;fe!==0&&(be===0&&fe===1&&J>0?ae+="เอ็ด":be===1&&fe===2?ae+="ยี่":be===1&&fe===1||(ae+=oe[fe]),be===1&&(ae+="สิบ"))}ae+="สตางค์"}return ae})(O),E=$e(s.rawDateTime||new Date().toISOString()).split(" ")[0],se=`INV${s.id.replace(/\D/g,"")}`,X=[],ue=24,pe=16,dt=36,ct=30;let Ne=[...g],Ae=0;if(Ne.length===0)X.push({items:[],isLast:!0,pageIndex:0});else for(;Ne.length>0;){const Z=Ae===0,oe=Z?ue:dt,Pe=Z?pe:ct;Ne.length<=Pe?(X.push({items:Ne,isLast:!0,pageIndex:Ae}),Ne=[]):Ne.length<=oe?(X.push({items:Ne,isLast:!1,pageIndex:Ae}),Ne=[],Ae++,X.push({items:[],isLast:!0,pageIndex:Ae})):(X.push({items:Ne.slice(0,oe),isLast:!1,pageIndex:Ae}),Ne=Ne.slice(oe)),Ae++}const Mt=(Z,oe,Pe,Ze)=>{let ie="",Ue=0;for(let J=0;J<oe;J++)Ue+=X[J].items.length;let ae=Ue+1;return Z.items.forEach(J=>{const fe=J.type==="support",be=fe?`<span class="font-semibold text-gray-800">เงินสนับสนุน (${J.denomination>=20?"แบงค์":"เหรียญ"} ${J.denomination})</span> <span class="text-[10px] text-gray-400">* Non-Vat</span>`:`<span class="font-semibold text-gray-800">${J.category||"-"}</span> <span class="text-xs text-gray-600 ml-1">${J.detail||""}</span>`;ie+=`
             <tr class="border-b border-gray-200">
                <!-- [MODIFIED] Reduced padding for compact rows -->
                <td class="py-1 px-1.5 text-center align-top">${ae++}</td>
                <td class="py-1 px-1.5 align-top leading-tight">${be}</td>
                <td class="py-1 px-1.5 text-right align-top">${fe?J.quantity:"1.00"}</td>
                <td class="py-1 px-1.5 text-right align-top">${fe?(parseFloat(J.price)/parseInt(J.quantity||1)).toLocaleString(void 0,{minimumFractionDigits:2}):parseFloat(J.price).toLocaleString(void 0,{minimumFractionDigits:2})}</td>
                <td class="py-1 px-1.5 text-right align-top">0.00</td>
                <td class="py-1 px-1.5 text-right font-semibold align-top">${parseFloat(J.price).toLocaleString(void 0,{minimumFractionDigits:2})}</td>
             </tr>`}),`
        <div class="receipt-a4-container ${Ze==="ต้นฉบับ"?"page-break-after":""} bg-white px-8 py-6 relative flex flex-col">
            <!-- Header (Only on First Page) -->
            ${oe===0?`
            <div class="flex justify-between items-start mb-2 shrink-0"> <!-- ADDED shrink-0 to prevent overlapping -->
                <div class="flex flex-col gap-3 w-[60%] mt-2">
                    <div class="flex gap-4">
                        ${z?`<img src="${z}" class="w-20 h-20 object-contain rounded-md" />`:""}
                        <div>
                            <h2 class="text-lg font-bold text-gray-800 leading-tight">${C}</h2>
                            <p class="text-xs text-gray-500 mt-0.5 leading-tight">${Q}</p>
                            <p class="text-[10px] text-gray-500 mt-0.5 font-medium">เลขประจำตัวผู้เสียภาษี: ${le}</p>
                            <div class="flex gap-3 mt-1 text-[10px] text-gray-500">
                                ${`<span class="flex items-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg> ${xe}</span>`}
                                ${`<span class="flex items-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg> ${V}</span>`}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col justify-between items-end text-right w-[38%]">
                    <div>
                        <div class="text-xs text-gray-500 mb-0.5">(${Ze})</div>
                        <h1 class="text-xl font-bold text-green-600 tracking-tight leading-none">ใบเสร็จรับเงิน/ใบกำกับภาษี</h1>
                    </div>
                    <div class="border border-green-200 bg-green-50 rounded-lg p-2 text-xs text-left shadow-sm force-print-bg w-[65%] mt-2">
                        <div class="grid grid-cols-[auto,1fr] gap-x-2 gap-y-0.5">
                            <strong class="text-green-800">เลขที่:</strong> <span class="text-gray-700 font-mono font-bold">${se}</span>
                            <strong class="text-green-800">วันที่:</strong> <span class="text-gray-700">${E}</span>
                            <strong class="text-green-800">อ้างอิง:</strong> <span class="text-gray-700 truncate">${s.id}</span>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="border-t-2 border-gray-100 my-2 shrink-0" />

            <!-- Info Section & Image (Only on First Page) -->
            <div class="grid grid-cols-12 gap-3 text-xs mb-2 items-stretch min-h-[145px] shrink-0"> <!-- MODIFIED: mb-1 to mb-2 -->
                <div class="col-span-7 flex flex-col gap-2">
                    <div class="bg-gray-50 rounded-lg p-2.5 border border-gray-100 relative flex-1 flex flex-col justify-center">
                        <div class="absolute top-0 right-0 p-1.5 opacity-10 pointer-events-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        </div>
                        <div class="flex items-center gap-1.5 mb-1">
                            <h3 class="text-[10px] font-bold text-gray-400 uppercase tracking-wider">ลูกค้า (Customer)</h3>
                        </div>
                        <div class="grid grid-cols-[80px,1fr] gap-y-0.5 text-xs relative z-10">
                             <span class="text-gray-500 font-bold">ชื่อ:</span>
                             <div class="text-gray-800 font-bold truncate">${we}</div>
                             ${K!=="-"?`<span class="text-gray-500 font-bold">เบอร์โทร:</span><div class="text-gray-800 truncate">${K}</div>`:""}
                             ${me!=="-"?`<span class="text-gray-500 font-bold">อีเมล:</span><div class="text-gray-800 truncate">${me}</div>`:""}
                             <span class="text-gray-500 font-bold">เลขที่ภาษี:</span><div class="text-gray-800 truncate">${A}</div>
                             <span class="text-gray-500 font-bold">ที่อยู่:</span><div class="text-gray-800 leading-tight line-clamp-2">${Ie}</div>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-2.5 border border-gray-100 relative flex-1 flex flex-col justify-center">
                        <div class="absolute top-0 right-0 p-1.5 opacity-10 pointer-events-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/></svg>
                        </div>
                         <div class="flex items-center gap-1.5 mb-1">
                            <h3 class="text-[10px] font-bold text-gray-400 uppercase tracking-wider">จัดส่ง (Shipping)</h3>
                        </div>
                        <div class="grid grid-cols-[80px,1fr] gap-y-1 relative z-10">
                            <span class="text-gray-500 font-bold">ผู้รับ:</span>
                            <div class="text-gray-800 font-bold truncate">${ne} ${ve!=="-"?`<span class="font-normal text-gray-600 text-[10px] ml-1">(${ve})</span>`:""}</div>
                            <span class="text-gray-500 font-bold">กำหนดส่ง:</span><div class="text-gray-800 truncate">${y}</div>
                            <span class="text-gray-500 font-bold">สถานที่:</span><div class="text-gray-800 leading-tight line-clamp-2">${u}</div>
                        </div>
                    </div>
                </div>
                <div class="col-span-5 relative">
                     <div class="absolute inset-0 bg-gray-50 border border-gray-100 rounded-lg flex flex-col overflow-hidden">
                        <!-- [MODIFIED] Removed "Picture" label overlay -->
                        <div class="w-full h-full flex items-center justify-center bg-gray-50">
                            ${s.image?`<img src="${ge(s.image)}" class="w-full h-full object-contain" />`:'<div class="flex flex-col items-center gap-1 opacity-20"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg><span class="text-xs font-bold">No Image</span></div>'}
                        </div>
                     </div>
                </div>
            </div>
            `:`
            <!-- Minimal Header for Subsequent Pages -->
            <div class="flex justify-between items-center mb-2 pb-2 border-b border-gray-100 shrink-0"> <!-- MODIFIED: mb-1 to mb-2 -->
                <div class="text-xs font-bold text-gray-400">ใบเสร็จรับเงิน (ต่อ)</div>
                <div class="text-xs text-gray-400">อ้างอิง: ${s.id}</div>
            </div>
            `}

            <!-- Table (Paginated) - Display only if there are items -->
            ${Z.items.length>0?`
            <div class="mb-6 mt-0">
                <table class="w-full text-xs">
                    <thead>
                        <tr class="bg-green-50 text-green-800 border-y border-green-100 force-print-bg">
                            <th class="p-1.5 w-10 text-center font-bold first:rounded-l-lg">ลำดับ</th>
                            <th class="p-1.5 text-left font-bold">รายละเอียด</th>
                            <th class="p-1.5 w-16 text-right font-bold">จำนวน</th>
                            <th class="p-1.5 w-24 text-right font-bold">ราคา/หน่วย</th>
                            <th class="p-1.5 w-20 text-right font-bold">ส่วนลด</th>
                            <th class="p-1.5 w-28 text-right font-bold last:rounded-r-lg">จำนวนเงิน</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${ie}
                    </tbody>
                </table>
            </div>
            `:""}

            <!-- Summary & Signature Section (Only on Last Page) -->
            ${Z.isLast?`
            <div class="mt-0 break-inside-avoid"> <!-- MODIFIED: mt-4 to mt-0 because table has mb-6 -->
                
                <!-- [MODIFIED] Section 1: Notes & Subtotals List (Aligned Top) -->
                <div class="flex flex-col sm:flex-row justify-between items-start gap-6 mb-2">
                    <div class="flex-1 text-xs">
                        <strong class="text-gray-700 mr-1">หมายเหตุ:</strong>
                        <span class="text-gray-600 leading-relaxed">${s.note||"-"}</span>
                    </div>
                    <div class="w-full sm:w-[350px] space-y-1.5 text-xs">
                        <div class="flex justify-between text-gray-600"><span>มูลค่าสินค้า (ก่อนภาษี)</span><span>${he.toLocaleString(void 0,{minimumFractionDigits:2})}</span></div>
                        <div class="flex justify-between text-gray-600"><span>ภาษีมูลค่าเพิ่ม 7%</span><span>${Ee.toLocaleString(void 0,{minimumFractionDigits:2})}</span></div>
                        ${ze>0?`<div class="flex justify-between text-gray-600"><span>เงินสนับสนุน (ยกเว้นภาษี)</span><span>${ze.toLocaleString(void 0,{minimumFractionDigits:2})}</span></div>`:""}
                        <div class="flex justify-between text-gray-600 border-b border-gray-200 pb-2"><span>ส่วนลด</span><span>0.00</span></div>
                    </div>
                </div>

                <!-- [MODIFIED] Section 2: Equal Height Cards (Text Amount & Grand Total) -->
                <div class="flex flex-col sm:flex-row justify-between items-stretch gap-6 mb-4">
                    <div class="flex-1 flex flex-col justify-center items-start bg-green-50 p-2 rounded-lg border border-green-200 force-print-bg">
                        <span class="text-green-700 text-[10px] font-bold">จำนวนเงินตัวอักษร</span>
                        <strong class="text-green-800 text-sm font-bold tracking-tight leading-tight mt-0.5">(${M})</strong>
                    </div>
                    <div class="w-full sm:w-[350px] flex flex-col justify-center items-end bg-green-50 p-2 rounded-lg border border-green-200 force-print-bg">
                        <span class="text-green-700 text-[10px] font-bold">จำนวนเงินทั้งสิ้น</span>
                        <strong class="text-green-800 text-xl font-black tracking-tight leading-none mt-0.5">฿${O.toLocaleString(void 0,{minimumFractionDigits:2})}</strong>
                    </div>
                </div>
                
                <div class="flex gap-8 justify-between mt-10"> <!-- [MODIFIED] Increased margin-top (approx 1.5 lines spacing) -->
                    <div class="text-center w-1/2 px-8">
                        <div class="h-8 border-b border-dotted border-gray-800 w-full mb-1"></div>
                        <span class="text-xs font-bold text-black">ผู้รับวางบิล</span>
                        <div class="mt-1 text-xs font-bold text-black">วันที่ ...../...../..........</div> <!-- [MODIFIED] Increased font size and weight -->
                    </div>
                    <div class="text-center w-1/2 px-8">
                        <div class="h-8 border-b border-dotted border-gray-800 w-full mb-1"></div>
                        <span class="text-xs font-bold text-black">ผู้รับเงิน</span>
                        <div class="mt-1 text-xs font-bold text-black">วันที่ ...../...../..........</div> <!-- [MODIFIED] Increased font size and weight -->
                    </div>
                </div>
            </div>`:""}
            
            <!-- Page Number Footer -->
            <div class="absolute bottom-4 right-8 text-[10px] text-gray-400">
                หน้า ${oe+1} / ${Pe}
            </div>
        </div>
        `},bt=Z=>X.map((oe,Pe)=>Mt(oe,Pe,X.length,Z)).join(""),Fs=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>พิมพ์ใบเสร็จ - ${s.id}</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap');
            body { 
                font-family: 'Sarabun', sans-serif; 
                background: #52525b; 
                padding: 20px;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            .receipt-a4-container {
                width: 210mm;
                height: 297mm; /* [MODIFIED] Fixed A4 Height */
                min-height: 297mm;
                margin: 0 auto 20px auto;
                background: white;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                padding: 40px;
                position: relative;
                overflow: hidden; /* Ensure content stays in page */
                box-sizing: border-box;
            }
            .keep-together {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            @media print {
                /* [MODIFIED] Target both html and body to force text color white on browser UI */
                html, body { 
                    width: 100%;
                    height: auto; /* [MODIFIED] Changed from 100% to auto to avoid forcing height issues */
                    background: white; 
                    margin: 0;
                    padding: 0;
                    /* color: white !important;  REMOVED to prevent interfering with content colors */
                }
                .receipt-a4-container {
                    width: 100%;
                    height: 297mm; /* Force A4 height in print */
                    box-shadow: none;
                    margin: 0;
                    padding: 40px !important; /* Keep padding */
                    page-break-after: always;
                    color: initial; /* [MODIFIED] Allow colors to show */
                    visibility: visible;
                    overflow: hidden;
                }
                .receipt-a4-container:last-child {
                    page-break-after: auto;
                }
                
                .page-break-after {
                    page-break-after: always;
                }
                .force-print-bg {
                    -webkit-print-color-adjust: exact;
                    print-color-adjust: exact;
                }
                @page { 
                    size: A4; 
                    margin: 0; /* [MODIFIED] Reset margins to 0 to prevent overflow causing extra blank pages */
                }
                .no-print { display: none !important; }
            }
        </style>
      </head>
      <body>
        <!-- [MODIFIED] Desktop Controls with Toggle -->
        <div class="no-print hidden sm:flex fixed top-4 right-4 z-50 gap-3 items-center">
            <div class="flex bg-gray-800/80 backdrop-blur-md rounded-lg p-1 border border-white/10">
                <button id="desk-btn-original" onclick="setMode('original')" class="px-4 py-2 rounded-md text-sm font-bold bg-white text-gray-900 shadow-sm transition-all">ต้นฉบับ</button>
                <button id="desk-btn-copy" onclick="setMode('copy')" class="px-4 py-2 rounded-md text-sm font-bold text-gray-300 hover:text-white transition-all">สำเนา</button>
            </div>
            <button onclick="window.print()" class="bg-blue-600 text-white px-6 py-2 rounded-lg shadow-lg font-bold hover:bg-blue-700 transition flex items-center gap-2 border border-white/20">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
                พิมพ์
            </button>
            <button onclick="window.close()" class="bg-gray-500 text-white px-6 py-2 rounded-lg shadow-lg font-bold hover:bg-gray-600 transition border border-white/20">
                ปิด
            </button>
        </div>

        <!-- [MODIFIED] Mobile Controls with Toggle & Big Print Button -->
        <div class="no-print flex sm:hidden fixed bottom-8 right-8 z-50 flex-col gap-4 items-end">
            <div class="flex bg-white rounded-full p-1.5 shadow-xl border border-gray-100 mb-2">
                <button id="mob-btn-original" onclick="setMode('original')" class="px-5 py-2.5 rounded-full text-xs font-bold bg-indigo-600 text-white shadow-sm transition-all">ต้นฉบับ</button>
                <button id="mob-btn-copy" onclick="setMode('copy')" class="px-5 py-2.5 rounded-full text-xs font-bold text-gray-500 hover:bg-gray-50 transition-all">สำเนา</button>
            </div>
            <button onclick="window.print()" class="w-[125px] h-[125px] bg-blue-600 text-white rounded-full shadow-2xl flex items-center justify-center border-4 border-white/30 backdrop-blur-md active:scale-95 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
            </button>
        </div>

        <!-- [MODIFIED] Generate Paginated Content -->
        <div id="original-container">
            ${bt("ต้นฉบับ")}
        </div>
        <div id="copy-container" style="display:none;">
            ${bt("สำเนา")}
        </div>
        
        <script>
            function setMode(mode) {
                const orig = document.getElementById('original-container');
                const copy = document.getElementById('copy-container');
                const dOrig = document.getElementById('desk-btn-original');
                const dCopy = document.getElementById('desk-btn-copy');
                const mOrig = document.getElementById('mob-btn-original');
                const mCopy = document.getElementById('mob-btn-copy');

                if (mode === 'original') {
                    orig.style.display = 'block';
                    copy.style.display = 'none';
                    dOrig.className = 'px-4 py-2 rounded-md text-sm font-bold bg-white text-gray-900 shadow-sm transition-all';
                    dCopy.className = 'px-4 py-2 rounded-md text-sm font-bold text-gray-300 hover:text-white transition-all';
                    mOrig.className = 'px-5 py-2.5 rounded-full text-xs font-bold bg-indigo-600 text-white shadow-sm transition-all';
                    mCopy.className = 'px-5 py-2.5 rounded-full text-xs font-bold text-gray-500 hover:bg-gray-50 transition-all';
                } else {
                    orig.style.display = 'none';
                    copy.style.display = 'block';
                    dOrig.className = 'px-4 py-2 rounded-md text-sm font-bold text-gray-300 hover:text-white transition-all';
                    dCopy.className = 'px-4 py-2 rounded-md text-sm font-bold bg-white text-gray-900 shadow-sm transition-all';
                    mOrig.className = 'px-5 py-2.5 rounded-full text-xs font-bold text-gray-500 hover:bg-gray-50 transition-all';
                    mCopy.className = 'px-5 py-2.5 rounded-full text-xs font-bold bg-indigo-600 text-white shadow-sm transition-all';
                }
            }
        <\/script>
      </body>
      </html>
    `,Xe=window.open("","_blank");Xe?(Xe.document.write(Fs),Xe.document.close()):alert("Pop-up ถูกบล็อก กรุณาอนุญาต Pop-up สำหรับเว็บไซต์นี้")};return Lt.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-0 sm:p-4 print:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-slate-900/70 backdrop-blur-sm",onClick:x}),e.jsxs("div",{className:"bg-white w-full max-w-lg sm:rounded-3xl rounded-none h-full sm:h-auto shadow-2xl relative z-10 overflow-hidden flex flex-col max-h-[100dvh] sm:max-h-[90vh] animate-in fade-in zoom-in-95 duration-200 print:shadow-none print:w-full print:max-w-none print:h-auto print:rounded-none",children:[e.jsxs("div",{className:"px-5 py-4 bg-white border-b border-slate-100 flex justify-between items-center print:hidden shrink-0 z-20 sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-50 p-2 rounded-xl text-indigo-600",children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 text-base leading-tight",children:"สรุปรายละเอียดงาน"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"สำหรับลูกค้า (Customer View)"})]})]}),e.jsx("button",{onClick:x,className:"w-8 h-8 flex items-center justify-center bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-600 rounded-full transition-colors",children:e.jsx(ts,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-slate-50/50 p-4 sm:p-6 print:bg-white print:p-0",children:e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100 space-y-6 print:border-none print:shadow-none",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start gap-3 mb-2",children:[e.jsx("h2",{className:"text-xl font-black text-slate-800 leading-tight break-words",children:s.name}),s.id&&e.jsx("span",{className:"shrink-0 bg-indigo-50 text-indigo-600 text-[10px] px-2 py-1 rounded-md font-bold border border-indigo-100",children:s.id})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-emerald-50 text-emerald-600 text-[10px] px-2 py-1 rounded-md font-bold border border-emerald-100",children:[e.jsx(Ft,{className:"w-3 h-3"})," ใบสรุปงาน"]})})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-3.5 h-3.5"})," ข้อมูลทั่วไป"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-400 mb-0.5",children:"วันที่"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:$e(s.rawDateTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-400 mb-0.5",children:"ศิลปิน"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:s.artist})]}),e.jsxs("div",{className:"col-span-2 pt-2 border-t border-slate-200/60",children:[e.jsx("p",{className:"text-[10px] text-slate-400 mb-0.5",children:"ลูกค้า"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:s.customer})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(De,{className:"w-3.5 h-3.5"})," การจัดส่ง & สถานที่"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"shrink-0 mt-0.5 text-indigo-500",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-400 mb-0.5 font-bold",children:"กำหนดส่ง"}),e.jsx("div",{className:"text-sm font-bold text-slate-700",children:Tt(s)})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"shrink-0 mt-0.5 text-rose-500",children:e.jsx(ut,{className:"w-4 h-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"สถานที่"}),s.mapLink&&e.jsxs("a",{href:s.mapLink,target:"_blank",rel:"noreferrer",className:"text-[10px] text-blue-600 font-bold hover:underline flex items-center gap-1",children:["เปิดแผนที่ ",e.jsx(Sl,{className:"w-2.5 h-2.5"})]})]}),e.jsx("p",{className:"text-sm font-bold text-slate-700 leading-snug",children:s.location||"-"})]})]}),(s.recipient||s.recipientPhone)&&e.jsxs("div",{className:"flex gap-3 pt-3 mt-1 border-t border-slate-200/60",children:[e.jsx("div",{className:"shrink-0 mt-0.5 text-emerald-500",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-400 mb-0.5 font-bold",children:"ผู้รับ"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:s.recipient||"-"}),s.recipientPhone&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5 font-medium",children:s.recipientPhone})]})]})]})]}),s.image&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(Ca,{className:"w-3.5 h-3.5"})," รูปภาพอ้างอิง"]}),e.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200 bg-slate-50 relative",children:e.jsx("img",{src:ge(s.image),alt:"Project Ref",className:"w-full h-auto object-contain max-h-60",referrerPolicy:"no-referrer",onError:C=>{C.target.style.display="none",C.target.parentElement.innerHTML='<div class="p-4 text-center text-slate-400 text-xs">ไม่สามารถโหลดรูปภาพได้</div>'}})})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"bg-white rounded-xl border-2 border-dashed border-slate-200 p-4 sm:p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-5 pointer-events-none",children:e.jsx(Cl,{className:"w-24 h-24 -rotate-12"})}),e.jsx("h3",{className:"text-base font-black text-slate-800 text-center uppercase tracking-wide mb-5 relative z-10",children:"สรุปยอดเรียกเก็บเงิน"}),e.jsxs("div",{className:"space-y-5 relative z-10",children:[s.customerSupport&&s.customerSupport.some(C=>parseFloat(C.price)>0)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-indigo-100 pb-1.5 mb-1",children:[e.jsxs("h4",{className:"text-xs font-bold text-indigo-600 flex items-center gap-1.5",children:[e.jsx("div",{className:"p-1 bg-indigo-100 rounded-md",children:e.jsx(_a,{className:"w-3 h-3"})}),"เงินสนับสนุนศิลปิน"]}),e.jsxs("span",{className:"text-xs font-bold text-indigo-700 bg-indigo-50 px-2 py-0.5 rounded-md",children:["฿",D.toLocaleString()]})]}),e.jsx("div",{className:"space-y-1.5",children:s.customerSupport.filter(C=>parseFloat(C.price)>0).map((C,Q)=>e.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-600 px-1",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-indigo-400 rounded-full shrink-0"}),C.denomination>=20?"แบงค์":"เหรียญ"," ",C.denomination," x ",C.quantity]}),e.jsx("span",{className:"font-medium text-slate-900 tabular-nums",children:parseFloat(C.price).toLocaleString()})]},Q))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-emerald-100 pb-1.5 mb-1",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-600 flex items-center gap-1.5",children:[e.jsx("div",{className:"p-1 bg-emerald-100 rounded-md",children:e.jsx(Ft,{className:"w-3 h-3"})}),"รายการเสนอราคา"]}),e.jsxs("span",{className:"text-xs font-bold text-emerald-700 bg-emerald-50 px-2 py-0.5 rounded-md",children:["฿",m.toLocaleString()]})]}),e.jsx("div",{className:"space-y-2",children:_?s.quotationItems.map((C,Q)=>e.jsxs("div",{className:"flex justify-between items-start text-xs px-1",children:[e.jsx("div",{className:"flex flex-col pr-2",children:e.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[C.category&&e.jsx("span",{className:"font-bold text-slate-700 whitespace-nowrap",children:C.category}),e.jsx("span",{className:"text-slate-500 font-medium break-all",children:C.detail})]})}),e.jsx("span",{className:"font-bold text-slate-900 tabular-nums whitespace-nowrap pt-0.5",children:parseFloat(C.price).toLocaleString()})]},Q)):e.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-600 px-1",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-emerald-400 rounded-full"}),"ค่าบริการรวม"]}),e.jsx("span",{className:"font-bold text-slate-900 tabular-nums",children:m.toLocaleString()})]})})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200 mt-2",children:e.jsxs("div",{className:"flex justify-between items-end bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"ยอดเรียกเก็บสุทธิ"}),e.jsxs("span",{className:"text-2xl font-black text-indigo-600 leading-none tabular-nums",children:["฿",w.toLocaleString()]})]})})]})]})})]})}),e.jsxs("div",{className:"p-4 bg-white border-t border-slate-100 flex flex-col gap-3 print:hidden shrink-0 safe-area-bottom-modal",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:R,className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${p?"bg-blue-50 text-blue-600 border border-blue-100":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[p?e.jsx(ft,{className:"w-4 h-4"}):e.jsx(Ps,{className:"w-4 h-4"}),p?"คัดลอกลิงก์":"ลิงก์ติดตามงาน"]}),e.jsxs("button",{onClick:te,className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${P?"bg-purple-50 text-purple-600 border border-purple-100":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[P?e.jsx(ft,{className:"w-4 h-4"}):e.jsx(Ps,{className:"w-4 h-4"}),P?"คัดลอกลิงก์":"ลิงก์เสนอราคา"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:v,className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${N?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[N?e.jsx(ft,{className:"w-4 h-4"}):e.jsx($r,{className:"w-4 h-4"}),"คัดลอกข้อความ"]}),e.jsxs("button",{onClick:W,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ir,{className:"w-4 h-4"}),"พิมพ์ / บันทึก PDF"]})]})]})]})]}),document.body)},sn=({message:s,type:x,onClose:h})=>{n.useEffect(()=>{const S=setTimeout(()=>{h()},3e3);return()=>clearTimeout(S)},[h]);const N=x==="success";return Lt.createPortal(e.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-top-2 fade-in duration-300 pointer-events-none w-full flex justify-center px-4",children:e.jsxs("div",{className:`pointer-events-auto flex items-center gap-3 px-5 py-3.5 rounded-2xl shadow-[0_8px_30px_rgb(0,0,0,0.12)] border min-w-[280px] max-w-md w-auto ${N?"bg-white border-emerald-100 text-slate-800":"bg-white border-rose-100 text-slate-800"}`,children:[e.jsx("div",{className:`p-2 rounded-full shrink-0 ${N?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:N?e.jsx(Je,{className:"w-5 h-5"}):e.jsx(_t,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("span",{className:`font-bold text-sm whitespace-nowrap ${N?"text-emerald-700":"text-rose-700"}`,children:N?"สำเร็จ":"แจ้งเตือน"}),e.jsx("span",{className:"text-sm font-medium text-slate-600 whitespace-nowrap overflow-hidden text-ellipsis",children:s})]}),e.jsx("button",{onClick:h,className:"ml-2 p-1 text-slate-400 hover:text-slate-600 hover:bg-slate-50 rounded-lg transition shrink-0",children:e.jsx(ts,{className:"w-4 h-4"})})]})}),document.body)},an=()=>Lt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[100] bg-white/60 backdrop-blur-[2px] flex items-center justify-center animate-in fade-in duration-200",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 bg-white p-8 rounded-[2rem] shadow-2xl border border-slate-100",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center shadow-inner",children:e.jsx(_e,{className:"w-4 h-4 text-indigo-600 animate-spin"})})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-800 font-bold text-lg",children:"กำลังประมวลผล"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"กรุณารอสักครู่..."})]})]})}),document.body),ln=({onLogin:s,isLoading:x,loginError:h,shopInfo:N})=>{const[S,p]=n.useState(""),[I,P]=n.useState(""),[c,D]=n.useState(!1),[_,m]=n.useState(!1),w=v=>{v.preventDefault(),s(S,I,c)};return e.jsx("div",{className:"fixed inset-0 z-[200] bg-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 animate-in fade-in zoom-in-95 duration-500",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsxs("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shadow-lg shadow-indigo-200 mb-4 rotate-3 hover:rotate-6 transition-transform overflow-hidden relative ${N?.logo?"bg-transparent":"bg-indigo-600"}`,children:[N?.logo?e.jsx("img",{src:ge(N.logo),alt:"App Logo",className:"w-full h-full object-contain",referrerPolicy:"no-referrer",onError:v=>{v.target.style.display="none",v.target.nextSibling&&(v.target.nextSibling.style.display="flex"),v.target.parentElement.classList.add("bg-indigo-600")}}):null,e.jsx("div",{className:`w-full h-full flex items-center justify-center ${N?.logo?"hidden":"flex"}`,children:e.jsx(Ds,{className:"w-10 h-10 text-white"})})]}),e.jsx("h1",{className:"text-3xl font-black bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent tracking-tight text-center leading-tight",children:N?.shopName||"ProjectPlan"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2 font-medium",children:"เข้าสู่ระบบเพื่อจัดการแผนงาน"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ml-1",children:"ชื่อผู้ใช้งาน"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:"absolute left-4 top-3.5 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",value:S,disabled:x,onChange:v=>p(v.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium disabled:opacity-50",placeholder:"Username",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ml-1",children:"รหัสผ่าน"}),e.jsxs("div",{className:"relative",children:[e.jsx(zr,{className:"absolute left-4 top-3.5 w-5 h-5 text-slate-400"}),e.jsx("input",{type:_?"text":"password",value:I,disabled:x,onChange:v=>P(v.target.value),className:"w-full pl-12 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium disabled:opacity-50",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!_),className:"absolute right-4 top-3.5 text-slate-400 hover:text-slate-600 transition-colors",children:_?e.jsx(Ur,{className:"w-5 h-5"}):e.jsx(Rr,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-1",children:[e.jsx("input",{type:"checkbox",id:"remember",checked:c,onChange:v=>D(v.target.checked),className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),e.jsx("label",{htmlFor:"remember",className:"text-sm font-bold text-slate-600 cursor-pointer select-none",children:"จดจำการเข้าสู่ระบบ"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"submit",disabled:x,className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:x?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5 animate-spin"}),"กำลังตรวจสอบ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-5 h-5"}),"เข้าสู่ระบบ"]})}),h&&e.jsxs("div",{className:"bg-rose-50 text-rose-600 text-xs font-bold p-3 rounded-xl border border-rose-100 flex items-center gap-2 animate-in slide-in-from-top-1 fade-in",children:[e.jsx(_s,{className:"w-4 h-4 shrink-0"}),h]})]})]})]})})},Pt=({value:s,type:x,icon:h})=>{if(!s)return e.jsxs("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-400 italic text-sm flex items-center gap-2",children:[h&&e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{children:"-"})]});let N=e.jsx("span",{className:"text-slate-700 font-medium truncate block",children:s}),S="div",p={className:"w-full overflow-hidden"};if(x==="tel")S="a",p={href:`tel:${s}`,className:"block w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl hover:bg-indigo-50 hover:border-indigo-200 transition-colors cursor-pointer group overflow-hidden"},N=e.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold group-hover:text-indigo-800 overflow-hidden",children:[e.jsx(it,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"truncate",children:s})]});else if(x==="email")S="a",p={href:`mailto:${s}`,className:"block w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl hover:bg-indigo-50 hover:border-indigo-200 transition-colors cursor-pointer group overflow-hidden"},N=e.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold group-hover:text-indigo-800 overflow-hidden",children:[e.jsx($s,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"truncate",children:s})]});else if(x==="url")S="a",p={href:s,target:"_blank",rel:"noreferrer",className:"block w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group overflow-hidden"},N=e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold group-hover:text-blue-700 truncate",children:[e.jsx(Sl,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"truncate",children:s})]});else return e.jsxs("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-700 font-medium flex items-center gap-2 overflow-hidden",children:[h&&e.jsx(h,{className:"w-4 h-4 text-slate-400 shrink-0"}),e.jsx("span",{className:"truncate",children:s})]});return e.jsx(S,{...p,children:N})},Qe=({value:s,onChange:x,placeholder:h,hasTime:N=!0,minDate:S,className:p,compact:I=!1,disabled:P=!1,pickerType:c="date"})=>{const[D,_]=n.useState(!1),[m,w]=n.useState(new Date),[v,R]=n.useState(c==="year"?"years":c==="month"?"months":"days"),[te,W]=n.useState({top:0,left:0}),C=n.useRef(null),Q=n.useRef(null),xe=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],V=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."];n.useEffect(()=>{if(s){const $=new Date(s);isNaN($.getTime())||w($)}},[s,D]),n.useEffect(()=>{D&&R(c==="year"?"years":c==="month"?"months":"days")},[D,c]);const le=()=>{if(!P){if(D){_(!1);return}if(C.current){const $=C.current.getBoundingClientRect(),M=window.innerWidth,E=window.innerHeight,se=320,X=380;let ue=$.bottom+4,pe=$.left;ue+X>E&&(ue=$.top-X-4),pe+se>M&&(pe=$.right-se,pe<10&&(pe=10)),W({top:ue,left:pe}),_(!0)}}};n.useEffect(()=>{const $=E=>{C.current&&!C.current.contains(E.target)&&Q.current&&!Q.current.contains(E.target)&&_(!1)},M=()=>{D&&_(!1)};return D&&(document.addEventListener("mousedown",$),window.addEventListener("scroll",M,!0)),()=>{document.removeEventListener("mousedown",$),window.removeEventListener("scroll",M,!0)}},[D]);const z=$=>{const M=new Date(m.getFullYear(),m.getMonth(),$);if(c==="week"){const X=M.getDay(),ue=M.getDate()-X,pe=new Date(M.setDate(ue)),dt=pe.getTimezoneOffset()*6e4,ct=new Date(pe.getTime()-dt).toISOString().slice(0,10);x({target:{value:ct}}),_(!1);return}if(s){const X=new Date(s);isNaN(X.getTime())||(M.setHours(X.getHours()),M.setMinutes(X.getMinutes()))}else{const X=new Date;M.setHours(X.getHours()),M.setMinutes(X.getMinutes())}const E=M.getTimezoneOffset()*6e4,se=new Date(M.getTime()-E).toISOString().slice(0,16);x({target:{value:se}}),N||_(!1)},we=($,M)=>{let E=s?new Date(s):new Date;isNaN(E.getTime())&&(E=new Date);{const[ue,pe]=M.split(":");E.setHours(parseInt(ue)||0),E.setMinutes(parseInt(pe)||0)}const se=E.getTimezoneOffset()*6e4,X=new Date(E.getTime()-se).toISOString().slice(0,16);x({target:{value:X}})},Ie=()=>{x({target:{value:""}}),_(!1)},A=($,M)=>new Date($,M+1,0).getDate(),K=($,M)=>new Date($,M,1).getDay(),me=A(m.getFullYear(),m.getMonth()),ne=K(m.getFullYear(),m.getMonth()),ve=s?new Date(s):null,u=$=>{if(!ve)return!1;const M=new Date(m.getFullYear(),m.getMonth(),$);if(c==="week"){const E=new Date(ve);E.setHours(0,0,0,0);const se=new Date(E);return se.setDate(E.getDate()+6),se.setHours(23,59,59,999),M>=E&&M<=se}return ve.getDate()===$&&ve.getMonth()===m.getMonth()&&ve.getFullYear()===m.getFullYear()},y=$=>{w(new Date(m.getFullYear(),m.getMonth()+$,1))},g=$=>{w(new Date(m.getFullYear()+$,m.getMonth(),1))},L=$=>{const M=new Date($,m.getMonth(),1);w(M),c==="year"?(x({target:{value:`${$}`}}),_(!1)):R("months")},b=$=>{const M=new Date(m.getFullYear(),$,1);if(w(M),c==="month"){const E=String($+1).padStart(2,"0");x({target:{value:`${m.getFullYear()}-${E}`}}),_(!1)}else R("days")},O=()=>{if(!s)return h||"เลือกวันเวลา...";if(c==="week"){const $=new Date(s);if(isNaN($.getTime()))return s;const M=new Date($);M.setDate($.getDate()+6);const E=$.getDate(),se=V[$.getMonth()],X=M.getDate(),ue=V[M.getMonth()],pe=$.getFullYear()+543;return`${E} ${se} - ${X} ${ue} ${pe}`}if(c==="month"){const $=s.split("-");if($.length>=2){const M=parseInt($[0])+543,E=parseInt($[1])-1;return`${xe[E]} ${M}`}return s}return c==="year"?parseInt(s)+543:$e(s)},T=()=>{if(v==="years"){const $=m.getFullYear(),M=$-7,E=Array.from({length:16},(se,X)=>M+X);return e.jsx("div",{className:"grid grid-cols-4 gap-2 p-2",children:E.map(se=>{const X=c==="year"&&s&&parseInt(s)===se;return e.jsx("button",{onClick:()=>L(se),className:`p-2 rounded-xl text-sm font-bold transition-all ${se===$||X?"bg-indigo-600 text-white shadow-md":"hover:bg-indigo-50 text-slate-700"}`,children:se+543},se)})})}return v==="months"?e.jsx("div",{className:"grid grid-cols-3 gap-3 p-2",children:V.map(($,M)=>{const E=c==="month"&&s&&s===`${m.getFullYear()}-${String(M+1).padStart(2,"0")}`;return e.jsx("button",{onClick:()=>b(M),className:`p-3 rounded-xl text-sm font-bold transition-all ${M===m.getMonth()||E?"bg-indigo-600 text-white shadow-md":"hover:bg-indigo-50 text-slate-700"}`,children:$},M)})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 mb-2 text-center",children:["อา","จ","อ","พ","พฤ","ศ","ส"].map($=>e.jsx("span",{className:"text-xs font-bold text-slate-400",children:$},$))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[Array.from({length:ne}).map(($,M)=>e.jsx("div",{},`empty-${M}`)),Array.from({length:me}).map(($,M)=>{const E=M+1,se=u(E),X=new Date().getDate()===E&&new Date().getMonth()===new Date().getMonth()&&new Date().getFullYear()===new Date().getFullYear();let ue="";return c==="week"&&se&&(ue="bg-indigo-100 text-indigo-700 rounded-none first:rounded-l-lg last:rounded-r-lg",ve&&E===ve.getDate()&&(ue+=" font-bold ring-1 ring-indigo-300")),e.jsx("button",{onClick:()=>z(E),className:`h-8 w-full flex items-center justify-center text-sm font-medium transition-all
                        ${c!=="week"&&se?"bg-indigo-600 text-white shadow-md shadow-indigo-200 rounded-full":""}
                        ${c==="week"&&se?ue:"hover:bg-indigo-50 text-slate-700 rounded-full"}
                        ${!se&&X?"border border-indigo-200 bg-indigo-50/50 rounded-full":""}
                      `,children:E},E)})]})]})},he="w-full border rounded-xl flex items-center justify-between cursor-pointer transition-all",Ee=I?"px-2.5 py-1.5":"px-4 py-3",ze=P?"bg-slate-100 border-slate-200 cursor-not-allowed opacity-70 pointer-events-none":`bg-white border-slate-200 hover:border-indigo-300 ${D?"ring-2 ring-indigo-500/20 border-indigo-500":""}`;return e.jsxs("div",{className:"relative w-full",ref:C,children:[e.jsxs("div",{onClick:le,className:`${he} ${Ee} ${ze} ${p||""}`,children:[e.jsx("span",{className:`font-medium truncate ${s?"text-slate-700":"text-slate-400"} ${I?"text-xs":"text-sm"}`,children:O()}),e.jsx(Fa,{className:`text-indigo-500 shrink-0 ${I?"w-3.5 h-3.5":"w-4 h-4"} ${P?"text-slate-400":""}`})]}),D&&Lt.createPortal(e.jsxs("div",{ref:Q,style:{position:"fixed",top:te.top,left:te.left,minWidth:"300px",maxWidth:"320px",zIndex:99999},className:"bg-white rounded-2xl shadow-2xl border border-slate-100 p-4 animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pl-1 pr-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[v!=="days"&&c!=="month"&&c!=="year"&&e.jsx("button",{onClick:()=>R("days"),className:"p-1 hover:bg-slate-100 rounded-lg mr-1",children:e.jsx(_l,{className:"w-4 h-4 text-slate-500"})}),e.jsxs("button",{onClick:()=>{c!=="year"&&(c==="month"&&v==="years"||R(v==="years"?"days":"years"))},disabled:c==="year",className:`font-black text-slate-800 px-2 py-1 rounded-lg transition-colors text-base ${c==="year"?"cursor-default":"hover:bg-slate-100"}`,children:[v==="days"&&`${xe[m.getMonth()]} ${m.getFullYear()+543}`,v==="months"&&`${m.getFullYear()+543}`,v==="years"&&`${m.getFullYear()-7+543} - ${m.getFullYear()+8+543}`]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{v==="days"?y(-1):g(v==="years"?-16:-1)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-500",children:e.jsx(ul,{className:"w-5 h-5 -rotate-90"})}),e.jsx("button",{onClick:()=>{v==="days"?y(1):g(v==="years"?16:1)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-500",children:e.jsx(ul,{className:"w-5 h-5 rotate-90"})})]})]}),T(),e.jsxs("div",{className:"border-t border-slate-100 pt-3 mt-2 flex flex-col gap-3",children:[N&&v==="days"&&c==="date"&&e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 ml-1 uppercase tracking-wide",children:"เวลา (24 ชม.)"}),e.jsxs("div",{className:"flex items-center bg-slate-50 rounded-xl px-3 py-2 border border-slate-200 hover:border-indigo-300 transition-all group focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-500/20 focus-within:bg-white",children:[e.jsx(Ge,{className:"w-4 h-4 text-slate-400 mr-2 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"time",className:"bg-transparent w-full font-bold text-slate-700 outline-none text-base font-mono placeholder:text-slate-300",value:s?new Date(s).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"00:00",onChange:$=>we("timeString",$.target.value)})]})]}),e.jsxs("div",{className:"flex gap-2 w-full mt-1",children:[e.jsx("button",{onClick:Ie,className:"flex-1 text-xs font-bold text-slate-500 hover:bg-slate-100 hover:text-rose-500 px-3 py-2 rounded-lg transition-colors",children:"ล้างค่า"}),e.jsx("button",{onClick:()=>_(!1),className:"flex-1 text-xs font-bold bg-indigo-600 text-white hover:bg-indigo-700 px-3 py-2 rounded-lg transition-colors shadow-sm shadow-indigo-200",children:"เสร็จสิ้น"})]})]})]}),document.body)]})},jl=({title:s,items:x,onAdd:h,onDelete:N,placeholder:S,icon:p,onSave:I})=>{const[P,c]=n.useState(""),D=()=>{if(P.trim()){const m=[...x,P];h(P),I(m),c("")}},_=m=>{const w=x.filter((v,R)=>R!==m);N(m),I(w)};return e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-slate-800 font-bold border-b border-slate-100 pb-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:e.jsx(p,{className:"w-5 h-5"})}),s]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:P,onChange:m=>c(m.target.value),placeholder:S,className:"flex-1 px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all",onKeyDown:m=>{m.key==="Enter"&&D()}}),e.jsx("button",{onClick:D,className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition",children:e.jsx(Ve,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar max-h-[200px] space-y-2",children:[x.map((m,w)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-xl group hover:bg-slate-100 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:typeof m=="string"?m:m.label}),e.jsx("button",{onClick:()=>_(w),className:"text-slate-300 hover:text-rose-500 transition-colors p-1",children:e.jsx($a,{className:"w-4 h-4"})})]},w)),x.length===0&&e.jsx("p",{className:"text-center text-slate-400 text-xs py-4",children:"ไม่มีรายการ"})]})]})},wl=({title:s,items:x,onUpdate:h,placeholder:N,icon:S,onSave:p})=>{const[I,P]=n.useState(""),[c,D]=n.useState(gt[0].value),[_,m]=n.useState("pending"),[w,v]=n.useState(!1),[R,te]=n.useState(null),[W,C]=n.useState(null),Q=()=>{if(!I.trim())return;let A;if(w&&R!==null)A=[...x],A[R]={...A[R],label:I,color:c,type:_},v(!1),te(null);else{const K={value:`custom-${Date.now()}`,label:I,color:c,type:_};A=[...x,K]}h(A),p(A),P(""),D(gt[0].value),m("pending")},xe=A=>{const K=x[A];P(K.label),D(K.color),m(K.type||"pending"),v(!0),te(A)},V=()=>{v(!1),te(null),P(""),D(gt[0].value),m("pending")},le=A=>{const K=x.filter((me,ne)=>ne!==A);h(K),p(K),w&&R===A&&V()},z=(A,K)=>{C(K),A.dataTransfer.effectAllowed="move"},we=(A,K)=>{if(A.preventDefault(),W===null||W===K)return;const me=[...x],ne=me[W];me.splice(W,1),me.splice(K,0,ne),C(K),h(me)},Ie=()=>{W!==null&&p(x),C(null)};return e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-bold",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:e.jsx(S,{className:"w-5 h-5"})}),s]}),w&&e.jsx("span",{className:"text-xs font-bold text-amber-500 bg-amber-50 px-2 py-1 rounded-lg animate-pulse",children:"กำลังแก้ไข"})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-6 p-4 bg-slate-50/80 rounded-2xl border border-slate-100",children:[e.jsx("input",{type:"text",value:I,onChange:A=>P(A.target.value),placeholder:N,className:"w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all",onKeyDown:A=>{A.key==="Enter"&&Q()}}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1 min-w-[140px]",children:[e.jsx("select",{value:_,onChange:A=>m(A.target.value),className:"w-full h-10 pl-3 pr-8 bg-white border border-slate-200 rounded-xl text-xs font-bold appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:es.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx(fl,{className:"w-3.5 h-3.5"})})]}),w?e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx("button",{onClick:Q,className:"h-10 px-3 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 transition shadow-sm flex items-center justify-center",title:"บันทึก",children:e.jsx(ft,{className:"w-5 h-5"})}),e.jsx("button",{onClick:V,className:"h-10 px-3 bg-slate-200 text-slate-500 rounded-xl hover:bg-slate-300 transition flex items-center justify-center",title:"ยกเลิก",children:e.jsx(ts,{className:"w-5 h-5"})})]}):e.jsxs("button",{onClick:Q,className:"h-10 px-4 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition shadow-indigo-200 shadow-sm font-bold flex items-center justify-center shrink-0",title:"เพิ่ม",children:[e.jsx(Ve,{className:"w-5 h-5 mr-1"})," เพิ่ม"]})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1 pt-2 border-t border-slate-100",children:[e.jsx(Pl,{className:"w-4 h-4 text-slate-400 shrink-0 mr-1"}),gt.map(A=>e.jsx("button",{onClick:()=>D(A.value),className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center transition-all ${A.dot} ${c===A.value?"ring-2 ring-offset-2 ring-slate-400 scale-110":"hover:scale-110 opacity-70 hover:opacity-100"}`,title:A.name,children:c===A.value&&e.jsx(ft,{className:"w-3 h-3 text-white stroke-[3]"})},A.name))]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar max-h-[300px] space-y-2 pr-1",children:[x.map((A,K)=>{const me=es.find(ne=>ne.value===A.type);return e.jsxs("div",{draggable:!0,onDragStart:ne=>z(ne,K),onDragOver:ne=>we(ne,K),onDragEnd:Ie,className:`flex justify-between items-center p-3 bg-white border border-slate-100 rounded-xl group hover:border-indigo-100 hover:shadow-sm transition-all ${w&&R===K?"ring-2 ring-amber-400 border-transparent bg-amber-50":""} ${W===K?"opacity-50 scale-[0.98]":""}`,children:[e.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-slate-300 hover:text-slate-500 p-1",children:e.jsx(Vr,{className:"w-4 h-4"})}),e.jsx("div",{className:`w-3 h-3 rounded-full shrink-0 ${gt.find(ne=>ne.value===A.color)?.dot||"bg-slate-300"}`}),e.jsx("span",{className:`text-sm font-medium truncate ${w&&R===K?"text-amber-700":"text-slate-700"}`,children:A.label})]}),e.jsx("div",{className:"pl-10",children:e.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-md font-bold inline-flex items-center ${me?me.color:"text-gray-500 bg-gray-100"}`,children:[e.jsx(fl,{className:"w-3 h-3 mr-1"}),me?me.label:"ไม่ระบุ"]})})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity self-start",children:[e.jsx("button",{onClick:()=>xe(K),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition",title:"แก้ไข",children:e.jsx(Ss,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>le(K),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition",title:"ลบ",children:e.jsx(Me,{className:"w-3.5 h-3.5"})})]})]},A.value)}),x.length===0&&e.jsx("p",{className:"text-center text-slate-400 text-xs py-4",children:"ไม่มีรายการ"})]})]})},vl=({mode:s,setMode:x,date:h,setDate:N,range:S,setRange:p})=>e.jsxs("div",{className:"flex bg-white border border-slate-200 rounded-2xl overflow-hidden h-full shadow-sm hover:border-indigo-300 transition-colors w-full md:w-auto",children:[e.jsxs("div",{className:"relative border-r border-slate-100 bg-slate-50 w-[110px] shrink-0",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:e.jsx(Fa,{className:"w-4 h-4"})}),e.jsxs("select",{value:s,onChange:I=>{const P=I.target.value;x(P);const c=new Date,D=c.getFullYear(),_=String(c.getMonth()+1).padStart(2,"0"),m=String(c.getDate()).padStart(2,"0");N(P==="date"?`${D}-${_}-${m}`:P==="month"?`${D}-${_}`:P==="year"?`${D}`:P==="week"?`${D}-${_}-${m}`:""),p({start:"",end:""})},className:"w-full h-full py-3.5 pl-9 pr-2 bg-transparent outline-none text-slate-700 text-xs font-bold appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"ทั้งหมด"}),e.jsx("option",{value:"date",children:"วันที่"}),e.jsx("option",{value:"week",children:"รายสัปดาห์"}),e.jsx("option",{value:"month",children:"เดือน"}),e.jsx("option",{value:"year",children:"ปี"}),e.jsx("option",{value:"range",children:"ช่วงเวลา"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[140px] relative bg-white",children:[s==="all"&&e.jsx("div",{className:"w-full h-full flex items-center px-4 text-slate-400 text-sm italic whitespace-nowrap",children:"แสดงข้อมูลทั้งหมด"}),s==="date"&&e.jsx(Qe,{value:h,onChange:I=>N(I.target.value),hasTime:!1,placeholder:"เลือกวันที่...",pickerType:"date"}),s==="week"&&e.jsx(Qe,{value:h,onChange:I=>N(I.target.value),hasTime:!1,placeholder:"เลือกสัปดาห์...",pickerType:"week"}),s==="month"&&e.jsx(Qe,{value:h,onChange:I=>N(I.target.value),hasTime:!1,placeholder:"เลือกเดือน...",pickerType:"month"}),s==="year"&&e.jsx(Qe,{value:h,onChange:I=>N(I.target.value),hasTime:!1,placeholder:"เลือกปี...",pickerType:"year"}),s==="range"&&e.jsxs("div",{className:"flex items-center h-full px-2 gap-1 w-full overflow-hidden",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Qe,{value:S.start,onChange:I=>p({...S,start:I.target.value}),hasTime:!1,placeholder:"เริ่ม",compact:!0,className:"border-slate-200 h-9"})}),e.jsx("span",{className:"text-slate-300 shrink-0",children:"-"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Qe,{value:S.end,onChange:I=>p({...S,end:I.target.value}),hasTime:!1,placeholder:"สิ้นสุด",compact:!0,className:"border-slate-200 h-9"})})]})]})]}),ot=({label:s,sortKey:x,sortConfig:h,handleSort:N,alignRight:S=!1,className:p=""})=>e.jsx("th",{className:`px-4 py-4 font-medium whitespace-nowrap cursor-pointer hover:bg-slate-50 transition-colors group select-none ${S?"text-right":"text-left"} ${p}`,onClick:()=>N(x),children:e.jsxs("div",{className:`flex items-center gap-1 ${S?"justify-end":""}`,children:[s,e.jsx("span",{className:"text-slate-300 group-hover:text-indigo-500 transition-colors",children:h.key===x?h.direction==="asc"?e.jsx(_l,{className:"w-3 h-3"}):e.jsx(Jr,{className:"w-3 h-3"}):e.jsx(Gr,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})})]})}),rn=()=>{const[s,x]=n.useState(!1),[h,N]=n.useState(()=>localStorage.getItem("nexus_sidebar_collapsed")==="true"),[S,p]=n.useState(!1),[I,P]=n.useState(()=>!!localStorage.getItem("nexus_shop_info")),[c,D]=n.useState(()=>{try{const t=localStorage.getItem("nexus_shop_info");return t?JSON.parse(t):{shopName:"",phone:"",email:"",address:"",line:"",facebook:"",instagram:"",tiktok:"",twitter:"",wechat:"",telegram:"",logo:"",themeColor:"indigo",themeMode:"gradient",customColorValue:"#000000"}}catch{return{shopName:"",phone:"",email:"",address:"",line:"",facebook:"",instagram:"",tiktok:"",twitter:"",wechat:"",telegram:"",logo:"",themeColor:"indigo",themeMode:"gradient",customColorValue:"#000000"}}}),[_,m]=n.useState(()=>typeof window<"u"?new URLSearchParams(window.location.search).get("tracking"):null),[w,v]=n.useState(()=>typeof window<"u"?new URLSearchParams(window.location.search).get("quotation"):null),[R,te]=n.useState(()=>{const t=new URLSearchParams(window.location.search);return!(t.has("tracking")||t.has("quotation"))}),[W,C]=n.useState("Overview"),[Q,xe]=n.useState({show:!1,message:"",type:"success"}),[V,le]=n.useState(!1),[z,we]=n.useState(20),[Ie,A]=n.useState(!1),[K,me]=n.useState(!1),[ne,ve]=n.useState(!1),[u,y]=n.useState(()=>{const t=[{username:"admin",password:"password1234",name:"Admin User",role:"System Administrator",email:"admin@nexusplan.com",phone:"-"},{username:"john",password:"password1234",name:"John Smith",role:"Project Manager",email:"john.smith@nexusplan.com",phone:"081-234-5678"}];try{const a=localStorage.getItem("nexus_authorized_users");return a?JSON.parse(a):t}catch{return t}}),[g,L]=n.useState(""),[b,O]=n.useState(null),[T,he]=n.useState({username:"",password:"",name:"",role:"",email:"",phone:""}),[Ee,ze]=n.useState(!1),[$,M]=n.useState(""),[E,se]=n.useState(""),[X,ue]=n.useState(""),[pe,dt]=n.useState(""),[ct,Ne]=n.useState(""),[Ae,Mt]=n.useState(""),[bt,Fs]=n.useState(ke),Xe=(t,a)=>{try{const l=localStorage.getItem(`nexus_${t}`);return l?JSON.parse(l):a}catch{return a}},[Z,oe]=n.useState(()=>Xe("project_categories",[])),[Pe,Ze]=n.useState(()=>Xe("expense_categories",[])),[ie,Ue]=n.useState(()=>Xe("deal_statuses",[])),[ae,We]=n.useState(()=>Xe("transport_statuses",[])),[J,fe]=n.useState(!1),[be,xt]=n.useState(!1),[Ts,La]=n.useState(!1),[Ls,Ma]=n.useState(!1),[Ea,Aa]=n.useState(!1),[B,Oa]=n.useState(!1),[Ms,Ol]=n.useState(!1),[za,ss]=n.useState(null),[jt,Ua]=n.useState(null),[wt,Es]=n.useState({show:!1,id:null,fromModal:!1}),[Ra,qa]=n.useState(!1),[zl,Ha]=n.useState(!1),[Wa,Ya]=n.useState(!1),[Ul,Ba]=n.useState(!1),[Va,Ja]=n.useState(!1),[Ga,As]=n.useState(null),[re,Rl]=n.useState({key:"id",direction:"desc"}),[Et,Os]=n.useState(""),[Ye,zs]=n.useState("all"),[Fe,Us]=n.useState(""),[et,Rs]=n.useState({start:"",end:""}),[vt,qs]=n.useState("all"),[Nt,tt]=n.useState("all"),[mt,st]=n.useState("all"),[ql,Hl]=n.useState([]),[as,Qa]=n.useState([]),[Ka,Wl]=n.useState([]),[ls,Xa]=n.useState(""),[Hs,Ws]=n.useState(""),[rs,Ys]=n.useState(""),[Bs,Vs]=n.useState(""),[yt,Js]=n.useState(""),[ns,At]=n.useState(""),[os,Ot]=n.useState(""),[zt,Ut]=n.useState(""),[Rt,qt]=n.useState(""),[Ht,Wt]=n.useState(""),[is,Yt]=n.useState(""),[Za,Gs]=n.useState(""),[Bt,Qs]=n.useState(""),[Be,ds]=n.useState(""),[Ks,Xs]=n.useState(""),[cs,xs]=n.useState(""),[Zs,ea]=n.useState(""),[ms,ta]=n.useState(""),[at,hs]=n.useState(null),[el,sa]=n.useState(""),[Yl,aa]=n.useState(0),[nn,Bl]=n.useState(0),[ps,la]=n.useState(""),[us,ra]=n.useState(""),[ht,kt]=n.useState([{category:"",detail:"",price:0}]),[Se,St]=n.useState([{category:"",detail:"",price:0}]),[Re,Ct]=n.useState([{denomination:20,quantity:0,price:0}]),[de,tl]=n.useState([]),[Dt,gs]=n.useState(!1),na=n.useRef(null),sl=n.useRef({}),oa=n.useRef(null);n.useEffect(()=>{localStorage.setItem("nexus_sidebar_collapsed",String(h))},[h]),n.useEffect(()=>{if(_){document.title="กำลังตรวจสอบสถานะ...";return}if(w){document.title="กำลังโหลดใบเสนอราคา...";return}const t=c?.shopName||"NexusPlan",a=nt.find(l=>l.name===W);a?document.title=`${a.label} - ${t}`:document.title=`${t} Dashboard`},[W,_,w,c]),n.useEffect(()=>{me(!1);const t=setTimeout(()=>me(!0),300);return()=>clearTimeout(t)},[W]),n.useEffect(()=>{we(20),A(!1)},[W,Et,Ye,Fe,et,vt,Nt,mt,re]),n.useEffect(()=>{const t=localStorage.getItem("nexus_auth"),a=localStorage.getItem("nexus_profile");t&&a&&(ve(!0),O(JSON.parse(a)))},[]),n.useLayoutEffect(()=>{let t;const a=c.themeMode==="gradient";if(c.themeColor==="custom"&&c.customColorValue){const f=c.customColorValue;t={main:f,hover:ka(f,-.1),light:ka(f,.93),textLight:f,gradientFrom:f,gradientTo:ka(f,-.25),shadow:`rgba(${Qr(f)}, 0.4)`}}else t=Sa[c.themeColor]||Sa.indigo;const l="nexus-theme-styles";let i=document.getElementById(l);i||(i=document.createElement("style"),i.id=l,document.head.appendChild(i));const r=`
          :root {
              --theme-main: ${t.main};
              --theme-hover: ${t.hover};
              --theme-light: ${t.light};
              --theme-text-light: ${t.textLight};
              --theme-shadow: ${t.shadow};
          }
          
          /* Backgrounds */
          .bg-indigo-600 { background-color: var(--theme-main) !important; }
          .hover\\:bg-indigo-700:hover { background-color: var(--theme-hover) !important; }
          .bg-indigo-50 { background-color: var(--theme-light) !important; }
          .bg-indigo-100 { background-color: var(--theme-light) !important; filter: brightness(0.95); } /* Adjusted logic for 100 */
          
          /* Texts */
          .text-indigo-600 { color: var(--theme-main) !important; }
          .text-indigo-700 { color: var(--theme-hover) !important; }
          .text-indigo-500 { color: var(--theme-text-light) !important; }
          
          /* Borders */
          .border-indigo-100, .border-indigo-200 { border-color: ${t.light} !important; filter: brightness(0.9); }
          .border-indigo-600 { border-color: var(--theme-main) !important; }
          .hover\\:border-indigo-300:hover { border-color: var(--theme-text-light) !important; opacity: 0.8; }

          /* Shadows */
          .shadow-indigo-200 { --tw-shadow-color: ${t.shadow} !important; }
          
          /* Gradients */
          .from-indigo-600 { --tw-gradient-from: ${t.gradientFrom} !important; var(--tw-gradient-to, ${t.gradientFrom}) !important; }
          .to-violet-600 { --tw-gradient-to: ${t.gradientTo} !important; }
          .bg-gradient-to-r {
              ${a?t.isRainbow?"background-image: linear-gradient(to right, #ef4444, #f97316, #eab308, #22c55e, #3b82f6, #a855f7, #ec4899) !important;":"background-image: linear-gradient(to right, var(--tw-gradient-from), var(--tw-gradient-to)) !important;":"background-image: none !important; background-color: var(--theme-main) !important;"}
          }
      `;i.textContent=r},[c.themeColor,c.themeMode,c.customColorValue]),n.useLayoutEffect(()=>{if(na.current){const t=sl.current[W]||0;na.current.scrollTop=t;const a=t>0;Ts!==a&&La(a)}},[W]),n.useEffect(()=>{Ls&&B&&oa.current&&setTimeout(()=>{oa.current.scrollIntoView({behavior:"smooth",block:"start"})},300)},[Ls,B]);const Vl=async()=>{const t=new Promise(a=>setTimeout(()=>a("timeout"),5e3));try{const a=fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"getSettings"})}),l=await Promise.race([a,t]);if(l==="timeout")console.warn("Settings fetch timed out, using defaults.");else{const i=await l.json();if(i.status==="success"&&i.data){const r=i.data;if(r.project_categories&&(oe(r.project_categories),localStorage.setItem("nexus_project_categories",JSON.stringify(r.project_categories))),r.expense_categories&&(Ze(r.expense_categories),localStorage.setItem("nexus_expense_categories",JSON.stringify(r.expense_categories))),r.deal_statuses&&(Ue(r.deal_statuses),localStorage.setItem("nexus_deal_statuses",JSON.stringify(r.deal_statuses))),r.transport_statuses&&(We(r.transport_statuses),localStorage.setItem("nexus_transport_statuses",JSON.stringify(r.transport_statuses))),r.drive_folder_id&&M(r.drive_folder_id),r.assets_drive_folder_id&&se(r.assets_drive_folder_id),r.line_bot_token&&ue(r.line_bot_token),r.telegram_bot_token&&dt(r.telegram_bot_token),r.telegram_chat_id&&Ne(r.telegram_chat_id),r.web_app_url&&Mt(r.web_app_url),r.shop_info&&(D(r.shop_info),localStorage.setItem("nexus_shop_info",JSON.stringify(r.shop_info))),r.app_credentials){let f=r.app_credentials;Array.isArray(f)||(f=[{username:f.username,password:f.password,name:"Admin",role:"Administrator",email:"admin@nexusplan.com",phone:"-"}]),y(f),localStorage.setItem("nexus_authorized_users",JSON.stringify(f));const o=localStorage.getItem("nexus_profile");if(o){const Y=JSON.parse(o),j=f.find(F=>F.username.toLowerCase()===Y.username.toLowerCase());if(j&&(j.image!==Y.image||j.name!==Y.name||j.role!==Y.role)){const F={...Y,name:j.name,role:j.role,email:j.email,phone:j.phone,image:j.image};O(F),localStorage.setItem("nexus_profile",JSON.stringify(F))}}}}}}catch(a){console.error("Error fetching settings:",a)}finally{P(!0)}};n.useEffect(()=>{Vl()},[]);const ia=async()=>{gs(!0);const t=new Promise((a,l)=>setTimeout(()=>l(new Error("Timeout")),15e3));try{const a=fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"read"})}),i=await(await Promise.race([a,t])).json();if(i.status==="success"){const r=Array.from(i.data.reduce((j,F)=>(F.id&&j.set(F.id,F),j),new Map).values());tl(r);const f=[...new Set(r.map(j=>j.artist).filter(Boolean))].sort();Hl(f);const o=new Map;r.forEach(j=>{if(j.customer){const F=o.get(j.customer)||{},U=j.customerInfo||{};o.set(j.customer,{name:j.customer,social:U.social||F.social||"",line:U.line||F.line||"",phone:U.phone||F.phone||"",email:U.email||F.email||"",taxId:U.taxId||F.taxId||"",address:U.address||F.address||""})}}),Qa(Array.from(o.values()));const Y=new Map;r.forEach(j=>{j.recipient&&!Y.has(j.recipient)&&Y.set(j.recipient,{name:j.recipient,phone:j.recipientPhone||""})}),Wl(Array.from(Y.values()))}}catch(a){console.error("Error fetching data:",a),G("การเชื่อมต่อล่าช้า ระบบกำลังทำงานในโหมด Offline","error")}finally{gs(!1)}};n.useEffect(()=>{(ne||_||w)&&ia()},[ne,_,w]),n.useEffect(()=>{if((_||w)&&de.length>0){const t=_||w,a=de.find(i=>Zt(i.id,i.rawDateTime)===t),l=setTimeout(()=>{te(!0)},3e3);if(a&&a.image){const i=new Image;i.src=ge(a.image),i.onload=()=>{clearTimeout(l),te(!0)},i.onerror=()=>{clearTimeout(l),te(!0)}}else clearTimeout(l),te(!0);return()=>clearTimeout(l)}else(!_&&!w||(_||w)&&!Dt&&de.length===0)&&te(!0)},[de,_,w,Dt]);const ye=async(t,a)=>{le(!0);const l=typeof t=="object"?t:{[t]:a};if(c.logo&&c.logo.startsWith("data:image")){G("กำลังประมวลผลรูปภาพ กรุณารอสักครู่...","error"),le(!1);return}const i={project_categories:Z,expense_categories:Pe,deal_statuses:ie,transport_statuses:ae,drive_folder_id:$,assets_drive_folder_id:E,line_bot_token:X,telegram_bot_token:pe,telegram_chat_id:ct,web_app_url:Ae,shop_info:c,app_credentials:l.app_credentials||u,...l};try{await fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"saveSettings",data:i})}),l.app_credentials&&(y(l.app_credentials),localStorage.setItem("nexus_authorized_users",JSON.stringify(l.app_credentials))),l.project_categories&&localStorage.setItem("nexus_project_categories",JSON.stringify(l.project_categories)),l.expense_categories&&localStorage.setItem("nexus_expense_categories",JSON.stringify(l.expense_categories)),l.deal_statuses&&localStorage.setItem("nexus_deal_statuses",JSON.stringify(l.deal_statuses)),l.transport_statuses&&localStorage.setItem("nexus_transport_statuses",JSON.stringify(l.transport_statuses)),l.drive_folder_id&&M(l.drive_folder_id),l.assets_drive_folder_id&&se(l.assets_drive_folder_id),l.line_bot_token!==void 0&&ue(l.line_bot_token),l.telegram_bot_token!==void 0&&dt(l.telegram_bot_token),l.telegram_chat_id!==void 0&&Ne(l.telegram_chat_id),l.web_app_url!==void 0&&Mt(l.web_app_url),l.shop_info&&(D(l.shop_info),localStorage.setItem("nexus_shop_info",JSON.stringify(l.shop_info))),G("บันทึกการตั้งค่าสำเร็จ","success")}catch(r){console.error("Error saving settings:",r),G("บันทึกการตั้งค่าไม่สำเร็จ","error")}finally{le(!1)}},Jl=async()=>{G("กำลังดึง Chat ID ล่าสุด...","info");try{const a=await(await fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"getLatestChatId"})})).json();a.status==="success"&&a.chatId?(Ne(a.chatId),G("ดึง Chat ID เรียบร้อย: "+a.chatId,"success")):G("ไม่พบ Chat ID ล่าสุด (ลองพิมพ์ /id หาบอทก่อน)","error")}catch{G("เกิดข้อผิดพลาดในการดึง ID","error")}},Gl=()=>{if(!T.username||!T.password||!T.name){G("กรุณากรอก Username, Password และชื่อ","error");return}if(u.some(a=>a.username.toLowerCase()===T.username.toLowerCase())){G("ชื่อผู้ใช้นี้มีอยู่แล้ว","error");return}const t=[...u,T];ye("app_credentials",t),y(t),he({username:"",password:"",name:"",role:"",email:"",phone:""}),ze(!1),G("เพิ่มผู้ใช้งานเรียบร้อยแล้ว")},Ql=t=>{if(u.length<=1){G("ไม่สามารถลบผู้ใช้งานคนสุดท้ายได้","error");return}const a=u.filter(l=>l.username!==t);ye("app_credentials",a),y(a),G("ลบผู้ใช้งานเรียบร้อยแล้ว")},Kl=async(t,a,l)=>{gs(!0),L("");let i=u.find(r=>r.username.toLowerCase()===t.toLowerCase()&&r.password===a);if(!i&&ke)try{const f=await(await fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"getSettings"})})).json();if(f.status==="success"&&f.data&&f.data.app_credentials){let o=f.data.app_credentials;Array.isArray(o)||(o=[o]),y(o),localStorage.setItem("nexus_authorized_users",JSON.stringify(o)),i=o.find(Y=>Y.username.toLowerCase()===t.toLowerCase()&&Y.password===a)}}catch(r){console.error("Login verification error:",r)}i?(ve(!0),O({name:i.name,role:i.role,email:i.email,phone:i.phone,username:i.username,image:i.image}),C("Overview"),l&&(localStorage.setItem("nexus_auth","true"),localStorage.setItem("nexus_profile",JSON.stringify({name:i.name,role:i.role,email:i.email,phone:i.phone,username:i.username,image:i.image}))),G(`ยินดีต้อนรับคุณ ${i.name}`,"success")):(L("ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง กรุณาลองใหม่อีกครั้ง"),G("ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง","error")),gs(!1)},al=()=>{ve(!1),O(null),C("Overview"),localStorage.removeItem("nexus_auth"),localStorage.removeItem("nexus_profile"),G("ออกจากระบบแล้ว")},G=(t,a="success")=>{xe({show:!0,message:t,type:a})},Xl=()=>{xe({...Q,show:!1})},Zl=t=>{const a=nt.find(l=>l.name===t);return a?a.label:"ProjectPlan"},Vt=ht.reduce((t,a)=>t+(parseFloat(a.price)||0),0);Re.reduce((t,a)=>t+(parseFloat(a.price)||0),0);const da=t=>ie.find(a=>a.value===t)||{label:t,color:"bg-slate-100 text-slate-500"},ca=t=>ae.find(a=>a.value===t)||{label:t,color:"bg-slate-100 text-slate-500"},lt=t=>{let a="asc";re.key===t&&re.direction==="asc"&&(a="desc"),Rl({key:t,direction:a})},er=t=>{const{scrollTop:a,scrollHeight:l,clientHeight:i}=t.target;sl.current[W]=a,La(a>0),(W==="Plans"||W==="Analytics")&&a+i>=l-100&&z<Ce.length&&!Ie&&(A(!0),setTimeout(()=>{we(r=>r+5),A(!1)},1e3))},xa=t=>new Promise((a,l)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{const f=new Image;f.src=r.target.result,f.onload=()=>{const o=document.createElement("canvas"),Y=1024,j=Y/f.width;j<1?(o.width=Y,o.height=f.height*j):(o.width=f.width,o.height=f.height),o.getContext("2d").drawImage(f,0,0,o.width,o.height);const U=o.toDataURL("image/jpeg",.7);a(U)},f.onerror=o=>l(o)},i.onerror=r=>l(r)}),$t=t=>{if(!t)return"";const a=t.replace(/[^\d]/g,""),l=a.length;return l<4?a:l<7?`${a.slice(0,3)}-${a.slice(3)}`:`${a.slice(0,3)}-${a.slice(3,6)}-${a.slice(6,10)}`},ma=t=>new Promise((a,l)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>a(i.result),i.onerror=r=>l(r)}),ha=async t=>{if(t){if(!E||typeof E!="string"||E.trim()===""){G("กรุณาระบุ Assets Folder ID ในตั้งค่าก่อนอัปโหลดรูปโปรไฟล์","error");return}fe(!0);try{if(!t.type.startsWith("image/"))throw new Error("กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น");let a=t,l="";t.size>2*1024*1024?l=await xa(t):l=await ma(t);const i={...b,image:l};if(O(i),ke){const r=l.split(",")[0].match(/:(.*?);/)[1],f=r.includes("png")?"png":"jpg",o=`profile_${b.username}_${Date.now()}.${f}`,j=await(await fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"uploadAsset",data:{fileData:l,mimeType:r,fileName:o,folderId:E.trim()}})})).json();if(j.status==="success"&&j.url){let F=j.url;j.fileId&&(F=`https://drive.google.com/uc?export=view&id=${j.fileId}`);const U={...b,image:F};O(U),localStorage.setItem("nexus_profile",JSON.stringify(U));const ce=u.map(je=>je.username.toLowerCase()===b.username.toLowerCase()?{...je,image:F}:je);y(ce),await ye("app_credentials",ce),G("อัปเดตรูปโปรไฟล์สำเร็จ","success")}else throw new Error(j.message||"Upload failed")}}catch(a){console.error(a),G("เกิดข้อผิดพลาด: "+a.message,"error")}finally{fe(!1)}}},tr=()=>{b?.image&&Ba(!0)},pa=()=>{Ja(!0),setTimeout(()=>{Ba(!1),Ja(!1)},300)},sr=async()=>{const t=bl(b?.image),a={...b,image:""};O(a),localStorage.setItem("nexus_profile",JSON.stringify(a));const l=u.map(i=>i.username.toLowerCase()===b.username.toLowerCase()?{...i,image:""}:i);y(l);try{await ye("app_credentials",l),t&&fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"deleteFile",id:t})}).catch(i=>console.error("Failed to delete profile image from Drive:",i)),G("ลบรูปโปรไฟล์เรียบร้อยแล้ว","success")}catch(i){console.error("Error deleting profile image:",i),G("เกิดข้อผิดพลาดในการบันทึก","error")}pa()},ar=async t=>{if(t){if(!E||typeof E!="string"||E.trim()===""){G("กรุณาระบุ Assets Folder ID ในตั้งค่าก่อนอัปโหลดโลโก้","error");return}xt(!0);try{if(!t.type.startsWith("image/"))throw new Error("กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น");let a=t,l="";t.size>2*1024*1024?l=await xa(t):l=await ma(t);const i={...c,logo:l};if(D(i),ke){const r=l.split(",")[0].match(/:(.*?);/)[1],f=r.includes("png")?"png":"jpg",o=`shop_logo_${Date.now()}.${f}`,j=await(await fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"uploadAsset",data:{fileData:l,mimeType:r,fileName:o,folderId:E.trim()}})})).json();if(j.status==="success"&&j.url){let F=j.url;if(j.fileId)F=`https://drive.google.com/uc?export=view&id=${j.fileId}`;else if(F.includes("id=")){const ce=F.match(/id=([a-zA-Z0-9_-]+)/);ce&&ce[1]&&(F=`https://drive.google.com/uc?export=view&id=${ce[1]}`)}const U={...c,logo:F};D(U),await ye("shop_info",U),G("อัปเดตโลโก้ร้านค้าสำเร็จ","success")}else throw new Error(j.message||"Upload failed")}}catch(a){console.error(a),G("เกิดข้อผิดพลาด: "+a.message,"error"),D(l=>({...l,logo:""}))}finally{xt(!1)}}},lr=()=>{c.logo&&Ha(!0)},ua=()=>{Ya(!0),setTimeout(()=>{Ha(!1),Ya(!1)},300)},rr=async()=>{const t=bl(c.logo),a={...c,logo:""};D(a);try{await ye("shop_info",a),t&&fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"deleteFile",id:t})}).catch(l=>console.error("Failed to delete logo from Drive:",l)),G("ลบโลโก้เรียบร้อยแล้ว","success")}catch(l){console.error("Error deleting logo settings:",l),G("เกิดข้อผิดพลาดในการบันทึกการลบ","error")}ua()},ll=async t=>{le(!0);try{if(!t.type.startsWith("image/"))throw new Error("กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น");let a=t;t.size>5*1024*1024?(G("กำลังลดขนาดไฟล์รูปภาพ...","success"),a=await xa(t)):a=await ma(t),hs(a),G("อัพโหลดรูปภาพพร้อมบันทึก","success")}catch(a){console.error(a),G(a.message||"เกิดข้อผิดพลาดในการอัพโหลดรูปภาพ","error")}finally{le(!1)}},nr=t=>{t.preventDefault();const a=t.dataTransfer.files[0];a&&ll(a)},or=t=>{t.preventDefault()},Ce=n.useMemo(()=>{let t=de.filter(a=>{const l=Et.toLowerCase(),i=(a.name||"").toLowerCase().includes(l)||(a.id||"").toLowerCase().includes(l)||(a.artist||"").toLowerCase().includes(l)||(a.customer||"").toLowerCase().includes(l)||a.note&&a.note.toLowerCase().includes(l);let r=!0;if(a.rawDateTime){const j=a.rawDateTime.split("T")[0];if(Ye==="date"&&Fe)r=j===Fe;else if(Ye==="month"&&Fe)r=a.rawDateTime.startsWith(Fe);else if(Ye==="year"&&Fe)r=a.rawDateTime.startsWith(Fe);else if(Ye==="range"&&et.start&&et.end)r=j>=et.start&&j<=et.end;else if(Ye==="week"&&Fe){const F=new Date(j),U=new Date(Fe),ce=new Date(U);ce.setDate(U.getDate()+6),U.setHours(0,0,0,0),ce.setHours(23,59,59,999),F.setHours(12,0,0,0),r=F>=U&&F<=ce}}const f=vt==="all"||a.category===vt,o=Nt==="all"||a.dealStatus===Nt;let Y=!0;return mt==="active_only"?Y=a.transportStatus!=="delivered"&&a.transportStatus!=="completed"&&a.transportStatus!=="issue"&&a.transportStatus!=="cancelled":Y=mt==="all"||a.transportStatus===mt,i&&r&&f&&o&&Y});return re.key!==null&&t.sort((a,l)=>{let i=a[re.key],r=l[re.key];return i||(i=""),r||(r=""),typeof i=="string"&&typeof r=="string"?re.direction==="asc"?i.localeCompare(r,"th",{numeric:!0}):r.localeCompare(i,"th",{numeric:!0}):i<r?re.direction==="asc"?-1:1:i>r?re.direction==="asc"?1:-1:0}),t},[de,re,Et,Fe,et,Ye,vt,Nt,mt]),ir=n.useMemo(()=>{const t=Ce.filter(k=>{if(k.dealStatus==="completed")return!0;const q=ie.find(Gt=>Gt.value===k.dealStatus);return!!(q&&q.type==="completed")}),a=t.reduce((k,q)=>k+(q.wage||0),0),l=t.reduce((k,q)=>{const Gt=q.customerSupport?q.customerSupport.reduce((Na,ya)=>Na+(parseFloat(ya.price)||0),0):0;return k+Gt},0),i=t.reduce((k,q)=>{const Gt=q.expenses?q.expenses.reduce((Na,ya)=>Na+(parseFloat(ya.price)||0),0):0;return k+Gt},0),r=a-i,f=Ce.length,o=Ce.filter(k=>k.dealStatus==="confirmed"&&k.transportStatus==="delivered").length,Y=Ce.filter(k=>k.dealStatus==="confirmed"&&k.transportStatus!=="delivered"&&k.transportStatus!=="issue").length,j=Ce.filter(k=>k.dealStatus==="pending").length,F=Ce.filter(k=>k.dealStatus==="cancelled"||k.transportStatus==="issue").length,U=Ce.filter(k=>k.dealStatus==="declined").length,ce={};t.forEach(k=>{k.expenses&&k.expenses.forEach(q=>{q.category&&(ce[q.category]=(ce[q.category]||0)+parseFloat(q.price))})});const je=Object.entries(ce).map(([k,q])=>({category:k,amount:q})).sort((k,q)=>q.amount-k.amount),Oe=Math.max(...je.map(k=>k.amount),1),Te={};t.forEach(k=>{const q=k.artist||"Unknown";Te[q]=(Te[q]||0)+(k.wage||0)});const ee=Object.entries(Te).map(([k,q])=>({name:k,amount:q})).sort((k,q)=>q.amount-k.amount),Le=Math.max(...ee.map(k=>k.amount),1),Jt={};t.forEach(k=>{const q=k.customer||"Unknown";Jt[q]=(Jt[q]||0)+(k.wage||0)});const vs=Object.entries(Jt).map(([k,q])=>({name:k,amount:q})).sort((k,q)=>q.amount-k.amount),d=Math.max(...vs.map(k=>k.amount),1),H={};Ce.forEach(k=>{if(k.dealStatus!=="cancelled"&&k.transportStatus!=="issue"){const q=k.customer||"Unknown";H[q]=(H[q]||0)+1}});const qe=Object.entries(H).map(([k,q])=>({name:k,count:q})).sort((k,q)=>q.count-k.count),Nr=Math.max(...qe.map(k=>k.count),1),va={};Ce.forEach(k=>{va[k.category]=(va[k.category]||0)+1});const yr=Object.entries(va).map(([k,q])=>({name:k,count:q}));return{currentRevenue:a,currentSupport:l,currentCost:i,currentProfit:r,totalProjects:f,completedProjects:o,activeProjects:Y,pendingProjects:j,issueProjects:F,declinedProjects:U,allExpensesList:je,maxExpense:Oe,topPerformers:ee,maxPerformerRevenue:Le,topCustomers:vs,maxCustomerRevenue:d,topCustomerByProjects:qe,maxCustomerProjectCount:Nr,categoryData:yr}},[Ce,ie]),rl=n.useMemo(()=>{let t=[...de];return re.key!==null&&t.sort((a,l)=>{let i=a[re.key],r=l[re.key];return i||(i=""),r||(r=""),typeof i=="string"&&typeof r=="string"?re.direction==="asc"?i.localeCompare(r,"th",{numeric:!0}):r.localeCompare(i,"th",{numeric:!0}):i<r?re.direction==="asc"?-1:1:i>r?re.direction==="asc"?1:-1:0}),t},[de,re]),fs=t=>ie.find(a=>a.value===t)?.type||"pending",ga=t=>ae.find(a=>a.value===t)?.type||"pending",dr=n.useMemo(()=>{const t=de.length,a=de.filter(r=>{const f=fs(r.dealStatus);return ga(r.transportStatus)==="completed"&&(f==="active"||f==="completed")}).length,l=de.filter(r=>{const f=fs(r.dealStatus),o=ga(r.transportStatus);return f==="active"&&o!=="completed"&&o!=="cancelled"}).length;de.filter(r=>fs(r.dealStatus)==="pending").length;const i=de.filter(r=>{const f=fs(r.dealStatus),o=ga(r.transportStatus);return f==="cancelled"||o==="cancelled"}).length;return[{title:"โครงการทั้งหมด",value:t,change:"รวมทั้งหมด",isPositive:!0,icon:cl,color:"text-indigo-600",bg:"bg-indigo-50"},{title:"งานเสร็จสิ้น",value:a,change:"ปิดจ๊อบแล้ว",isPositive:!0,icon:Je,color:"text-emerald-600",bg:"bg-emerald-50"},{title:"กำลังดำเนินการ",value:l,change:"Active Now",isPositive:!0,icon:Ge,color:"text-blue-600",bg:"bg-blue-50"},{title:"ยกเลิก/มีปัญหา",value:i,change:"ต้องตรวจสอบ",isPositive:!1,icon:_t,color:"text-rose-600",bg:"bg-rose-50"}]},[de,ie,ae]),fa=()=>{Os(""),zs("all"),Us(""),Rs({start:"",end:""}),qs("all"),tt("all"),st("all")},bs=()=>{Aa(!0),setTimeout(()=>{Ma(!1),Aa(!1)},300)},ba=()=>{qa(!0),setTimeout(()=>{Es({...wt,show:!1}),qa(!1)},300)},cr=t=>{const a=t.target.value;Js(a);const l=as.find(i=>i.name===a);l&&(At(l.social||""),Ot(l.line||""),Ut($t(l.phone||"")),qt(l.email||""),Wt(l.taxId||""),Yt(l.address||""))},xr=t=>{const a=t.target.value;Xs(a);const l=Ka.find(i=>i.name===a);l&&xs($t(l.phone||""))},rt=(t=null,a=!1)=>{if(Oa(a),t){if(Ua(t.id),Xa(t.id),Ws(t.name),Gs(t.category),Ys(t.rawDateTime||""),Vs(t.artist),Js(t.customer),t.customerInfo?(At(t.customerInfo.social||""),Ot(t.customerInfo.line||""),Ut($t(t.customerInfo.phone||"")),qt(t.customerInfo.email||""),Wt(t.customerInfo.taxId||""),Yt(t.customerInfo.address||"")):(At(""),Ot(""),Ut(""),qt(""),Wt(""),Yt("")),Qs(t.rawDeliveryStart||""),ds(t.rawDeliveryEnd||t.rawDeliveryDateTime||""),Xs(t.recipient||""),xs($t(t.recipientPhone||"")),ea(t.location||""),ta(t.mapLink||""),hs(t.image||null),t.quotationItems&&t.quotationItems.length>0){const l=t.quotationItems.map(r=>({...r,quantity:r.quantity!==void 0?r.quantity:1,unitPrice:r.unitPrice!==void 0?r.unitPrice:r.price||0}));St(l);const i=t.quotationItems.reduce((r,f)=>r+(parseFloat(f.price)||0),0);aa(i)}else{const l=[];t.wage>0&&l.push({category:"ค่าบริการ/อุปกรณ์",detail:"ค่าจ้างเดิม",quantity:1,unitPrice:t.wage,price:t.wage}),t.deliveryFee>0&&l.push({category:"ค่าจัดส่ง",detail:"ค่าส่งเดิม",quantity:1,unitPrice:t.deliveryFee,price:t.deliveryFee}),l.length===0&&l.push({category:"",detail:"",quantity:1,unitPrice:0,price:0}),St(l),aa(t.wage||0)}if(t.customerSupport&&t.customerSupport.length>0){const l=t.customerSupport.map(i=>i.denomination!==void 0?i:{denomination:1,quantity:i.price,price:i.price});Ct(l)}else Ct([{denomination:20,quantity:0,price:0}]);if(t.expenses&&t.expenses.length>0){const l=t.expenses.map(i=>({...i,quantity:i.quantity!==void 0?i.quantity:1,unitPrice:i.unitPrice!==void 0?i.unitPrice:i.price||0}));kt(l)}else kt([{category:"",detail:"",quantity:1,unitPrice:0,price:0}]);sa(t.note||""),ra(t.dealStatus),la(t.transportStatus)}else{Ua(null);let l=1;if(de.length>0){const f=de.map(Y=>{const j=Y.id.match(/\d+/);return j?parseInt(j[0]):0}),o=Math.max(...f);o>0&&(l=o+1)}Xa(`P-${String(l).padStart(4,"0")}`),Ws(""),Gs(Z[0]||"");const i=new Date,r=new Date(i.getTime()-i.getTimezoneOffset()*6e4).toISOString().slice(0,16);Ys(r),Qs(""),ds(""),Vs(""),Js(""),At(""),Ot(""),Ut(""),qt(""),Wt(""),Yt(""),Xs(""),xs(""),ea(""),ta(""),hs(null),sa(""),aa(0),Bl(0),kt([{category:"",detail:"",quantity:1,unitPrice:0,price:0}]),St([{category:"",detail:"",quantity:1,unitPrice:0,price:0}]),Ct([{denomination:20,quantity:0,price:0}]),ra(ie.length>0?ie[0].value:""),la(ae.length>0?ae[0].value:"")}Ma(!0)},nl=async()=>{if(le(!0),yt){const r={name:yt,social:ns,line:os,phone:zt,email:Rt,taxId:Ht,address:is};as.findIndex(o=>o.name===yt)===-1&&Qa([...as,r])}const t=$e(rs),a=Bt&&Be?`${$e(Bt)} - ${$e(Be)}`:Be?$e(Be):"-",l=Se.reduce((r,f)=>r+(parseFloat(f.price)||0),0),i={id:ls,name:Hs||"โครงการใหม่ (ไม่ได้ระบุชื่อ)",category:Za,artist:Bs||"-",customer:yt||"-",customerInfo:{social:ns,line:os,phone:zt,email:Rt,taxId:Ht,address:is},date:t,rawDateTime:rs,deliveryDate:a,rawDeliveryStart:Bt,rawDeliveryEnd:Be,rawDeliveryDateTime:Be,wage:l,deliveryFee:0,quotationItems:Se,dealStatus:us,transportStatus:ps,expenses:ht,customerSupport:Re,note:el,recipient:Ks,recipientPhone:cs,location:Zs,mapLink:ms,image:at};try{const f=await(await fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"save",data:i})})).json();if(f.status==="success"){tl(o=>o.some(j=>j.id===i.id)?o.map(j=>j.id===i.id?i:j):[i,...o]),le(!1),bs(),G("บันทึกข้อมูลสำเร็จเรียบร้อย","success"),ia();return}else{let o=f.message;o&&(o.includes("DriveApp")||o.includes("permission")||o.includes("อนุญาต"))&&(o="สิทธิ์ Google Drive ไม่ถูกต้อง: กรุณาเปิด Apps Script > กด Run ฟังก์ชันเพื่อขอสิทธิ์ (Authorize) > และ Deploy ใหม่อีกครั้ง"),G("ไม่สามารถบันทึกข้อมูลได้: "+o,"error")}}catch(r){G("เกิดข้อผิดพลาดในการเชื่อมต่อ: "+r.message,"error")}le(!1)},mr=()=>{jt&&Es({show:!0,id:jt,fromModal:!0})},ol=(t,a)=>{t.stopPropagation(),Es({show:!0,id:a,fromModal:!1})},hr=async()=>{if(wt.id){le(!0);const t=de.find(l=>l.id===wt.id),a=t?t.image:null;try{const i=await(await fetch(ke,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"delete",id:wt.id,image:a})})).json();i.status==="success"?(await ia(),G("ลบข้อมูลเรียบร้อยแล้ว","success")):G("เกิดข้อผิดพลาดในการลบ: "+i.message,"error")}catch(l){G("เกิดข้อผิดพลาดในการเชื่อมต่อ: "+l.message,"error")}ba(),wt.fromModal&&bs(),le(!1)}},il=(t,a)=>{t.stopPropagation(),rt(a,!1)},pr=()=>{kt([...ht,{category:"",detail:"",quantity:1,unitPrice:0,price:0}])},ur=t=>{const a=ht.filter((l,i)=>i!==t);kt(a)},js=(t,a,l)=>{const i=[...ht],r={...i[t]};if(a==="category"&&(r.category=l),a==="detail"&&(r.detail=l),a==="quantity"){const f=parseFloat(l)||0;r.quantity=f,r.price=f*(parseFloat(r.unitPrice)||0)}if(a==="unitPrice"){const f=parseFloat(l)||0;r.unitPrice=f,r.price=(parseFloat(r.quantity)||1)*f}i[t]=r,kt(i)},gr=()=>{St([...Se,{category:"",detail:"",quantity:1,unitPrice:0,price:0}])},fr=t=>{const a=Se.filter((l,i)=>i!==t);St(a)},ws=(t,a,l)=>{const i=[...Se],r={...i[t]};if(a==="category"&&(r.category=l),a==="detail"&&(r.detail=l),a==="quantity"){const f=parseFloat(l)||0;r.quantity=f,r.price=f*(parseFloat(r.unitPrice)||0)}if(a==="unitPrice"){const f=parseFloat(l)||0;r.unitPrice=f,r.price=(parseFloat(r.quantity)||1)*f}i[t]=r,St(i)},ja=(t,a,l)=>{const i=[...Re],r={...i[t]};if(a==="denomination")r.denomination=parseFloat(l)||0,r.price=r.denomination*(parseFloat(r.quantity)||0);else if(a==="quantity")r.quantity=parseFloat(l)||0,r.price=(parseFloat(r.denomination)||0)*r.quantity;else if(a==="price"&&(r.price=parseFloat(l)||0,r.denomination>0)){const f=r.price/r.denomination;r.quantity=Number.isInteger(f)?f:parseFloat(f.toFixed(2))}i[t]=r,Ct(i)},br=()=>{Ct([...Re,{denomination:20,quantity:0,price:0}])},jr=t=>{const a=Re.filter((l,i)=>i!==t);Ct(a)},wr=({data:t})=>{const a=t.reduce((F,U)=>F+U.count,0),l=35,i=2*Math.PI*l;let r=0;const[f,o]=n.useState(!1);n.useEffect(()=>{const F=setTimeout(()=>o(!0),100);return()=>clearTimeout(F)},[]);const Y=["#6366f1","#10b981","#f59e0b","#f43f5e","#8b5cf6","#3b82f6","#ec4899","#64748b"],j=[...t].sort((F,U)=>U.count-F.count);return e.jsxs("div",{className:"flex flex-col items-center gap-6 py-2 w-full",children:[e.jsxs("div",{className:"relative w-56 h-56 flex items-center justify-center shrink-0",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full absolute inset-0 -rotate-90",children:[e.jsx("circle",{cx:"50",cy:"50",r:l,fill:"transparent",stroke:"#f1f5f9",strokeWidth:"10"}),j.map((F,U)=>{const ce=a>0?F.count/a:0,Oe=`${i*ce} ${i}`,Te=-1*i*r;return r+=ce,e.jsx("circle",{cx:"50",cy:"50",r:l,fill:"transparent",stroke:Y[U%Y.length],strokeWidth:"10",strokeDasharray:f?Oe:`0 ${i}`,strokeDashoffset:Te,strokeLinecap:"butt",className:"transition-all duration-1000 ease-out",style:{transitionDelay:`${U*50}ms`}},U)})]}),e.jsxs("div",{className:`flex flex-col items-center justify-center transition-all duration-700 delay-300 ${f?"scale-100 opacity-100":"scale-50 opacity-0"}`,children:[e.jsx("span",{className:"text-4xl font-black text-slate-800 leading-none",children:a}),e.jsx("span",{className:"text-sm font-bold text-slate-400 mt-1",children:"โครงการ"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3 w-full px-2",children:[j.map((F,U)=>e.jsxs("div",{className:"flex items-center justify-between group hover:bg-slate-50 p-1.5 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2.5 min-w-0",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shrink-0 transition-transform group-hover:scale-125 shadow-sm",style:{backgroundColor:Y[U%Y.length]}}),e.jsx("span",{className:"text-xs font-bold text-slate-600 truncate",children:F.name})]}),e.jsx("span",{className:"text-xs font-black text-slate-800 bg-white border border-slate-100 px-2 py-0.5 rounded-md shadow-sm",children:F.count})]},U)),j.length===0&&e.jsx("div",{className:"col-span-2 text-center text-slate-400 text-xs py-2 italic",children:"ไม่มีข้อมูลโครงการ"})]})]})},wa=(t=0,a=null)=>{const l=t>0?a||rl:a||Ce,i=t>0?t:z,r=l.slice(0,i),f=o=>{if(!o||!o.color)return"bg-slate-400";const Y=gt.find(j=>j.value===o.color);return Y?Y.dot:o.color.includes("emerald")||o.color.includes("green")?"bg-emerald-500":o.color.includes("blue")||o.color.includes("indigo")||o.color.includes("sky")?"bg-blue-500":o.color.includes("amber")||o.color.includes("yellow")||o.color.includes("orange")?"bg-amber-500":o.color.includes("rose")||o.color.includes("red")||o.color.includes("pink")?"bg-rose-500":o.color.includes("purple")||o.color.includes("violet")?"bg-violet-500":"bg-slate-400"};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-2",children:[r.map((o,Y)=>{const j=o.expenses?o.expenses.reduce((ee,Le)=>ee+(parseFloat(Le.price)||0),0):0,F=(o.wage||0)-j,U=o.customerSupport?o.customerSupport.reduce((ee,Le)=>ee+(parseFloat(Le.price)||0),0):0,ce=(o.wage||0)+U,je=da(o.dealStatus),Oe=ca(o.transportStatus),Te=Y%20*80;return e.jsxs("div",{onClick:()=>rt(o,!0),className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5 flex flex-col gap-4 relative overflow-hidden space-row-animation",style:{animationDelay:`${Te}ms`},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"font-black text-indigo-600 bg-indigo-50 px-2.5 py-1.5 rounded-lg text-sm w-fit shadow-sm border border-indigo-100",children:o.id}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500 text-xs font-bold whitespace-nowrap",children:[e.jsx(Ge,{className:"w-3.5 h-3.5"})," ",o.date]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-[10px] font-bold border ${je.color}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${f(je)}`}),je.label]}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-[10px] font-bold border ${Oe.color}`,children:[e.jsx(De,{className:"w-3 h-3"}),Oe.label]})]})]}),e.jsx("div",{className:"h-px bg-slate-100 w-full"}),e.jsxs("div",{className:"flex flex-col gap-1 mb-2",children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 leading-tight",children:o.name}),e.jsxs("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded-md text-xs font-bold border border-slate-200 w-fit flex items-center gap-1",children:[e.jsx(Kt,{className:"w-3 h-3"})," ",o.category]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-4",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 text-sm font-bold",children:[e.jsx(Ke,{className:"w-4 h-4 text-indigo-500"})," ",o.artist]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500 text-xs pl-5",children:[e.jsx(pt,{className:"w-3 h-3"})," ",o.customer]})]})}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-start gap-1.5 text-slate-700 text-sm font-bold",children:[e.jsx(Ge,{className:"w-4 h-4 text-indigo-500 mt-0.5 shrink-0"}),e.jsx("div",{className:"whitespace-nowrap",children:Tt(o)})]}),e.jsxs("div",{className:"flex items-start gap-1.5 text-slate-500 text-xs pl-0.5",children:[e.jsx(ut,{className:"w-3.5 h-3.5 shrink-0 mt-0.5 text-slate-400"}),o.mapLink?e.jsx("a",{href:o.mapLink,target:"_blank",rel:"noreferrer",onClick:ee=>ee.stopPropagation(),className:"text-blue-600 hover:underline line-clamp-2 leading-tight",children:o.location||"-"}):e.jsx("span",{className:"line-clamp-2 leading-tight",children:o.location||"-"})]})]})})]}),(o.recipient||o.recipientPhone)&&e.jsxs("div",{className:"flex justify-between items-start gap-3 text-sm text-slate-600 bg-slate-50 p-3 rounded-xl border border-slate-100",children:[e.jsx("div",{className:"flex flex-col min-w-0",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"font-bold text-slate-700 shrink-0",children:"ผู้รับ:"}),e.jsx("span",{className:"font-medium line-clamp-2 leading-snug break-words",children:o.recipient||"-"})]})}),o.recipientPhone&&e.jsxs("a",{href:`tel:${o.recipientPhone}`,onClick:ee=>ee.stopPropagation(),className:"flex items-center gap-1.5 text-indigo-600 bg-white px-2.5 py-1.5 rounded-lg border border-indigo-100 shadow-sm hover:bg-indigo-50 transition-colors whitespace-nowrap shrink-0 ml-1",children:[e.jsx(it,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-bold text-xs",children:o.recipientPhone})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-slate-200",children:[e.jsxs("span",{className:"text-xs text-slate-700 font-bold flex items-center gap-1",children:[e.jsx(Cl,{className:"w-3 h-3"})," ยอดเรียกเก็บ"]}),e.jsxs("span",{className:"text-sm text-indigo-700 font-black",children:["฿",ce.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"ค่าจ้าง"}),e.jsxs("span",{className:"text-xs text-emerald-600 font-bold flex items-center gap-1",children:[e.jsx(Hr,{className:"w-3 h-3"})," ",o.wage.toLocaleString()]})]}),U>0&&e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"ลูกค้าสนับสนุน"}),e.jsxs("span",{className:"text-xs text-blue-600 font-bold flex items-center gap-1",children:["+ ",U.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2 border-b border-slate-200 pb-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"รายจ่าย"}),e.jsxs("span",{className:"text-xs text-rose-500 font-bold flex items-center gap-1",children:[e.jsx(Qt,{className:"w-3 h-3"})," ",j.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700",children:"กำไรสุทธิ"}),e.jsxs("span",{className:`text-sm font-bold ${F>=0?"text-indigo-600":"text-rose-600"}`,children:[F>=0?"+":"",F.toLocaleString()]})]})]}),o.note&&e.jsxs("div",{className:"text-xs text-slate-500 bg-yellow-50/50 p-2 rounded-lg border border-yellow-100",children:[e.jsx("span",{className:"font-bold text-yellow-600 mr-1",children:"หมายเหตุ:"})," ",o.note]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[e.jsx("button",{onClick:ee=>ol(ee,o.id),className:"flex items-center justify-center gap-1.5 py-2.5 bg-rose-50 border border-rose-100 text-rose-600 font-bold hover:bg-rose-100 rounded-xl transition shadow-sm",title:"ลบรายการ",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:ee=>il(ee,o),className:"flex items-center justify-center gap-1.5 py-2.5 bg-white border border-slate-200 text-slate-700 font-bold rounded-xl hover:bg-slate-50 transition-colors shadow-sm",children:[e.jsx(Ss,{className:"w-4 h-4"})," แก้ไข"]}),e.jsxs("button",{onClick:ee=>{ee.stopPropagation(),ss(o)},className:"flex items-center justify-center gap-1.5 py-2.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 font-bold rounded-xl transition-colors shadow-sm",title:"แชร์ให้ลูกค้า",children:[e.jsx(ks,{className:"w-4 h-4"})," แชร์"]})]})]},o.id)}),t===0&&Ie&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3 opacity-100 transition-opacity duration-300",children:[e.jsx("div",{className:"p-3 bg-white rounded-full shadow-md border border-slate-100 animate-bounce",children:e.jsx(_e,{className:"w-6 h-6 text-indigo-600 animate-spin"})}),e.jsx("span",{className:"text-xs text-slate-500 font-bold animate-pulse",children:"กำลังโหลดข้อมูลเพิ่มเติม..."})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"overflow-x-auto overflow-y-hidden pb-4 custom-scrollbar",children:e.jsx("div",{className:"min-w-fit w-full",children:e.jsxs("table",{className:"w-full min-w-[1280px] table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-slate-400 text-sm font-semibold border-b border-slate-50",children:[e.jsx(ot,{className:"w-[12%] min-w-[120px]",label:"รหัส / วันที่",sortKey:"id",sortConfig:re,handleSort:lt}),e.jsx(ot,{className:"w-[18%] min-w-[200px]",label:"โปรเจค / หมวดหมู่",sortKey:"name",sortConfig:re,handleSort:lt}),e.jsx(ot,{className:"w-[12%] min-w-[150px]",label:"ศิลปิน / ลูกค้า",sortKey:"artist",sortConfig:re,handleSort:lt}),e.jsx(ot,{className:"w-[12%] min-w-[150px]",label:"ผู้รับ / เบอร์โทร",sortKey:"recipient",sortConfig:re,handleSort:lt}),e.jsx(ot,{className:"w-[14%] min-w-[180px]",label:"กำหนดส่ง / สถานที่",sortKey:"rawDeliveryDateTime",sortConfig:re,handleSort:lt}),e.jsx(ot,{className:"w-[10%] min-w-[120px]",label:"สถานะ",sortKey:"dealStatus",sortConfig:re,handleSort:lt}),e.jsx(ot,{className:"w-[10%] min-w-[100px]",label:"การเงิน (บาท)",sortKey:"wage",alignRight:!0,sortConfig:re,handleSort:lt}),e.jsx(ot,{className:"w-[8%] min-w-[100px]",label:"หมายเหตุ",sortKey:"note",sortConfig:re,handleSort:lt}),e.jsx("th",{className:"w-[8%] min-w-[100px] px-2 py-4 font-medium text-right whitespace-nowrap",children:"ดำเนินการ"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:r.map((o,Y)=>{const j=o.expenses?o.expenses.reduce((ee,Le)=>ee+(parseFloat(Le.price)||0),0):0,F=(o.wage||0)-j,U=o.customerSupport?o.customerSupport.reduce((ee,Le)=>ee+(parseFloat(Le.price)||0),0):0,ce=(o.wage||0)+U,je=da(o.dealStatus),Oe=ca(o.transportStatus),Te=Y%20*50;return e.jsxs("tr",{onClick:()=>rt(o,!0),className:"hover:bg-slate-50/80 transition-colors group cursor-pointer space-row-animation",style:{animationDelay:`${Te}ms`},children:[e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-lg text-xs w-fit whitespace-nowrap",children:o.id}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500 text-xs mt-1 whitespace-nowrap",children:[e.jsx(Ge,{className:"w-3 h-3 shrink-0"}),o.date]})]})}),e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm whitespace-normal break-words leading-tight",title:o.name,children:o.name}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-500 whitespace-nowrap",children:[e.jsx(Kt,{className:"w-3 h-3 shrink-0"}),o.category]})]})}),e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1.5 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 whitespace-normal break-words",children:[e.jsx(Ke,{className:"w-3 h-3 text-indigo-500 shrink-0"}),e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:o.artist})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 whitespace-normal break-words",children:[e.jsx(pt,{className:"w-3 h-3 shrink-0"}),e.jsx("span",{children:o.customer})]})]})}),e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700 whitespace-normal break-words",title:o.recipient||"-",children:o.recipient||"-"}),o.recipientPhone&&e.jsxs("a",{href:`tel:${o.recipientPhone}`,onClick:ee=>ee.stopPropagation(),className:"flex items-center gap-1 text-xs text-slate-500 hover:text-indigo-600 hover:underline transition-colors w-fit whitespace-nowrap",children:[e.jsx(it,{className:"w-3 h-3 shrink-0"}),o.recipientPhone]})]})}),e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 text-sm font-medium whitespace-nowrap",children:[e.jsx(Ge,{className:"w-3 h-3 text-indigo-500 shrink-0"}),e.jsx("div",{children:Tt(o)})]}),e.jsxs("div",{className:"flex items-start gap-1.5 text-xs text-slate-500",children:[e.jsx(ut,{className:"w-3 h-3 shrink-0 mt-0.5"}),o.mapLink?e.jsx("a",{href:o.mapLink,target:"_blank",rel:"noreferrer",onClick:ee=>ee.stopPropagation(),className:"text-blue-600 hover:underline whitespace-normal break-words w-full leading-tight",title:o.location,children:o.location||"-"}):e.jsx("span",{className:"whitespace-normal break-words w-full leading-tight",title:o.location,children:o.location||"-"})]})]})}),e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-2 items-start w-full",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wide border w-full max-w-[140px] truncate ${je.color}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${f(je)}`}),e.jsx("span",{className:"truncate",children:je.label})]}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wide border w-full max-w-[140px] truncate ${Oe.color}`,children:[e.jsx(De,{className:"w-3 h-3 shrink-0"}),e.jsx("span",{className:"truncate",children:Oe.label})]})]})}),e.jsx("td",{className:"px-4 py-4 align-top text-right",children:e.jsxs("div",{className:"flex flex-col gap-1 items-end w-full",children:[e.jsxs("span",{className:"text-sm font-black text-slate-800 whitespace-nowrap",title:"ยอดเรียกเก็บสุทธิ",children:["฿",ce.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-slate-400 flex gap-1 items-center justify-end w-full whitespace-nowrap",children:[e.jsx("span",{className:"text-emerald-600",title:"ค่าจ้าง",children:o.wage.toLocaleString()}),U>0&&e.jsxs("span",{className:"text-blue-500",title:"สนับสนุน",children:["+",U.toLocaleString()]})]}),e.jsxs("span",{className:"text-xs text-rose-500 font-medium flex items-center justify-end gap-1 w-full whitespace-nowrap",title:"รายจ่าย",children:[e.jsx(Qt,{className:"w-3 h-3 shrink-0"})," -",j.toLocaleString()]}),e.jsxs("span",{className:`text-xs font-bold ${F>=0?"text-indigo-600":"text-rose-600"} border-t border-slate-100 pt-1 mt-1 w-full text-right whitespace-nowrap`,title:"กำไรสุทธิ",children:[F>=0?"+":"",F.toLocaleString()]})]})}),e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsx("div",{className:"text-sm text-slate-600 whitespace-normal break-words line-clamp-3",title:o.note,children:o.note||"-"})}),e.jsx("td",{className:"px-2 py-4 align-top text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:ee=>{ee.stopPropagation(),ss(o)},className:"p-2 bg-indigo-50 border border-indigo-100 text-indigo-600 hover:bg-indigo-100 rounded-lg transition shadow-sm",title:"แชร์",children:e.jsx(ks,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ee=>il(ee,o),className:"p-2 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 rounded-lg transition shadow-sm",title:"แก้ไข",children:e.jsx(Ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ee=>ol(ee,o.id),className:"p-2 bg-white border border-slate-200 text-rose-500 hover:bg-rose-50 rounded-lg transition shadow-sm",title:"ลบรายการ",children:e.jsx(Me,{className:"w-4 h-4"})})]})})]},o.id)})})]})})}),t===0&&Ie&&e.jsx("div",{className:"w-full py-8 text-center border-t border-slate-50 bg-slate-50/30 animate-in fade-in slide-in-from-bottom-2",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-full shadow-sm border border-slate-200",children:e.jsx(_e,{className:"w-5 h-5 text-indigo-600 animate-spin"})}),e.jsx("span",{className:"text-xs text-slate-500 font-bold animate-pulse",children:"กำลังโหลดข้อมูลเพิ่มเติม..."})]})})]})]})},dl=()=>e.jsxs("div",{className:`sticky top-0 z-40 bg-white/95 backdrop-blur-xl border-slate-200 transition-all duration-300 ease-in-out
        ${Ts?"mx-0 mt-0 py-3 px-4 sm:px-8 lg:px-10 border-b shadow-sm rounded-b-[2rem] rounded-t-none mb-6":"mx-4 sm:mx-8 lg:mx-10 mt-4 p-4 rounded-[2rem] border shadow-sm mb-6 translate-y-0"}
      `,children:[e.jsx("div",{className:`flex items-center gap-2 mb-4 text-indigo-600 font-bold transition-all ${Ts?"scale-90 origin-left opacity-80 translate-y-1":""} hidden md:flex`}),e.jsxs("div",{className:"flex flex-col gap-3 md:hidden",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 bg-white border border-slate-200 rounded-xl shadow-sm",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",placeholder:"ค้นหา...",className:"w-full h-10 pl-9 pr-4 bg-transparent outline-none text-slate-700 text-sm font-medium placeholder:text-slate-400 rounded-xl",value:Et,onChange:t=>Os(t.target.value)})]}),e.jsx("button",{onClick:()=>Ol(!Ms),className:`px-3 rounded-xl font-bold transition-colors flex items-center justify-center shadow-sm ${Ms?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:e.jsx(Br,{className:"w-4 h-4"})}),e.jsx("button",{onClick:fa,className:"px-3 bg-slate-100 text-slate-500 rounded-xl font-bold hover:bg-rose-50 hover:text-rose-600 transition-colors flex items-center justify-center shadow-sm",children:e.jsx(gl,{className:"w-4 h-4"})})]}),Ms&&e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4 no-scrollbar animate-in slide-in-from-top-2 fade-in duration-200 items-center",children:[e.jsx("div",{className:"shrink-0 w-[240px]",children:e.jsx(vl,{mode:Ye,setMode:zs,date:Fe,setDate:Us,range:et,setRange:Rs})}),e.jsxs("div",{className:"relative min-w-[140px] bg-white border border-slate-200 rounded-xl shadow-sm shrink-0 h-10",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(Kt,{className:"w-3.5 h-3.5"})}),e.jsxs("select",{className:"w-full h-full pl-8 pr-6 bg-transparent outline-none text-slate-700 text-xs font-bold appearance-none",value:vt,onChange:t=>qs(t.target.value),children:[e.jsx("option",{value:"all",children:"ทุกหมวดหมู่"}),Z.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),e.jsx(He,{className:"w-3 h-3 text-slate-400 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"})]}),e.jsxs("div",{className:"relative min-w-[140px] bg-white border border-slate-200 rounded-xl shadow-sm shrink-0 h-10",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(pt,{className:"w-3.5 h-3.5"})}),e.jsxs("select",{className:"w-full h-full pl-8 pr-6 bg-transparent outline-none text-slate-700 text-xs font-bold appearance-none",value:Nt,onChange:t=>tt(t.target.value),children:[e.jsx("option",{value:"all",children:"ทุกสถานะ (ดีล)"}),ie.map((t,a)=>e.jsx("option",{value:t.value,children:t.label},a))]}),e.jsx(He,{className:"w-3 h-3 text-slate-400 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"})]}),e.jsxs("div",{className:"relative min-w-[140px] bg-white border border-slate-200 rounded-xl shadow-sm shrink-0 h-10",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(De,{className:"w-3.5 h-3.5"})}),e.jsxs("select",{className:"w-full h-full pl-8 pr-6 bg-transparent outline-none text-slate-700 text-xs font-bold appearance-none",value:mt,onChange:t=>st(t.target.value),children:[e.jsx("option",{value:"all",children:"ขนส่ง (ทั้งหมด)"}),e.jsx("option",{value:"active_only",children:"กำลังดำเนินการ (Active)"})," ",ae.map((t,a)=>e.jsx("option",{value:t.value,children:t.label},a))]}),e.jsx(He,{className:"w-3 h-3 text-slate-400 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"})]})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3 h-[48px]",children:[e.jsxs("div",{className:"relative flex-[2] bg-white border border-slate-200 rounded-2xl hover:border-indigo-300 transition-colors shadow-sm",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(Cs,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"ค้นหาชื่อโครงการ, ศิลปิน, รหัส...",className:"w-full h-full pl-12 pr-4 bg-transparent outline-none text-slate-700 text-sm font-medium placeholder:text-slate-400 rounded-2xl",value:Et,onChange:t=>Os(t.target.value)})]}),e.jsx("div",{className:"flex-1 min-w-[300px]",children:e.jsx(vl,{mode:Ye,setMode:zs,date:Fe,setDate:Us,range:et,setRange:Rs})})]}),e.jsxs("div",{className:"flex gap-3 h-[48px]",children:[e.jsxs("div",{className:"relative flex-1 bg-white border border-slate-200 rounded-2xl hover:border-indigo-300 transition-colors shadow-sm group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-indigo-500 transition-colors",children:e.jsx(Kt,{className:"w-4 h-4"})}),e.jsxs("select",{className:"w-full h-full pl-11 pr-8 bg-transparent outline-none text-slate-700 text-sm font-bold appearance-none cursor-pointer rounded-2xl",value:vt,onChange:t=>qs(t.target.value),children:[e.jsx("option",{value:"all",children:"ทุกหมวดหมู่"}),Z.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),e.jsx(He,{className:"w-4 h-4 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"})]}),e.jsxs("div",{className:"relative flex-1 bg-white border border-slate-200 rounded-2xl hover:border-indigo-300 transition-colors shadow-sm group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-indigo-500 transition-colors",children:e.jsx(pt,{className:"w-4 h-4"})}),e.jsxs("select",{className:"w-full h-full pl-11 pr-8 bg-transparent outline-none text-slate-700 text-sm font-bold appearance-none cursor-pointer rounded-2xl",value:Nt,onChange:t=>tt(t.target.value),children:[e.jsx("option",{value:"all",children:"ทุกสถานะ (ดีล)"}),ie.map((t,a)=>e.jsx("option",{value:t.value,children:t.label},a))]}),e.jsx(He,{className:"w-4 h-4 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"})]}),e.jsxs("div",{className:"relative flex-1 bg-white border border-slate-200 rounded-2xl hover:border-indigo-300 transition-colors shadow-sm group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-indigo-500 transition-colors",children:e.jsx(De,{className:"w-4 h-4"})}),e.jsxs("select",{className:"w-full h-full pl-11 pr-8 bg-transparent outline-none text-slate-700 text-sm font-bold appearance-none cursor-pointer rounded-2xl",value:mt,onChange:t=>st(t.target.value),children:[e.jsx("option",{value:"all",children:"ขนส่ง (ทั้งหมด)"}),e.jsx("option",{value:"active_only",children:"กำลังดำเนินการ (Active)"})," ",ae.map((t,a)=>e.jsx("option",{value:t.value,children:t.label},a))]}),e.jsx(He,{className:"w-4 h-4 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"})]}),e.jsx("button",{onClick:fa,className:"px-5 bg-slate-100 text-slate-500 rounded-2xl font-bold hover:bg-rose-50 hover:text-rose-600 transition-colors flex items-center justify-center shadow-sm",title:"ล้างค่าตัวกรอง",children:e.jsx(gl,{className:"w-5 h-5"})})]})]})]}),vr=()=>{if(_){if(Dt&&de.length===0||!I||!R)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen w-full bg-slate-50",children:[e.jsx(_e,{className:"w-12 h-12 text-slate-400 animate-spin mb-4"}),e.jsx("p",{className:"text-slate-500 font-bold text-lg animate-pulse",children:"กำลังค้นหาข้อมูลพัสดุ..."})]});const d=de.find(H=>Zt(H.id,H.rawDateTime)===_);return d?e.jsx(en,{data:d,shopInfo:c,dealStatuses:ie,transportStatuses:ae}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen w-full bg-slate-50 px-4 text-center",children:[e.jsx("div",{className:"p-4 bg-slate-200 rounded-full text-slate-500 mb-4",children:e.jsx(Cs,{className:"w-12 h-12"})}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"ไม่พบข้อมูลงาน"}),e.jsxs("p",{className:"text-slate-500 mb-6",children:["รหัสติดตาม: ",e.jsx("span",{className:"font-mono font-bold text-indigo-600 break-all",children:_})," ไม่ถูกต้อง หรือถูกลบไปแล้ว"]})]})}if(w){if(Dt&&de.length===0||!I||!R)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen w-full bg-slate-50",children:[e.jsx(_e,{className:"w-12 h-12 text-slate-400 animate-spin mb-4"}),e.jsx("p",{className:"text-slate-500 font-bold text-lg animate-pulse",children:"กำลังโหลดใบเสนอราคา..."})]});const d=de.find(H=>Zt(H.id,H.rawDateTime)===w);return d?e.jsx(Zr,{data:d,shopInfo:c,dealStatuses:ie}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen w-full bg-slate-50 px-4 text-center",children:[e.jsx("div",{className:"p-4 bg-slate-200 rounded-full text-slate-500 mb-4",children:e.jsx(Ft,{className:"w-12 h-12"})}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"ไม่พบข้อมูลใบเสนอราคา"}),e.jsxs("p",{className:"text-slate-500 mb-6",children:["รหัสเอกสาร: ",e.jsx("span",{className:"font-mono font-bold text-indigo-600 break-all",children:w})," ไม่ถูกต้อง หรือถูกลบไปแล้ว"]})]})}if(!ne)return e.jsx(ln,{onLogin:Kl,isLoading:Dt,loginError:g,shopInfo:c});if(Dt&&de.length===0||!I)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-80px)] w-full",children:[e.jsx(_e,{className:"w-12 h-12 text-slate-400 animate-spin mb-4"}),e.jsx("p",{className:"text-slate-500 font-bold text-lg animate-pulse",children:"กำลังโหลดข้อมูล..."})]});const{currentRevenue:t,currentSupport:a,currentCost:l,currentProfit:i,totalProjects:r,completedProjects:f,activeProjects:o,pendingProjects:Y,issueProjects:j,declinedProjects:F,allExpensesList:U,maxExpense:ce,topPerformers:je,maxPerformerRevenue:Oe,topCustomers:Te,maxCustomerRevenue:ee,topCustomerByProjects:Le,maxCustomerProjectCount:Jt,categoryData:vs}=ir;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:W==="Overview"?"block space-y-8 px-4 sm:px-8 lg:px-10 pt-6 pb-24 md:pb-6":"hidden",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-extrabold text-slate-900 tracking-tight",children:["สวัสดี, ",b?.name?.split(" ")[0]||"User"]}),e.jsxs("p",{className:"text-slate-500 mt-2 text-base font-medium",children:["สรุปสถานะโครงการประจำวันที่ ",new Date().toLocaleDateString("th-TH")]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:dr.map((d,H)=>e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-[0_2px_20px_rgb(0,0,0,0.04)] border border-slate-100 hover:shadow-[0_8px_30px_rgb(0,0,0,0.06)] hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:`p-4 rounded-2xl ${d.bg} ${d.color}`,children:e.jsx(d.icon,{className:"w-7 h-7"})}),e.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-bold ${d.isPositive?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:[d.isPositive?e.jsx(ml,{className:"w-4 h-4"}):e.jsx(Qt,{className:"w-4 h-4"}),d.change]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 font-medium mb-2",children:d.title}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:d.value})]})]},H))}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-[0_2px_20px_rgb(0,0,0,0.04)] border border-slate-100 overflow-hidden p-2",children:[e.jsxs("div",{className:"px-8 py-6 flex items-center justify-between border-b border-slate-50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"บันทึกการดำเนินการล่าสุด"}),e.jsx("button",{onClick:()=>C("Plans"),className:"text-indigo-600 font-bold hover:text-indigo-700 text-sm transition bg-indigo-50 hover:bg-indigo-100 px-4 py-2 rounded-xl",children:"ดูประวัติทั้งหมด"})]}),wa(5,rl)]})]}),e.jsx("div",{className:W==="Calendar"?"block h-full":"hidden",children:e.jsx(Xr,{activities:de,onEventClick:d=>rt(d,!0),dealStatuses:ie,transportStatuses:ae})}),e.jsxs("div",{className:W==="Analytics"?"block space-y-8 flex flex-col min-h-full pb-24 md:pb-6":"hidden",children:[dl(),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 px-4 sm:px-8 lg:px-10",children:[e.jsxs("div",{className:"bg-emerald-50 p-6 rounded-[2rem] border border-emerald-100 shadow-sm relative overflow-hidden group hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-xl text-emerald-600 group-hover:scale-110 transition-transform",children:e.jsx(Da,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-lg font-bold text-emerald-700",children:"รายได้ (ค่าจ้าง)"})]}),e.jsxs("p",{className:"text-3xl font-black text-emerald-800",children:["฿",t.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-emerald-600 mt-1 font-medium",children:["จาก ",r," โครงการ"]})]}),e.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2rem] border border-slate-200 shadow-sm relative overflow-hidden group hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-slate-200 rounded-xl text-slate-600 group-hover:scale-110 transition-transform",children:e.jsx(_a,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"ลูกค้าซัพพอร์ต"})]}),e.jsxs("p",{className:"text-3xl font-black text-slate-800",children:["฿",a.toLocaleString()]}),e.jsx("p",{className:"text-sm text-slate-600 mt-1 font-medium",children:"ยอดสนับสนุนศิลปิน"})]}),e.jsxs("div",{className:"bg-rose-50 p-6 rounded-[2rem] border border-rose-100 shadow-sm relative overflow-hidden group hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-rose-100 rounded-xl text-rose-600 group-hover:scale-110 transition-transform",children:e.jsx(Qt,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-lg font-bold text-rose-700",children:"รวมรายจ่าย"})]}),e.jsxs("p",{className:"text-3xl font-black text-rose-800",children:["฿",l.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-rose-600 mt-1 font-medium",children:["Cost: ",t>0?(l/t*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"bg-indigo-50 p-6 rounded-[2rem] border border-indigo-100 shadow-sm relative overflow-hidden group hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-xl text-indigo-600 group-hover:scale-110 transition-transform",children:e.jsx(ml,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-lg font-bold text-indigo-700",children:"กำไรสุทธิ"})]}),e.jsxs("p",{className:"text-3xl font-black text-indigo-800",children:["฿",i.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-indigo-600 mt-1 font-medium",children:["Margin: ",t>0?(i/t*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4 px-4 sm:px-8 lg:px-10",children:[e.jsxs("div",{onClick:fa,className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center hover:border-indigo-200 hover:shadow-md hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-95",children:[e.jsx("div",{className:"mb-2 p-2 bg-slate-50 text-slate-500 rounded-full",children:e.jsx(cl,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-2xl font-black text-slate-800",children:r}),e.jsx("div",{className:"text-xs font-bold text-slate-500 mt-1",children:"โครงการทั้งหมด"})]}),e.jsxs("div",{onClick:()=>{tt("confirmed"),st("delivered")},className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center hover:border-emerald-200 hover:shadow-md hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-95",children:[e.jsx("div",{className:"mb-2 p-2 bg-emerald-50 text-emerald-500 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-2xl font-black text-emerald-600",children:f}),e.jsx("div",{className:"text-xs font-bold text-emerald-500 mt-1",children:"งานเสร็จสิ้น"})]}),e.jsxs("div",{onClick:()=>{tt("confirmed"),st("active_only")},className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center hover:border-blue-200 hover:shadow-md hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-95",children:[e.jsx("div",{className:"mb-2 p-2 bg-blue-50 text-blue-500 rounded-full",children:e.jsx(Xt,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-2xl font-black text-blue-600",children:o}),e.jsx("div",{className:"text-xs font-bold text-blue-500 mt-1",children:"กำลังดำเนินการ"})]}),e.jsxs("div",{onClick:()=>{tt("pending"),st("all")},className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center hover:border-amber-200 hover:shadow-md hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-95",children:[e.jsx("div",{className:"mb-2 p-2 bg-amber-50 text-amber-500 rounded-full",children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-2xl font-black text-amber-600",children:Y}),e.jsx("div",{className:"text-xs font-bold text-amber-500 mt-1",children:"รอดำเนินการ"})]}),e.jsxs("div",{onClick:()=>{tt("cancelled"),st("all")},className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center hover:border-rose-200 hover:shadow-md hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-95",children:[e.jsx("div",{className:"mb-2 p-2 bg-rose-50 text-rose-500 rounded-full",children:e.jsx(_t,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-2xl font-black text-rose-600",children:j}),e.jsx("div",{className:"text-xs font-bold text-rose-500 mt-1",children:"ยกเลิก/มีปัญหา"})]}),e.jsxs("div",{onClick:()=>{tt("declined"),st("all")},className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center hover:border-gray-200 hover:shadow-md hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-95",children:[e.jsx("div",{className:"mb-2 p-2 bg-gray-50 text-gray-400 rounded-full",children:e.jsx(Pr,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-2xl font-black text-gray-500",children:F}),e.jsx("div",{className:"text-xs font-bold text-gray-400 mt-1",children:"ลูกค้าไม่อนุมัติ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 px-4 sm:px-8 lg:px-10",children:[e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col max-h-[400px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 flex-shrink-0",children:e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"สัดส่วนค่าใช้จ่ายสูงสุด"})}),e.jsx("div",{className:"space-y-5 overflow-y-auto custom-scrollbar pr-2 flex-1",children:U.length>0?U.map((d,H)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1.5",children:[e.jsx("span",{className:"text-slate-600",children:d.category}),e.jsxs("span",{className:"text-slate-900",children:["฿",d.amount.toLocaleString()]})]}),e.jsx("div",{className:"w-full h-3 bg-slate-50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000 ease-out",style:{width:K?`${d.amount/ce*100}%`:"0%"}})})]},H)):e.jsx("div",{className:"text-center text-slate-400 py-10",children:"ไม่มีข้อมูลรายจ่าย"})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col items-center justify-center",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 self-start w-full",children:"สัดส่วนหมวดหมู่โครงการ"}),e.jsx(wr,{data:vs})]})]}),e.jsx("div",{className:"px-4 sm:px-8 lg:px-10 w-full",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 w-full",children:[e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col max-h-[400px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 flex-shrink-0",children:e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"อันดับศิลปินทำเงินสูงสุด (Top Artists Performers)"})}),e.jsx("div",{className:"space-y-5 overflow-y-auto custom-scrollbar pr-2 flex-1",children:je.length>0?je.map((d,H)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs shrink-0 ${H===0?"bg-yellow-100 text-yellow-700 ring-2 ring-yellow-200":H===1?"bg-slate-100 text-slate-700 ring-2 ring-slate-200":H===2?"bg-orange-100 text-orange-700 ring-2 ring-orange-200":"bg-slate-50 text-slate-500"}`,children:H<3?e.jsx(_r,{className:"w-4 h-4"}):H+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1.5",children:[e.jsx("span",{className:"text-slate-700 truncate w-32 md:w-56",children:d.name}),e.jsxs("span",{className:"text-emerald-600",children:["฿",d.amount.toLocaleString()]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-1000 ease-out",style:{width:K?`${d.amount/Oe*100}%`:"0%"}})})]})]},H)):e.jsx("div",{className:"text-center text-slate-400 py-10",children:"ไม่มีข้อมูลรายได้"})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col max-h-[400px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 flex-shrink-0",children:e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"อันดับลูกค้าทำเงินสูงสุด (Top Fan Performers)"})}),e.jsx("div",{className:"space-y-5 overflow-y-auto custom-scrollbar pr-2 flex-1",children:Te.length>0?Te.map((d,H)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs shrink-0 ${H===0?"bg-indigo-100 text-indigo-700 ring-2 ring-indigo-200":H===1?"bg-blue-100 text-blue-700 ring-2 ring-blue-200":H===2?"bg-sky-100 text-sky-700 ring-2 ring-sky-200":"bg-slate-50 text-slate-500"}`,children:H<3?e.jsx(hl,{className:"w-4 h-4"}):H+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1.5",children:[e.jsx("span",{className:"text-slate-700 truncate w-32 md:w-56",children:d.name}),e.jsxs("span",{className:"text-indigo-600",children:["฿",d.amount.toLocaleString()]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000 ease-out",style:{width:K?`${d.amount/ee*100}%`:"0%"}})})]})]},H)):e.jsx("div",{className:"text-center text-slate-400 py-10",children:"ไม่มีข้อมูลรายได้จากลูกค้า"})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col max-h-[400px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 flex-shrink-0",children:e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"อันดับลูกค้าจ้างงานสูงสุด (Top Customer Performers)"})}),e.jsx("div",{className:"space-y-5 overflow-y-auto custom-scrollbar pr-2 flex-1",children:Le.length>0?Le.map((d,H)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs shrink-0 ${H===0?"bg-purple-100 text-purple-700 ring-2 ring-purple-200":H===1?"bg-fuchsia-100 text-fuchsia-700 ring-2 ring-fuchsia-200":H===2?"bg-pink-100 text-pink-700 ring-2 ring-pink-200":"bg-slate-50 text-slate-500"}`,children:H<3?e.jsx(hl,{className:"w-4 h-4"}):H+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1.5",children:[e.jsx("span",{className:"text-slate-700 truncate w-32 md:w-56",children:d.name}),e.jsxs("span",{className:"text-purple-600",children:[d.count," งาน"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-1000 ease-out",style:{width:K?`${d.count/Jt*100}%`:"0%"}})})]})]},H)):e.jsx("div",{className:"text-center text-slate-400 py-10",children:"ไม่มีข้อมูลการจ้างงาน"})})]})]})}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden p-2 mx-4 sm:mx-8 lg:mx-10 mb-10",children:[e.jsxs("div",{className:"px-8 py-6 flex items-center justify-between border-b border-slate-50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"ข้อมูลแผนงาน (Filtered Data)"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>rt(),className:"p-2 text-slate-400 hover:text-indigo-600 rounded-lg hover:bg-indigo-50 transition",children:e.jsx(Ve,{className:"w-5 h-5"})})})]}),wa(0,Ce)]})]}),e.jsxs("div",{className:W==="Plans"?"block space-y-8 flex flex-col min-h-full pb-24 md:pb-6":"hidden",children:[dl(),e.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden p-2 mx-4 sm:mx-8 lg:mx-10 mb-10",children:[e.jsxs("div",{className:"px-8 py-6 flex items-center justify-between border-b border-slate-50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"แผนงานทั้งหมด"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>rt(),className:"p-2 text-slate-400 hover:text-indigo-600 rounded-lg hover:bg-indigo-50 transition",children:e.jsx(Ve,{className:"w-5 h-5"})})})]}),wa(0,Ce)]})]}),e.jsx("div",{className:W==="Settings"?"block space-y-8 px-4 sm:px-8 lg:px-10 pt-6 pb-24 md:pb-6":"hidden",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-slate-900 mb-6",children:"ตั้งค่าระบบ"}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden mb-8",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 relative",children:e.jsx("div",{className:"absolute right-6 top-6",children:e.jsxs("label",{className:`p-2 bg-white/20 backdrop-blur-md text-white rounded-xl hover:bg-white/30 transition shadow-sm cursor-pointer flex items-center justify-center ${J?"opacity-50 pointer-events-none":""}`,children:[J?e.jsx(_e,{className:"w-5 h-5 animate-spin"}):e.jsx(Ns,{className:"w-5 h-5"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>d.target.files[0]&&ha(d.target.files[0])})]})})}),e.jsx("div",{className:"px-8 pb-8",children:e.jsxs("div",{className:"flex flex-col items-center sm:items-start relative",children:[e.jsx("div",{className:"-mt-16 mb-6 relative z-10",children:e.jsxs("div",{className:"w-32 h-32 bg-white p-1.5 rounded-full shadow-2xl ring-4 ring-white/50 relative group",children:[e.jsxs("div",{className:"w-full h-full bg-slate-100 text-slate-600 rounded-full flex items-center justify-center text-4xl font-black border border-slate-200 overflow-hidden relative",children:[b?.image?e.jsx("img",{src:ge(b.image),alt:"Profile",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:d=>{d.target.onerror=null,d.target.style.display="none",d.target.parentElement.classList.add("bg-slate-200"),d.target.parentElement.innerHTML=`<span class="text-4xl text-slate-400">${b?.name?.charAt(0)||"U"}</span>`}}):b?.name?.charAt(0)||"U",e.jsxs("label",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-10",children:[e.jsx(Ns,{className:"w-8 h-8 text-white drop-shadow-md"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>d.target.files[0]&&ha(d.target.files[0])})]})]}),J&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 rounded-full z-20 backdrop-blur-sm",children:e.jsx(_e,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),e.jsxs("label",{className:`absolute bottom-0 left-0 p-2.5 bg-white text-indigo-600 rounded-full shadow-lg border border-slate-100 cursor-pointer hover:bg-indigo-50 transition-all z-30 ${J?"pointer-events-none opacity-80":""}`,children:[J?e.jsx(_e,{className:"w-5 h-5 animate-spin"}):e.jsx(Ns,{className:"w-5 h-5"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",disabled:J,onChange:d=>d.target.files[0]&&ha(d.target.files[0])})]}),b?.image&&!J&&e.jsx("button",{onClick:tr,className:"absolute bottom-0 right-0 p-2.5 bg-white text-rose-500 border border-slate-200 rounded-full shadow-md hover:bg-rose-50 hover:text-rose-600 transition-all z-30 group/delete",title:"ลบรูปโปรไฟล์",children:e.jsx(Me,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-6",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tight mb-1",children:b?.name||"Guest"}),e.jsx("p",{className:"text-lg text-slate-500 font-medium",children:b?.role||"No Role"})]}),e.jsxs("div",{className:"flex flex-col sm:items-end gap-2 w-full sm:w-auto",children:[b?.email&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-2xl border border-slate-100 w-full sm:w-auto",children:[e.jsx("div",{className:"p-2 bg-white rounded-xl shadow-sm text-indigo-500",children:e.jsx($s,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm font-bold text-slate-600 pr-2",children:b.email})]}),b?.phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-2xl border border-slate-100 w-full sm:w-auto",children:[e.jsx("div",{className:"p-2 bg-white rounded-xl shadow-sm text-emerald-500",children:e.jsx(it,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm font-bold text-slate-600 pr-2",children:b.phone})]})]})]})})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-5 h-5 text-indigo-600"}),"จัดการผู้ใช้งาน (User Management)"]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"space-y-4",children:u.map((d,H)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-slate-700 font-bold border border-slate-200 shadow-sm shrink-0 overflow-hidden relative",children:d.image?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:ge(d.image),alt:d.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:qe=>{qe.target.style.display="none",qe.target.nextSibling&&(qe.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"hidden absolute inset-0 w-full h-full items-center justify-center bg-white text-slate-700",children:d.name.charAt(0).toUpperCase()})]}):d.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-800 flex items-center gap-2",children:[d.username,e.jsx("span",{className:"text-xs font-normal text-slate-400 bg-white px-2 py-0.5 rounded-md border border-slate-100",children:d.role})]}),e.jsx("div",{className:"text-sm text-slate-500",children:d.name})]})]}),e.jsx("div",{className:"flex items-center gap-2 self-end sm:self-auto",children:e.jsx("button",{onClick:()=>Ql(d.username),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-xl transition",title:"ลบผู้ใช้",disabled:u.length<=1,children:e.jsx(Me,{className:"w-4 h-4"})})})]},H))}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-100",children:Ee?e.jsxs("div",{className:"bg-indigo-50/50 p-6 rounded-2xl border border-indigo-100 animate-in fade-in slide-in-from-top-2",children:[e.jsx("h4",{className:"font-bold text-indigo-900 mb-4",children:"เพิ่มผู้ใช้งานใหม่"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Username (สำหรับ Login)",value:T.username,onChange:d=>he({...T,username:d.target.value}),className:"px-4 py-2 bg-white border border-indigo-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),e.jsx("input",{type:"text",placeholder:"Password",value:T.password,onChange:d=>he({...T,password:d.target.value}),className:"px-4 py-2 bg-white border border-indigo-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),e.jsx("input",{type:"text",placeholder:"ชื่อ-นามสกุล",value:T.name,onChange:d=>he({...T,name:d.target.value}),className:"px-4 py-2 bg-white border border-indigo-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),e.jsx("input",{type:"text",placeholder:"ตำแหน่ง (Role)",value:T.role,onChange:d=>he({...T,role:d.target.value}),className:"px-4 py-2 bg-white border border-indigo-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),e.jsx("input",{type:"email",placeholder:"Email (Optional)",value:T.email,onChange:d=>he({...T,email:d.target.value}),className:"px-4 py-2 bg-white border border-indigo-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),e.jsx("input",{type:"tel",placeholder:"เบอร์โทร (Optional)",value:T.phone,onChange:d=>he({...T,phone:d.target.value}),className:"px-4 py-2 bg-white border border-indigo-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>ze(!1),className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-xl transition",children:"ยกเลิก"}),e.jsx("button",{onClick:Gl,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-sm transition",children:"บันทึก"})]})]}):e.jsxs("button",{onClick:()=>ze(!0),className:"w-full py-3 bg-indigo-50 text-indigo-600 font-bold rounded-xl hover:bg-indigo-100 transition flex items-center justify-center gap-2 border border-indigo-100",children:[e.jsx(Tr,{className:"w-5 h-5"}),"เพิ่มผู้ใช้งานใหม่"]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Lr,{className:"w-5 h-5 text-blue-600"}),"ตั้งค่า Google Drive"]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"โฟลเดอร์เก็บข้อมูลงาน (Work Data)"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"ระบุ Folder ID สำหรับเก็บรูปภาพงานและเอกสารโครงการ"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",placeholder:"Work Data Folder ID (e.g., 1xYz...)",value:$,onChange:d=>M(d.target.value),className:"w-full sm:flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all min-w-0"}),e.jsxs("button",{onClick:()=>ye("drive_folder_id",$),className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-sm transition flex items-center justify-center gap-2 shrink-0",children:[e.jsx(It,{className:"w-4 h-4"})," บันทึก"]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-100",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 mb-1 block flex items-center gap-2",children:["โฟลเดอร์เก็บไฟล์ตกแต่ง (Assets & Media)",e.jsx("span",{className:"bg-blue-100 text-blue-600 text-[10px] px-2 py-0.5 rounded-full",children:"New"})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"ระบุ Folder ID สำหรับเก็บ Logo ร้าน, รูปโปรไฟล์ผู้ใช้ และไฟล์ตกแต่ง UI อื่นๆ (แยกจากข้อมูลงาน)"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",placeholder:"Assets Folder ID (e.g., 1xYz...)",value:E,onChange:d=>se(d.target.value),className:"w-full sm:flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all min-w-0"}),e.jsx("button",{onClick:()=>ye("assets_drive_folder_id",E),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-sm transition shrink-0",children:"บันทึก ID"})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(pl,{className:"w-5 h-5 text-sky-600"}),"เชื่อมต่อ Chatbot AI (Access Tokens)"]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 ml-1 flex items-center gap-2",children:[e.jsx(Mr,{className:"w-4 h-4 text-[#06C755]"}),"LINE Channel Access Token"]}),e.jsx("input",{type:"text",placeholder:"วาง Long-lived Access Token จาก LINE Developers ที่นี่...",value:X,onChange:d=>ue(d.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-sky-500/20 transition-all font-mono"})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 ml-1 flex items-center gap-2",children:[e.jsx(Er,{className:"w-4 h-4 text-[#0088cc]"}),"Telegram Settings"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 ml-1",children:"Telegram Bot Token"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"text",placeholder:"วาง Token จาก BotFather (เช่น 12345:ABCdef...)",value:pe,onChange:d=>dt(d.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-sky-500/20 transition-all font-mono"}),e.jsxs("div",{className:"space-y-1 pt-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 ml-1",children:"Google Apps Script URL (Deploy Link สำหรับ Webhook)"}),e.jsx("input",{type:"text",placeholder:"https://script.google.com/macros/s/.../exec",value:bt,onChange:d=>Fs(d.target.value),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-xs focus:outline-none focus:ring-2 focus:ring-sky-500/20 transition-all font-mono text-slate-600"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[pe&&bt&&e.jsxs("a",{href:`https://api.telegram.org/bot${pe}/setWebhook?url=${bt}`,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-sky-50 text-sky-600 font-bold rounded-lg hover:bg-sky-100 transition flex items-center justify-center gap-2 text-xs border border-sky-100",title:"กด 1 ครั้งเพื่อเริ่มใช้งาน (Set Webhook)",children:[e.jsx(Ps,{className:"w-3.5 h-3.5"}),"เชื่อมต่อ Webhook"]}),pe&&e.jsxs("a",{href:`https://api.telegram.org/bot${pe}/deleteWebhook`,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-rose-50 text-rose-600 font-bold rounded-lg hover:bg-rose-100 transition flex items-center justify-center gap-2 text-xs border border-rose-100",title:"กดเมื่อบอทค้าง หรือส่งรัวๆ",children:[e.jsx(Me,{className:"w-3.5 h-3.5"}),"ยกเลิก Webhook"]})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 ml-1",children:"Telegram Chat ID (สำหรับแจ้งเตือน Admin)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"ระบุ Chat ID (เช่น -100xxxx หรือ User ID)",value:ct,onChange:d=>Ne(d.target.value),className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-sky-500/20 transition-all font-mono"}),e.jsxs("button",{onClick:Jl,className:"px-4 py-2 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-sky-50 hover:text-sky-600 hover:border-sky-100 transition flex items-center justify-center gap-2 text-xs border border-slate-200 whitespace-nowrap",title:"ดึง ID ล่าสุดที่ทักบอทมา",children:[e.jsx(pl,{className:"w-4 h-4"}),"ดึง ID ล่าสุด"]})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 ml-1",children:["*วิธีใช้: ทักบอทด้วยคำว่า ",e.jsx("code",{children:"/id"}),' แล้วกดปุ่ม "ดึง ID ล่าสุด" ระบบจะใส่เลขให้อัตโนมัติ']})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-slate-100",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 ml-1 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-indigo-600"}),"ลิงก์หน้าเว็บของคุณ (Web App URL)"]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsx("input",{type:"url",placeholder:"เช่น https://flower2youlukyee.vercel.app",value:Ae,onChange:d=>Mt(d.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all"})}),e.jsx("p",{className:"text-[10px] text-slate-400 ml-1",children:'*สำคัญ: ระบุ URL ของเว็บไซต์นี้ เพื่อให้บอทสร้างปุ่ม "ดูสถานะงาน" ได้ถูกต้อง'})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-100 flex justify-end",children:e.jsxs("button",{onClick:()=>ye({line_bot_token:X,telegram_bot_token:pe,telegram_chat_id:ct,web_app_url:Ae}),className:"px-6 py-3 bg-sky-600 text-white font-bold rounded-xl hover:bg-sky-700 shadow-sm transition flex items-center justify-center gap-2 shrink-0",children:[e.jsx(It,{className:"w-4 h-4"})," บันทึกการตั้งค่า Chatbot"]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Fl,{className:"w-5 h-5 text-indigo-600"}),"ข้อมูลติดต่อร้านค้า (Shop Contact)"]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"sm:col-span-2 flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-24 h-24 rounded-2xl bg-white border-2 border-dashed border-slate-200 flex items-center justify-center overflow-hidden hover:border-indigo-300 transition-colors relative shadow-sm cursor-pointer",children:[c.logo?e.jsx("img",{src:ge(c.logo),alt:"Shop Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:d=>{d.target.style.display="none",d.target.nextSibling.style.display="flex"}}):null,e.jsxs("div",{className:`flex-col items-center justify-center text-slate-400 ${c.logo?"hidden":"flex"}`,children:[be?e.jsx(_e,{className:"w-6 h-6 animate-spin text-indigo-500"}):e.jsx(Ca,{className:"w-8 h-8 opacity-50"}),e.jsx("span",{className:"text-[10px] font-bold mt-1 text-slate-300",children:be?"...":"LOGO"})]}),e.jsxs("label",{className:"absolute inset-0 bg-black/40 flex flex-col items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-10",children:[e.jsx(Ns,{className:"w-6 h-6 mb-1 drop-shadow-md"}),e.jsx("span",{className:"text-[10px] font-bold drop-shadow-md",children:"เปลี่ยนรูป"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>d.target.files[0]&&ar(d.target.files[0]),disabled:be})]})]}),c.logo&&e.jsx("button",{onClick:lr,className:"absolute -bottom-2 -right-2 p-1.5 bg-white text-rose-500 border border-slate-200 rounded-full shadow-md hover:bg-rose-50 hover:text-rose-600 transition-all z-20 group/delete",title:"ลบโลโก้",children:e.jsx(Me,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"space-y-1 sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"ชื่อร้านค้า"}),e.jsx("input",{type:"text",placeholder:"ชื่อร้านของคุณ",value:c.shopName||"",onChange:d=>D({...c,shopName:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1 sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"เลขประจำตัวผู้เสียภาษี (Tax ID)"}),e.jsx("input",{type:"text",placeholder:"เลขผู้เสียภาษีร้านค้า...",value:c.taxId||"",onChange:d=>D({...c,taxId:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"เบอร์โทรศัพท์"}),e.jsx("input",{type:"tel",placeholder:"เบอร์โทรร้าน",value:c.phone,onChange:d=>D({...c,phone:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"อีเมล"}),e.jsx("input",{type:"email",placeholder:"อีเมลร้าน",value:c.email,onChange:d=>D({...c,email:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1 sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"ที่อยู่ / สำนักงาน"}),e.jsx("textarea",{rows:2,placeholder:"ที่อยู่ร้านค้า...",value:c.address,onChange:d=>D({...c,address:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 resize-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 ml-1 flex items-center gap-1",children:[e.jsx(Tl,{className:"w-3 h-3 text-[#06C755]"})," Line URL"]}),e.jsx("input",{type:"text",placeholder:"https://line.me/ti/p/...",value:c.line,onChange:d=>D({...c,line:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 ml-1 flex items-center gap-1",children:[e.jsx(Dl,{className:"w-3 h-3 text-[#1877F2]"})," Facebook URL"]}),e.jsx("input",{type:"text",placeholder:"https://facebook.com/...",value:c.facebook,onChange:d=>D({...c,facebook:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 ml-1 flex items-center gap-1",children:[e.jsx($l,{className:"w-3 h-3 text-[#C13584]"})," Instagram URL"]}),e.jsx("input",{type:"text",placeholder:"https://instagram.com/...",value:c.instagram,onChange:d=>D({...c,instagram:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 ml-1 flex items-center gap-1",children:[e.jsx(Il,{className:"w-3 h-3 text-black"})," TikTok URL"]}),e.jsx("input",{type:"text",placeholder:"https://tiktok.com/@...",value:c.tiktok,onChange:d=>D({...c,tiktok:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 ml-1 flex items-center gap-1",children:[e.jsx(Ll,{className:"w-3 h-3 text-black"})," Twitter (X) URL"]}),e.jsx("input",{type:"text",placeholder:"https://x.com/...",value:c.twitter||"",onChange:d=>D({...c,twitter:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 ml-1 flex items-center gap-1",children:[e.jsx(Ml,{className:"w-3 h-3 text-[#07C160]"})," WeChat URL / ID"]}),e.jsx("input",{type:"text",placeholder:"WeChat ID หรือ Link",value:c.wechat||"",onChange:d=>D({...c,wechat:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 ml-1 flex items-center gap-1",children:[e.jsx(El,{className:"w-3 h-3 text-[#0088cc]"})," Telegram Contact URL"]}),e.jsx("input",{type:"text",placeholder:"https://t.me/...",value:c.telegram||"",onChange:d=>D({...c,telegram:d.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>ye("shop_info",c),disabled:V||be,className:`px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-sm transition flex items-center justify-center gap-2 ${V||be?"opacity-50 cursor-not-allowed":"hover:bg-indigo-700"}`,children:[be?e.jsx(_e,{className:"w-4 h-4 animate-spin"}):e.jsx(It,{className:"w-4 h-4"}),be?"กำลังอัปโหลด...":"บันทึกข้อมูล"]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Pl,{className:"w-5 h-5 text-indigo-600"}),"ปรับแต่งธีม (Theme & Appearance)"]}),e.jsx("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-3 block",children:"เลือกสีหลัก (Primary Color)"}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[Object.entries(Sa).map(([d,H])=>e.jsx("button",{onClick:()=>D({...c,themeColor:d}),className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${c.themeColor===d?"ring-4 ring-offset-2 ring-slate-200 scale-110 shadow-md":"hover:scale-105 hover:shadow-sm opacity-80 hover:opacity-100"}`,style:{background:d==="rainbow"?"linear-gradient(135deg, #ef4444, #eab308, #3b82f6, #a855f7)":H.main},title:H.label,children:c.themeColor===d&&e.jsx(ft,{className:"w-6 h-6 text-white drop-shadow-sm",strokeWidth:3})},d)),e.jsx("div",{className:"w-px h-8 bg-slate-200 mx-1"}),e.jsxs("div",{className:"relative group",children:[e.jsxs("label",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-all cursor-pointer shadow-sm relative overflow-hidden ${c.themeColor==="custom"?"ring-4 ring-offset-2 ring-slate-200 scale-110":"hover:scale-105 hover:shadow-md border border-slate-100"}`,style:{background:c.themeColor==="custom"?c.customColorValue:"conic-gradient(from 90deg, #FF0000, #FFFF00, #00FF00, #00FFFF, #0000FF, #FF00FF, #FF0000)"},title:"สีที่กำหนดเอง (Custom)",children:[e.jsx("input",{type:"color",className:"absolute inset-0 opacity-0 w-full h-full cursor-pointer z-10",value:c.customColorValue||"#000000",onChange:d=>D({...c,themeColor:"custom",customColorValue:d.target.value})}),e.jsx("div",{className:`pointer-events-none z-0 ${c.themeColor==="custom"?"text-white drop-shadow-md":"text-slate-700 bg-white/80 p-2 rounded-full backdrop-blur-sm shadow-sm"}`,children:c.themeColor==="custom"?e.jsx(ft,{className:"w-6 h-6",strokeWidth:3}):e.jsx(Ar,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-20",children:"กำหนดเอง"})]})]})]}),e.jsx("div",{className:"w-full h-px bg-slate-100"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-3 block",children:"รูปแบบการแสดงผล (Display Mode)"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>D({...c,themeMode:"gradient"}),className:`flex-1 py-4 px-4 rounded-xl border-2 transition-all flex items-center justify-center gap-2 font-bold ${c.themeMode==="gradient"?"border-indigo-600 bg-indigo-50 text-indigo-600":"border-slate-100 bg-white text-slate-500 hover:border-slate-200"}`,children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-r from-indigo-600 to-violet-600"}),"ไล่เฉดสี (Gradient)"]}),e.jsxs("button",{onClick:()=>D({...c,themeMode:"solid"}),className:`flex-1 py-4 px-4 rounded-xl border-2 transition-all flex items-center justify-center gap-2 font-bold ${c.themeMode==="solid"?"border-indigo-600 bg-indigo-50 text-indigo-600":"border-slate-100 bg-white text-slate-500 hover:border-slate-200"}`,children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600"}),"สีเดียว (Solid)"]})]})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:()=>ye("shop_info",c),className:"px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-sm transition flex items-center justify-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"})," บันทึกธีม"]})})]})})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"ตั้งค่าตัวเลือกระบบ (System Options)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(jl,{title:"หมวดหมู่โครงการ",items:Z,onAdd:d=>oe([...Z,d]),onDelete:d=>oe(Z.filter((H,qe)=>qe!==d)),placeholder:"เพิ่มหมวดหมู่...",icon:Kt,onSave:d=>ye("project_categories",d)}),e.jsx(jl,{title:"หมวดหมู่ค่าใช้จ่าย",items:Pe,onAdd:d=>Ze([...Pe,d]),onDelete:d=>Ze(Pe.filter((H,qe)=>qe!==d)),placeholder:"เพิ่มหมวดหมู่ค่าใช้จ่าย...",icon:Da,onSave:d=>ye("expense_categories",d)}),e.jsx(wl,{title:"สถานะดีล (Deal Status)",items:ie,onUpdate:Ue,placeholder:"เพิ่มสถานะดีล...",icon:pt,onSave:d=>ye("deal_statuses",d)}),e.jsx(wl,{title:"สถานะขนส่ง (Transport)",items:ae,onUpdate:We,placeholder:"เพิ่มสถานะขนส่ง...",icon:De,onSave:d=>ye("transport_statuses",d)})]}),e.jsx("div",{className:"pt-8 mt-8 border-t border-slate-100 flex flex-col-reverse sm:flex-row justify-between gap-4",children:e.jsxs("button",{onClick:al,className:"px-6 py-3.5 text-rose-600 font-bold bg-white border border-rose-100 hover:bg-rose-50 rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(xl,{className:"w-5 h-5"}),e.jsx("span",{children:"ออกจากระบบ"})]})})]})})]})};return e.jsxs("div",{className:"flex h-screen bg-[#F8FAFC] font-sans text-slate-800 overflow-hidden selection:bg-indigo-100 selection:text-indigo-900",children:[e.jsx("style",{children:`
        @keyframes modalEnter {
          0% { opacity: 0; transform: scale(0.95) translateY(10px); filter: blur(2px); }
          100% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
        }
        @keyframes modalExit {
          0% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
          100% { opacity: 0; transform: scale(0.95) translateY(10px); filter: blur(2px); }
        }
        @keyframes fadeOut {
          from { opacity: 1; }
          to { opacity: 0; }
        }
        .modal-animate-in {
          animation: modalEnter 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        .modal-animate-out {
          animation: modalExit 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        .backdrop-animate-out {
          animation: fadeOut 0.3s forwards;
        }
        .no-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .no-scrollbar {
          -ms-overflow-style: none;  /* IE and Edge */
          scrollbar-width: none;  /* Firefox */
        }
        .safe-area-bottom {
          padding-bottom: env(safe-area-inset-bottom);
        }
        /* Fix for Modal Footer to have proper spacing above Safe Area */
        .safe-area-bottom-modal {
          padding-bottom: calc(1rem + env(safe-area-inset-bottom));
        }

        /* --- Space-Themed Staggered Animation (New) --- */
        @keyframes spaceRowEnter {
          0% {
            opacity: 0;
            transform: translateY(20px); /* เลื่อนขึ้นจากด้านล่าง */
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .space-row-animation {
          opacity: 0; /* เริ่มต้นซ่อนไว้เพื่อรอ Animation */
          animation: spaceRowEnter 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; /* ปรับจังหวะให้นุ่มนวล */
          will-change: transform, opacity;
        }
        /* ------------------------------------------------ */
      `}),V&&e.jsx(an,{}),Q.show&&e.jsx(sn,{message:Q.message,type:Q.type,onClose:Xl}),Ga&&e.jsx(Ta,{src:ge(Ga),onClose:()=>As(null)}),za&&e.jsx(tn,{data:za,shopInfo:c,onClose:()=>ss(null)}),ne&&!_&&!w&&e.jsxs("aside",{className:`hidden md:flex flex-col ${h?"w-20":"w-72"} bg-white border-r border-slate-100 shadow-[4px_0_24px_rgba(0,0,0,0.02)] z-20 transition-all duration-300 relative`,children:[e.jsx("button",{onClick:()=>N(!h),className:"absolute -right-3 top-1/2 -translate-y-1/2 p-1.5 bg-white border border-slate-200 rounded-full shadow-sm text-slate-400 hover:text-indigo-600 transition-colors z-50",children:h?e.jsx(Ia,{className:"w-4 h-4"}):e.jsx(kl,{className:"w-4 h-4"})}),e.jsxs("div",{className:`p-6 pb-4 flex items-center ${h?"justify-center":"gap-3"}`,children:[e.jsxs("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center shrink-0 overflow-hidden relative ${c.logo?"":"bg-indigo-600 shadow-lg shadow-indigo-200"}`,children:[c.logo?e.jsx("img",{src:ge(c.logo),alt:"App Logo",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:t=>{t.target.style.display="none",t.target.nextSibling&&(t.target.nextSibling.style.display="flex"),t.target.parentElement.classList.add("bg-indigo-600","shadow-lg","shadow-indigo-200")}}):null,e.jsx("div",{className:`w-full h-full flex items-center justify-center ${c.logo?"hidden":"flex"}`,children:e.jsx(Ds,{className:"w-6 h-6 text-white"})})]}),!h&&e.jsx("h1",{className:"text-2xl font-black bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent tracking-tight whitespace-nowrap overflow-hidden",children:c.shopName||"ProjectPlan"})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:nt.map(t=>e.jsxs("button",{onClick:()=>C(t.name),className:`w-full flex items-center ${h?"justify-center px-2":"gap-4 px-6"} py-4 text-sm font-bold rounded-[1.2rem] transition-all duration-300 group ${W===t.name?"bg-indigo-600 text-white shadow-xl shadow-indigo-200 scale-100":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,title:h?t.label:"",children:[e.jsx(t.icon,{className:`w-5 h-5 transition-transform group-hover:scale-110 ${W===t.name?"text-white":"text-slate-400 group-hover:text-slate-600"}`}),!h&&e.jsx("span",{children:t.label})]},t.name))}),e.jsx("div",{className:"p-4 border-t border-slate-50",children:e.jsxs("div",{className:`flex items-center ${h?"justify-center":"gap-4"} cursor-pointer p-2 sm:p-4 rounded-[1.5rem] bg-slate-50 hover:bg-white hover:shadow-lg hover:shadow-slate-100 transition-all duration-300 border border-transparent hover:border-slate-100`,children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-slate-900 flex items-center justify-center text-white text-xs font-bold ring-4 ring-white shadow-md shrink-0 overflow-hidden",children:[b?.image?e.jsx("img",{src:ge(b.image),alt:"Profile",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:t=>{t.target.style.display="none",t.target.nextSibling.style.display="flex"}}):b?.name?.charAt(0)||"U",b?.image&&e.jsx("div",{className:"hidden w-full h-full items-center justify-center bg-slate-900 text-white",children:b?.name?.charAt(0)||"U"})]}),!h&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:b?.name||"Guest User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate font-medium",children:b?.role||"Viewer"})]})]})})]}),ne&&!_&&!w&&e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-xl border-t border-slate-200 z-50 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] safe-area-bottom pb-safe",children:e.jsxs("div",{className:"relative grid grid-cols-5 h-16 items-center",children:[e.jsx("div",{className:"absolute top-2 bottom-2 bg-indigo-50 rounded-full transition-all duration-300 cubic-bezier(0.4, 0, 0.2, 1)",style:{left:`${nt.findIndex(t=>t.name===W)<2?nt.findIndex(t=>t.name===W)*20+10:(nt.findIndex(t=>t.name===W)+1)*20+10}%`,width:"48px",transform:"translateX(-50%)"}}),nt.slice(0,2).map(t=>{const a=W===t.name;return e.jsx("button",{onClick:()=>C(t.name),className:"relative flex flex-col items-center justify-center h-full w-full group cursor-pointer outline-none z-10",children:e.jsx("div",{className:`transition-all duration-300 ${a?"text-indigo-600 scale-110":"text-slate-400"}`,children:e.jsx(t.icon,{className:`w-6 h-6 ${a?"fill-indigo-600/20":""}`,strokeWidth:a?2.5:2})})},t.name)}),e.jsx("div",{className:"relative -top-6 flex justify-center z-20 pointer-events-none",children:e.jsx("button",{onClick:()=>rt(),className:"w-14 h-14 bg-indigo-600 rounded-full text-white shadow-lg shadow-indigo-200 flex items-center justify-center transform active:scale-95 transition-all border-4 border-[#F8FAFC] pointer-events-auto",children:e.jsx(Ve,{className:"w-7 h-7"})})}),nt.slice(2,4).map(t=>{const a=W===t.name;return e.jsx("button",{onClick:()=>C(t.name),className:"relative flex flex-col items-center justify-center h-full w-full group cursor-pointer outline-none z-10",children:e.jsx("div",{className:`transition-all duration-300 ${a?"text-indigo-600 scale-110":"text-slate-400"}`,children:e.jsx(t.icon,{className:`w-6 h-6 ${a?"fill-indigo-600/20":""}`,strokeWidth:a?2.5:2})})},t.name)})]})}),e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[ne&&!_&&!w&&e.jsxs("header",{className:"h-20 bg-white/80 backdrop-blur-xl border-b border-slate-100 flex items-center justify-between px-6 sm:px-8 z-50 sticky top-0",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("h1",{className:"text-2xl font-extrabold text-slate-900 tracking-tight",children:Zl(W)})}),e.jsx("div",{className:"hidden md:flex",children:e.jsxs("button",{onClick:()=>rt(),className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 hover:-translate-y-0.5 transition-all flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"เพิ่มรายการ"})]})}),e.jsxs("div",{className:"md:hidden relative",children:[e.jsx("button",{onClick:()=>p(!S),className:"w-8 h-8 rounded-full bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-700 text-xs font-bold shadow-sm active:scale-95 transition-all hover:bg-slate-200 overflow-hidden",children:b?.image?e.jsx("img",{src:ge(b.image),alt:"Profile",className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:t=>{t.target.style.display="none",t.target.parentElement.innerText=b?.name?.charAt(0)||"U"}}):b?.name?b.name.charAt(0).toUpperCase():e.jsx(Ke,{className:"w-4 h-4"})}),S&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),e.jsxs("div",{className:"absolute right-0 top-12 bg-white rounded-xl shadow-xl border border-slate-100 p-1.5 min-w-[160px] z-20 animate-in fade-in zoom-in-95 origin-top-right flex flex-col gap-1",children:[e.jsxs("div",{className:"px-2 py-2 border-b border-slate-50 mb-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-800 truncate",children:b?.name}),e.jsx("p",{className:"text-[10px] text-slate-500 truncate",children:b?.role})]}),e.jsxs("button",{onClick:()=>{C("Settings"),p(!1)},className:"w-full flex items-center gap-2 p-2 rounded-lg hover:bg-slate-50 text-slate-700 text-xs font-bold transition-colors text-left",children:[e.jsx("div",{className:"p-1 bg-slate-100 rounded-md text-slate-600",children:e.jsx(yl,{className:"w-3.5 h-3.5"})}),e.jsx("span",{children:"ตั้งค่า"})]}),e.jsxs("button",{onClick:()=>{p(!1),al()},className:"w-full flex items-center gap-2 p-2 rounded-lg hover:bg-rose-50 text-rose-600 text-xs font-bold transition-colors text-left",children:[e.jsx("div",{className:"p-1 bg-rose-100 rounded-md text-rose-500",children:e.jsx(xl,{className:"w-3.5 h-3.5"})}),e.jsx("span",{children:"ออกจากระบบ"})]})]})]})]})]}),e.jsx("main",{ref:na,className:"flex-1 overflow-y-auto bg-[#F8FAFC]",onScroll:er,children:e.jsx("div",{className:"max-w-[3840px] mx-auto min-h-full flex flex-col",children:vr()})})]}),wt.show&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[e.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm ${Ra?"backdrop-animate-out":"backdrop-animate-in"}`,onClick:ba}),e.jsx("div",{className:`bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm relative z-10 ${Ra?"modal-animate-out":"modal-animate-in"}`,children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"p-3 bg-rose-100 text-rose-600 rounded-full",children:e.jsx(_t,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"ยืนยันการลบ?"}),e.jsx("p",{className:"text-sm text-slate-500",children:"คุณต้องการลบรายการนี้ใช่หรือไม่? การกระทำนี้ไม่สามารถย้อนกลับได้"})]}),e.jsxs("div",{className:"flex gap-3 w-full mt-2",children:[e.jsx("button",{onClick:ba,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition",children:"ยกเลิก"}),e.jsx("button",{onClick:hr,className:"flex-1 py-2.5 bg-rose-600 text-white font-bold rounded-xl hover:bg-rose-700 transition shadow-lg shadow-rose-200",children:"ยืนยันลบ"})]})]})})]}),zl&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[e.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm ${Wa?"backdrop-animate-out":"backdrop-animate-in"}`,onClick:ua}),e.jsx("div",{className:`bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm relative z-10 ${Wa?"modal-animate-out":"modal-animate-in"}`,children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"p-3 bg-rose-100 text-rose-600 rounded-full",children:e.jsx(_t,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"ยืนยันลบรูปร้านค้า?"}),e.jsx("p",{className:"text-sm text-slate-500",children:"คุณต้องการลบโลโก้ร้านค้านี้ใช่หรือไม่?"})]}),e.jsxs("div",{className:"flex gap-3 w-full mt-2",children:[e.jsx("button",{onClick:ua,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition",children:"ยกเลิก"}),e.jsx("button",{onClick:rr,className:"flex-1 py-2.5 bg-rose-600 text-white font-bold rounded-xl hover:bg-rose-700 transition shadow-lg shadow-rose-200",children:"ลบรูป"})]})]})})]}),Ul&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[e.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm ${Va?"backdrop-animate-out":"backdrop-animate-in"}`,onClick:pa}),e.jsx("div",{className:`bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm relative z-10 ${Va?"modal-animate-out":"modal-animate-in"}`,children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"p-3 bg-rose-100 text-rose-600 rounded-full",children:e.jsx(_t,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"ยืนยันลบรูปโปรไฟล์?"}),e.jsx("p",{className:"text-sm text-slate-500",children:"คุณต้องการลบรูปโปรไฟล์นี้ใช่หรือไม่?"})]}),e.jsxs("div",{className:"flex gap-3 w-full mt-2",children:[e.jsx("button",{onClick:pa,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition",children:"ยกเลิก"}),e.jsx("button",{onClick:sr,className:"flex-1 py-2.5 bg-rose-600 text-white font-bold rounded-xl hover:bg-rose-700 transition shadow-lg shadow-rose-200",children:"ลบรูป"})]})]})})]}),Ls&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-md ${Ea?"backdrop-animate-out":"backdrop-animate-in"}`,onClick:bs}),e.jsxs("div",{className:`bg-white w-full max-w-4xl sm:rounded-[2.5rem] rounded-xl shadow-2xl relative z-10 overflow-hidden border border-slate-100 flex flex-col max-h-[90vh] ${Ea?"modal-animate-out":"modal-animate-in"}`,children:[e.jsxs("div",{className:"px-4 py-4 sm:px-8 sm:py-6 border-b border-slate-100 flex justify-between items-center bg-white sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-indigo-50 text-indigo-600 rounded-xl sm:rounded-2xl",children:e.jsx(pt,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-black text-slate-900 tracking-tight",children:jt?B?"รายละเอียด":"แก้ไขรายการ":"เพิ่มรายการ"}),ls&&e.jsx("span",{className:"bg-indigo-50 text-indigo-600 text-[10px] sm:text-xs px-2 py-0.5 sm:py-1 rounded-lg font-bold border border-indigo-100 w-fit",children:ls})]}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium hidden sm:block",children:B?"ดูข้อมูลและจัดการต้นทุน":"กรอกข้อมูลรายละเอียดโครงการ"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[jt&&e.jsxs("button",{onClick:()=>{ss({id:ls,name:Hs,rawDateTime:rs,artist:Bs,customer:yt,customerInfo:{social:ns,line:os,phone:zt,email:Rt,taxId:Ht},rawDeliveryStart:Bt,rawDeliveryEnd:Be,rawDeliveryDateTime:Be,location:Zs,mapLink:ms,recipient:Ks,recipientPhone:cs,image:at,wage:Yl,quotationItems:Se,customerSupport:Re,dealStatus:us,transportStatus:ps})},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-xl transition-colors flex items-center gap-2 group",title:"แชร์ข้อมูลให้ลูกค้า",children:[e.jsx(ks,{className:"w-5 h-5 sm:w-6 sm:h-6"}),e.jsx("span",{className:"text-xs font-bold hidden sm:inline",children:"แชร์"})]}),e.jsx("button",{onClick:bs,className:"p-2 hover:bg-slate-100 text-slate-400 hover:text-slate-600 rounded-xl transition-colors",children:e.jsx(ts,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-8 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-100",children:[e.jsx("span",{className:"bg-slate-900 text-white w-6 h-6 rounded-lg flex items-center justify-center text-xs font-bold",children:"1"}),e.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"งาน/โปรเจค"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"ชื่อโครงการ/แผนงาน"}),e.jsx("input",{type:"text",value:Hs,disabled:B,onChange:t=>Ws(t.target.value),className:`w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"วันที่ & เวลา"}),e.jsx(Qe,{value:rs,onChange:t=>Ys(t.target.value),placeholder:"เลือกวันและเวลา...",disabled:B})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"ศิลปิน"}),e.jsx("input",{type:"text",list:"artist-list",placeholder:"เลือกหรือพิมพ์...",value:Bs,disabled:B,onChange:t=>Vs(t.target.value),className:`w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"ลูกค้า"}),e.jsx("input",{type:"text",list:"customer-list",placeholder:"ชื่อลูกค้า (พิมพ์เพื่อค้นหา)",value:yt,disabled:B,onChange:cr,className:`w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium mb-3 ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"IG / FB / TT",value:ns,disabled:B,onChange:t=>At(t.target.value),className:`px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`}),e.jsx("input",{type:"text",placeholder:"LINE ID",value:os,disabled:B,onChange:t=>Ot(t.target.value),className:`px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`}),B?e.jsx(Pt,{value:zt,type:"tel",icon:it}):e.jsx("input",{type:"tel",placeholder:"0xx-xxx-xxxx",value:zt,onChange:t=>Ut($t(t.target.value)),className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",maxLength:12}),B?e.jsx(Pt,{value:Rt,type:"email",icon:$s}):e.jsx("input",{type:"email",placeholder:"อีเมล",value:Rt,onChange:t=>qt(t.target.value),className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"}),B?e.jsx("div",{className:"sm:col-span-2",children:e.jsx(Pt,{value:Ht,type:"text",icon:Ft})}):e.jsx("input",{type:"text",placeholder:"เลขประจำตัวผู้เสียภาษี (Tax ID)",value:Ht,onChange:t=>Wt(t.target.value),className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 sm:col-span-2"}),B?e.jsx("div",{className:"sm:col-span-2",children:e.jsx(Pt,{value:is,type:"text",icon:ut})}):e.jsx("textarea",{rows:2,placeholder:"ที่อยู่ลูกค้า (แสดงบนใบเสร็จ)",value:is,onChange:t=>Yt(t.target.value),className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 sm:col-span-2 resize-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"หมวดหมู่"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:Za,disabled:B,onChange:t=>Gs(t.target.value),className:`w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-medium appearance-none cursor-pointer ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`,children:Z.map((t,a)=>e.jsx("option",{value:t,children:t},a))}),e.jsx("div",{className:"absolute right-4 top-3.5 pointer-events-none opacity-50",children:e.jsx(He,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"สถานะ (ดีล)"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:us,disabled:B,onChange:t=>ra(t.target.value),className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all font-bold appearance-none cursor-pointer ${da(us).color} ${B?"opacity-70 cursor-not-allowed":""}`,children:ie.map((t,a)=>e.jsx("option",{value:t.value,children:t.label},a))}),e.jsx("div",{className:"absolute right-4 top-3.5 pointer-events-none opacity-50",children:e.jsx(He,{className:"w-5 h-5"})})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-100",children:[e.jsx("span",{className:"bg-slate-900 text-white w-6 h-6 rounded-lg flex items-center justify-center text-xs font-bold",children:"2"}),e.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"กำหนดส่ง & สถานที่ & รูปภาพ"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"กำหนดส่ง (เริ่ม - สิ้นสุด)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Qe,{value:Bt,onChange:t=>{if(Qs(t.target.value),t.target.value){const a=new Date(t.target.value);if(!isNaN(a.getTime())){const l=new Date(a.getTime()+36e5),i=l.getTimezoneOffset()*6e4,r=new Date(l.getTime()-i).toISOString().slice(0,16);ds(r)}}},placeholder:"เริ่ม...",disabled:B}),e.jsx(Qe,{value:Be,onChange:t=>ds(t.target.value),placeholder:"สิ้นสุด...",disabled:B})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"สถานที่"}),e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"absolute left-4 top-3.5 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"ระบุชื่อสถานที่",value:Zs,disabled:B,onChange:t=>ea(t.target.value),className:`w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"Google Maps Link"}),B?e.jsx(Pt,{value:ms,type:"url",icon:ut}):e.jsx("input",{type:"url",placeholder:"https://maps.google.com/...",value:ms,onChange:t=>ta(t.target.value),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium text-blue-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"ผู้รับ"}),e.jsx("input",{type:"text",list:"recipient-list",placeholder:"ชื่อผู้รับ (พิมพ์เพื่อค้นหา)",value:Ks,disabled:B,onChange:xr,className:`w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-medium ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"เบอร์โทรผู้รับ"}),B?e.jsx(Pt,{value:cs,type:"tel",icon:it}):e.jsx("input",{type:"tel",value:cs,onChange:t=>xs($t(t.target.value)),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-medium",placeholder:"0xx-xxx-xxxx",maxLength:12})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"สถานะงาน (ขนส่ง)"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:ps,disabled:B,onChange:t=>la(t.target.value),className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all font-bold appearance-none cursor-pointer ${ca(ps).color} ${B?"opacity-70 cursor-not-allowed":""}`,children:ae.map((t,a)=>e.jsx("option",{value:t.value,children:t.label},a))}),e.jsx("div",{className:"absolute right-4 top-3.5 pointer-events-none opacity-50",children:e.jsx(He,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-100",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"รูปภาพอ้างอิง"}),B?at?e.jsxs("div",{className:"w-full h-64 rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-slate-50 cursor-zoom-in relative group",onClick:()=>As(at),children:[e.jsx("img",{src:ge(at),alt:"Preview",className:"w-full h-full object-contain",referrerPolicy:"no-referrer",onError:t=>{t.target.onerror=null,t.target.src="https://placehold.co/400x300?text=Image+Load+Error"}}),e.jsx("div",{className:"absolute bottom-3 right-3 bg-black/50 backdrop-blur-sm p-1.5 rounded-lg text-white opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Is,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"w-full px-4 py-8 bg-slate-50 border border-slate-200 rounded-xl text-slate-400 italic text-sm flex flex-col items-center gap-2",children:[e.jsx(Ca,{className:"w-8 h-8 opacity-50"}),e.jsx("span",{children:"ไม่มีรูปภาพ"})]}):e.jsxs("div",{className:"w-full border-2 border-dashed border-slate-200 rounded-2xl p-4 flex flex-col items-center justify-center text-center hover:border-indigo-400 hover:bg-indigo-50/30 transition-all cursor-pointer group",onDrop:nr,onDragOver:or,onClick:()=>document.getElementById("image-upload").click(),children:[e.jsx("input",{type:"file",id:"image-upload",className:"hidden",accept:"image/*",onChange:t=>t.target.files[0]&&ll(t.target.files[0])}),at?e.jsxs("div",{className:"relative w-full h-48 rounded-xl overflow-hidden shadow-sm border border-slate-100 group/img",onClick:t=>{t.stopPropagation(),As(at)},children:[e.jsx("img",{src:ge(at),alt:"Preview",className:"w-full h-full object-contain bg-slate-50",referrerPolicy:"no-referrer",onError:t=>{t.target.onerror=null,t.target.src="https://placehold.co/400x300?text=Image+Load+Error"}}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover/img:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(Is,{className:"w-6 h-6 text-white"}),e.jsx("span",{className:"text-white font-bold text-sm",children:"ดูรูปขยาย"})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),hs(null)},className:"absolute top-2 right-2 p-1.5 bg-white/80 backdrop-blur-sm text-rose-500 rounded-lg hover:bg-rose-50 hover:text-rose-600 transition shadow-sm z-10",children:e.jsx(Me,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"py-6 flex flex-col items-center",children:[e.jsx("div",{className:"p-3 bg-indigo-50 text-indigo-500 rounded-full mb-3 group-hover:scale-110 transition-transform",children:e.jsx(Dr,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-sm font-bold text-slate-600",children:"คลิกเพื่ออัพโหลด หรือลากไฟล์มาวาง"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"รองรับ JPG, PNG (Max 5MB)"})]})]})]})]})]})]}),e.jsxs("div",{className:"mt-10 space-y-6",ref:oa,children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-100",children:[e.jsx("span",{className:"bg-slate-900 text-white w-6 h-6 rounded-lg flex items-center justify-center text-xs font-bold",children:"3"}),e.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"การเงิน & เสนอราคา (Quotation)"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"font-bold text-indigo-700 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-5 h-5 rounded-full flex items-center justify-center text-xs",children:"1"}),"เงินสนับสนุนศิลปิน (Money Order)"]}),e.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl border border-indigo-100 p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"hidden sm:grid grid-cols-12 gap-3 px-2 text-xs font-bold text-indigo-800/60 uppercase tracking-wide",children:[e.jsx("div",{className:"col-span-4",children:"ประเภทแบงค์ (บาท)"}),e.jsx("div",{className:"col-span-3",children:"จำนวน (ใบ/เหรียญ)"}),e.jsx("div",{className:"col-span-4",children:"รวมเป็นเงิน (บาท)"}),e.jsx("div",{className:"col-span-1"})]}),Re.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3 items-center animate-in fade-in slide-in-from-left-2 duration-300 bg-white p-2 sm:p-0 rounded-xl sm:bg-transparent border sm:border-none border-indigo-100 shadow-sm sm:shadow-none",children:[e.jsxs("div",{className:"sm:col-span-4 relative",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-indigo-400 mb-1 block text-left",children:"ประเภทแบงค์"}),e.jsx("select",{value:t.denomination,onChange:l=>ja(a,"denomination",l.target.value),className:"w-full px-3 py-2 bg-white border border-indigo-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 appearance-none font-bold text-slate-700 text-center sm:text-left",children:[1e3,500,100,50,20,10,5,2,1].map(l=>e.jsx("option",{value:l,children:l>=20?`แบงค์ ${l}`:`เหรียญ ${l}`},l))}),e.jsx(He,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none hidden sm:block"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-indigo-400 mb-1 block text-left",children:"จำนวน"}),e.jsx("input",{type:"number",placeholder:"จำนวน",value:t.quantity===0?"":t.quantity,onChange:l=>ja(a,"quantity",l.target.value),className:"w-full px-3 py-2 bg-white border border-indigo-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 text-center"})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-indigo-400 mb-1 block text-left",children:"รวมเงิน"}),e.jsx("input",{type:"number",placeholder:"0.00",value:t.price===0?"":t.price,onChange:l=>ja(a,"price",l.target.value),className:"w-full px-3 py-2 bg-indigo-50 border border-indigo-200 rounded-lg text-sm font-black text-indigo-700 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 text-center sm:text-right"})]}),e.jsx("div",{className:"sm:col-span-1 flex justify-center sm:justify-end",children:e.jsx("button",{onClick:()=>jr(a),className:"p-2 text-indigo-300 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition",children:e.jsx(Me,{className:"w-4 h-4"})})})]},a))]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("button",{onClick:br,className:"flex items-center gap-2 text-xs font-bold text-indigo-600 hover:text-indigo-800 hover:bg-indigo-100 px-3 py-2 rounded-lg transition w-fit",children:[e.jsx(Ve,{className:"w-4 h-4"}),"เพิ่มรายการเงิน"]}),e.jsxs("div",{className:"text-sm font-bold text-indigo-800 bg-indigo-50 px-3 py-1.5 rounded-lg border border-indigo-100",children:["รวม: ฿",Re.reduce((t,a)=>t+(parseFloat(a.price)||0),0).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[e.jsxs("h5",{className:"font-bold text-emerald-700 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"bg-emerald-100 text-emerald-700 w-5 h-5 rounded-full flex items-center justify-center text-xs",children:"2"}),"รายการเสนอราคา (Quotation)"]}),e.jsxs("div",{className:"bg-emerald-50/50 rounded-2xl border border-emerald-100 p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"hidden sm:grid grid-cols-12 gap-3 px-2 text-xs font-bold text-emerald-800/60 uppercase tracking-wide",children:[e.jsx("div",{className:"col-span-3",children:"หมวดหมู่"}),e.jsx("div",{className:"col-span-4",children:"รายละเอียดรายการ"}),e.jsx("div",{className:"col-span-2 text-center",children:"จำนวน"})," ",e.jsx("div",{className:"col-span-2 text-right",children:"ราคา/หน่วย"})," ",e.jsx("div",{className:"col-span-1"})]}),Se.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3 items-start animate-in fade-in slide-in-from-left-2 duration-300 bg-white p-3 sm:p-0 rounded-xl sm:bg-transparent border sm:border-none border-emerald-100 shadow-sm sm:shadow-none",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-emerald-500 mb-1 block",children:"หมวดหมู่"}),e.jsx("input",{type:"text",list:"expense-categories",placeholder:"ระบุหมวดหมู่...",value:t.category,onChange:l=>ws(a,"category",l.target.value),className:"w-full px-3 py-2 bg-white border border-emerald-200 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500"})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-emerald-500 mb-1 block",children:"รายละเอียด"}),e.jsx("input",{type:"text",placeholder:"รายละเอียดเพิ่มเติม...",value:t.detail,onChange:l=>ws(a,"detail",l.target.value),className:"w-full px-3 py-2 bg-white border border-emerald-200 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-emerald-500 mb-1 block",children:"จำนวน"}),e.jsx("input",{type:"number",placeholder:"1",value:t.quantity,onChange:l=>ws(a,"quantity",l.target.value),className:"w-full px-3 py-2 bg-white border border-emerald-200 rounded-lg text-sm font-bold text-center text-slate-700 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-emerald-500 mb-1 block",children:"ราคา/หน่วย"}),e.jsx("input",{type:"number",placeholder:"0.00",value:t.unitPrice!==void 0?t.unitPrice:t.price,onChange:l=>ws(a,"unitPrice",l.target.value),className:"w-full px-3 py-2 bg-white border border-emerald-200 rounded-lg text-sm font-black text-emerald-700 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 text-right"})]}),e.jsx("div",{className:"sm:col-span-1 flex justify-center sm:justify-end pt-1",children:e.jsx("button",{onClick:()=>fr(a),className:"p-2 text-emerald-300 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition",children:e.jsx(Me,{className:"w-4 h-4"})})})]},a))]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("button",{onClick:gr,className:"flex items-center gap-2 text-xs font-bold text-emerald-600 hover:text-emerald-700 hover:bg-emerald-100 px-3 py-2 rounded-lg transition w-fit",children:[e.jsx(Ve,{className:"w-4 h-4"}),"เพิ่มรายการเสนอราคา"]}),e.jsxs("div",{className:"text-sm font-bold text-emerald-800 bg-emerald-50 px-3 py-1.5 rounded-lg border border-emerald-100",children:["รวม: ฿",Se.reduce((t,a)=>t+(parseFloat(a.price)||0),0).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[e.jsxs("h5",{className:"font-bold text-rose-700 text-sm flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"รายจ่ายจริง / ต้นทุนเพิ่ม (Expenses)"]}),e.jsx("p",{className:"text-[10px] text-slate-400 -mt-1 ml-6",children:"รายการนี้ไม่แสดงให้ลูกค้าเห็น (ใช้สำหรับคำนวณกำไรภายใน)"}),e.jsxs("div",{className:"bg-rose-50/50 rounded-2xl border border-rose-100 p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"hidden sm:grid grid-cols-12 gap-3 px-2 text-xs font-bold text-rose-800/60 uppercase tracking-wide",children:[e.jsx("div",{className:"col-span-3",children:"หมวดหมู่"}),e.jsx("div",{className:"col-span-4",children:"รายละเอียด"}),e.jsx("div",{className:"col-span-2 text-center",children:"จำนวน"})," ",e.jsx("div",{className:"col-span-2 text-right",children:"ราคา/หน่วย"})," ",e.jsx("div",{className:"col-span-1"})]}),ht.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3 items-start animate-in fade-in slide-in-from-left-2 duration-300 bg-white p-3 sm:p-0 rounded-xl sm:bg-transparent border sm:border-none border-rose-100 shadow-sm sm:shadow-none",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-rose-400 mb-1 block",children:"หมวดหมู่"}),e.jsx("input",{type:"text",list:"expense-categories",placeholder:"หมวดหมู่...",value:t.category,onChange:l=>js(a,"category",l.target.value),className:"w-full px-3 py-2 bg-white border border-rose-200 rounded-lg text-sm focus:ring-2 focus:ring-rose-500/20"})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-rose-400 mb-1 block",children:"รายละเอียด"}),e.jsx("input",{type:"text",placeholder:"รายละเอียด...",value:t.detail,onChange:l=>js(a,"detail",l.target.value),className:"w-full px-3 py-2 bg-white border border-rose-200 rounded-lg text-sm focus:ring-2 focus:ring-rose-500/20"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-rose-400 mb-1 block",children:"จำนวน"}),e.jsx("input",{type:"number",placeholder:"1",value:t.quantity,onChange:l=>js(a,"quantity",l.target.value),className:"w-full px-3 py-2 bg-white border border-rose-200 rounded-lg text-sm font-bold text-center text-slate-700 focus:ring-2 focus:ring-rose-500/20"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("span",{className:"sm:hidden text-xs font-bold text-rose-400 mb-1 block",children:"ราคา/หน่วย"}),e.jsx("input",{type:"number",placeholder:"0.00",value:t.unitPrice!==void 0?t.unitPrice:t.price,onChange:l=>js(a,"unitPrice",l.target.value),className:"w-full px-3 py-2 bg-white border border-rose-200 rounded-lg text-sm font-semibold text-rose-800 focus:ring-2 focus:ring-rose-500/20 text-right"})]}),e.jsx("div",{className:"sm:col-span-1 flex justify-center sm:justify-end pt-1",children:e.jsx("button",{onClick:()=>ur(a),className:"p-2 text-rose-300 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition",children:e.jsx(Me,{className:"w-4 h-4"})})})]},a))]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("button",{onClick:pr,className:"flex items-center gap-2 text-xs font-bold text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition w-fit",children:[e.jsx(Ve,{className:"w-4 h-4"}),"เพิ่มรายการจ่าย"]}),e.jsxs("div",{className:"text-sm font-bold text-rose-800 bg-rose-50 px-3 py-1.5 rounded-lg border border-rose-100",children:["รวม: ฿",ht.reduce((t,a)=>t+(parseFloat(a.price)||0),0).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-2xl border border-indigo-100 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-indigo-800 mb-1",children:"ยอดรวมสุทธิ"}),e.jsx("p",{className:"text-[10px] text-indigo-600 mb-2",children:"(เรียกเก็บลูกค้า)"})]}),e.jsxs("p",{className:`font-black text-indigo-900 tracking-tight break-all leading-tight ${(Se.reduce((t,a)=>t+(parseFloat(a.price)||0),0)+Re.reduce((t,a)=>t+(parseFloat(a.price)||0),0)).toString().length>9?"text-xl":"text-2xl"}`,children:["฿",(Se.reduce((t,a)=>t+(parseFloat(a.price)||0),0)+Re.reduce((t,a)=>t+(parseFloat(a.price)||0),0)).toLocaleString()]})]}),e.jsxs("div",{className:"bg-emerald-50 p-4 rounded-2xl border border-emerald-100 flex flex-col justify-between",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-600 mb-2",children:"เสนอราคา"}),e.jsxs("p",{className:"font-black text-emerald-700 tracking-tight break-all leading-tight text-2xl",children:["฿",Se.reduce((t,a)=>t+(parseFloat(a.price)||0),0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-200 flex flex-col justify-between",children:[e.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:"รวมรายจ่ายจริง"}),e.jsxs("p",{className:`font-black text-rose-600 tracking-tight break-all leading-tight ${Vt.toString().length>9?"text-xl":"text-2xl"}`,children:["฿",Vt.toLocaleString()]})]}),e.jsxs("div",{className:"bg-indigo-600 text-white p-4 rounded-2xl shadow-lg shadow-indigo-200 flex flex-col justify-between",children:[e.jsx("p",{className:"text-sm font-bold text-indigo-100 mb-2",children:"กำไร (ไม่รวมเงินออเดอร์)"}),e.jsxs("p",{className:`font-black tracking-tight break-all leading-tight ${(Se.reduce((t,a)=>t+(parseFloat(a.price)||0),0)-Vt).toString().length>9?"text-xl":"text-2xl"}`,children:[Se.reduce((t,a)=>t+(parseFloat(a.price)||0),0)-Vt>=0?"+":"","฿",(Se.reduce((t,a)=>t+(parseFloat(a.price)||0),0)-Vt).toLocaleString()]})]})]}),B&&e.jsx("div",{className:"mt-4 flex justify-end animate-in fade-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 bg-amber-50 border border-amber-100 p-2 pl-4 rounded-2xl",children:[e.jsxs("span",{className:"text-xs font-bold text-amber-700",children:[e.jsx(_s,{className:"w-3 h-3 inline mr-1 mb-0.5"}),"แก้ไขยอดเงินแล้ว อย่าลืมกดบันทึก"]}),e.jsxs("button",{onClick:nl,className:"px-5 py-2 bg-emerald-600 text-white text-sm font-bold rounded-xl shadow-md shadow-emerald-200 hover:bg-emerald-700 hover:-translate-y-0.5 transition-all flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"บันทึกยอดเงิน"]})]})})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-100",children:[e.jsx("span",{className:"bg-slate-900 text-white w-6 h-6 rounded-lg flex items-center justify-center text-xs font-bold",children:"4"}),e.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"หมายเหตุ"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pa,{className:"absolute left-4 top-3.5 w-5 h-5 text-slate-400"}),e.jsx("textarea",{rows:3,placeholder:"ระบุหมายเหตุเพิ่มเติม...",value:el,disabled:B,onChange:t=>sa(t.target.value),className:`w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium resize-none ${B?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`})]})]})]}),e.jsx("div",{className:"px-4 pt-4 sm:px-8 sm:py-6 border-t border-slate-100 bg-white/90 backdrop-blur-xl sticky bottom-0 z-30 safe-area-bottom-modal",children:e.jsxs("div",{className:"flex items-center justify-center sm:justify-between gap-3 w-full",children:[jt?e.jsxs("button",{onClick:mr,className:"w-[35%] sm:w-auto group flex items-center justify-center gap-2 py-3.5 sm:px-6 rounded-2xl text-rose-500 bg-rose-50 hover:bg-rose-100 transition-all duration-300 border border-transparent hover:border-rose-100 active:scale-95 shadow-sm shrink-0",title:"ลบรายการ",children:[e.jsx(Me,{className:"w-5 h-5 shrink-0"}),e.jsx("span",{className:"font-bold text-sm hidden sm:inline",children:"ลบรายการ"}),e.jsx("span",{className:"font-bold text-sm sm:hidden",children:"ลบ"})]}):e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:`${jt?"flex-1":"w-full"} sm:flex-none sm:w-auto sm:ml-auto`,children:B?e.jsxs("button",{onClick:()=>Oa(!1),className:"w-full sm:w-auto py-3.5 px-6 bg-indigo-50 text-indigo-600 border border-indigo-100 rounded-2xl font-bold hover:bg-indigo-100 hover:border-indigo-200 hover:-translate-y-0.5 shadow-sm hover:shadow-md transition-all duration-200 flex items-center justify-center gap-2 active:scale-95",children:[e.jsx(Ss,{className:"w-5 h-5"}),e.jsx("span",{children:"แก้ไข"})]}):e.jsxs("button",{onClick:nl,className:"w-full sm:w-auto py-3.5 px-8 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-2xl font-bold shadow-xl shadow-indigo-200 hover:shadow-indigo-300 hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-2 active:scale-95",children:[e.jsx(It,{className:"w-5 h-5"}),e.jsx("span",{children:"บันทึก"})]})})]})})]})]}),e.jsx("datalist",{id:"artist-list",children:ql.map((t,a)=>e.jsx("option",{value:t},a))}),e.jsx("datalist",{id:"customer-list",children:as.map((t,a)=>e.jsx("option",{value:t.name},a))}),e.jsx("datalist",{id:"recipient-list",children:Ka.map((t,a)=>e.jsx("option",{value:t.name},a))}),e.jsx("datalist",{id:"expense-categories",children:Pe.map((t,a)=>e.jsx("option",{value:t},a))})]})};kr.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(rn,{})}));
